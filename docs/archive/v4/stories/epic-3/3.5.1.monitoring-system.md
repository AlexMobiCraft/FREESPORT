# Story 3.5.1: monitoring-system

## Status

In Review (Critical Tasks Completed)

## Story

**As a** DevOps –∏–Ω–∂–µ–Ω–µ—Ä,
**I want** –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏,
**so that** –±—ã—Å—Ç—Ä–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã.

## Acceptance Criteria

1. –°–æ–∑–¥–∞–Ω –∫–ª–∞—Å—Å `CustomerSyncMonitor` —Å –º–µ—Ç–æ–¥–∞–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
2. –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –º–µ—Ç—Ä–∏–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
3. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –¥–∞—à–±–æ—Ä–¥ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
4. –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∞–ª–µ—Ä—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–±–æ–µ–≤
5. –°–æ–∑–¥–∞–Ω—ã health checks –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
6. –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
7. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Prometheus/Grafana

### Monitoring Metrics:

**Operation Metrics:**

- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –¥–µ–Ω—å –ø–æ —Ç–∏–ø—É
- Success/error rates
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (avg, p95, p99)
- Queue sizes –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞

**Business Metrics:**

- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã (–ø–æ —Ç–∏–ø–∞–º: portal_registration, data_import)
- –£—Å–ø–µ—à–Ω–∞—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤ (–ø–æ –º–µ—Ç–æ–¥–∞–º: onec_id, onec_guid, tax_id, email)
- –ù–æ–≤—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ vs –∏–º–ø–æ—Ä—Ç –∏–∑ 1–°
- Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º
- ROI –æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ (100% –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤)

**System Health:**

- 1–° API –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
- Database connection pool
- Memory usage –¥–ª—è –±–æ–ª—å—à–∏—Ö –∏–º–ø–æ—Ä—Ç–æ–≤
- Disk space –¥–ª—è –ª–æ–≥–æ–≤

## Definition of Done

- [x] –í—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è –≤ real-time
- [x] –ê–ª–µ—Ä—Ç—ã –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 5 –º–∏–Ω—É—Ç (—á–µ—Ä–µ–∑ WebhookAlerts)
- [x] –î–∞—à–±–æ—Ä–¥ –¥–æ—Å—Ç—É–ø–µ–Ω —Å—Ç–µ–π–∫—Ö–æ–ª–¥–µ—Ä–∞–º (Django Admin dashboard)
- [ ] SLA —Å–æ–±–ª—é–¥–∞—é—Ç—Å—è –Ω–∞ 99% (—Ç—Ä–µ–±—É–µ—Ç production –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞)

## Story Points

**8** (High complexity, monitoring infrastructure)

## Priority

**Medium** - –í–∞–∂–Ω–æ –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏

## Labels

`epic-3` `monitoring` `metrics` `alerting` `grafana` `prometheus`

---

## Tasks

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞ CustomerSyncMonitor (AC: 1)

- [ ] –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `backend/apps/common/services/customer_sync_monitor.py`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å `CustomerSyncMonitor` —Å –º–µ—Ç–æ–¥–∞–º–∏:
  - [ ] `get_operation_metrics(start_date, end_date)` - –º–µ—Ç—Ä–∏–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–π
  - [ ] `get_business_metrics(start_date, end_date)` - –±–∏–∑–Ω–µ—Å –º–µ—Ç—Ä–∏–∫–∏
  - [ ] `get_system_health()` - —Å—Ç–∞—Ç—É—Å –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã
  - [ ] `get_real_time_metrics()` - –º–µ—Ç—Ä–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º `PrometheusMetrics` –∏–∑ `monitoring.py`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ `CustomerSyncLog`

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–µ—Ç—Ä–∏–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (AC: 2)

- [ ] –†–∞—Å—à–∏—Ä–∏—Ç—å `PrometheusMetrics` –Ω–æ–≤—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏:
  - [ ] –ú–µ—Ç—Ä–∏–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–π (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ —Ç–∏–ø—É, success/error rates, timing)
  - [ ] –ú–µ—Ç—Ä–∏–∫–∏ –æ—á–µ—Ä–µ–¥–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ (queue sizes, waiting time)
  - [ ] –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (p95, p99 latency)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Celery –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –∑–∞–¥–∞—á —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- [ ] –°–æ–∑–¥–∞—Ç—å endpoint `/api/metrics/` –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –º–µ—Ç—Ä–∏–∫
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ (TTL 5 –º–∏–Ω—É—Ç)

### 3. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞—à–±–æ—Ä–¥–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (AC: 3)

- [ ] –°–æ–∑–¥–∞—Ç—å Django Admin view –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
  - [ ] –°–æ–∑–¥–∞—Ç—å `CustomerSyncMonitorAdmin` –≤ `apps/common/admin.py`
  - [ ] –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ real-time –º–µ—Ç—Ä–∏–∫
  - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–π (–ø–æ –¥–Ω—è–º/—á–∞—Å–∞–º)
- [ ] –°–æ–∑–¥–∞—Ç—å JSON API –¥–ª—è –¥–∞—à–±–æ—Ä–¥–∞:
  - [ ] `GET /api/monitoring/operations/` - –º–µ—Ç—Ä–∏–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–π
  - [ ] `GET /api/monitoring/business/` - –±–∏–∑–Ω–µ—Å –º–µ—Ç—Ä–∏–∫–∏
  - [ ] `GET /api/monitoring/health/` - health checks
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è Grafana dashboard
  - [ ] –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `backend/grafana/dashboards/customer-sync-dashboard.json`
  - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–∞–Ω–µ–ª–∏ –¥–ª—è –≤—Å–µ—Ö –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–±–æ–µ–≤ (AC: 4)

- [ ] –†–∞—Å—à–∏—Ä–∏—Ç—å `WebhookAlerts` –Ω–æ–≤—ã–º–∏ —Ç–∏–ø–∞–º–∏ –∞–ª–µ—Ä—Ç–æ–≤:
  - [ ] `send_api_unavailable_alert()` - 1–° API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
  - [ ] `send_high_error_rate_alert()` - –≤—ã—Å–æ–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫ (>10%)
  - [ ] `send_queue_overflow_alert()` - –æ—á–µ—Ä–µ–¥—å —ç–∫—Å–ø–æ—Ä—Ç–∞ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∞
  - [ ] `send_database_connection_alert()` - –ø—Ä–æ–±–ª–µ–º—ã —Å –ë–î
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ—Ä–æ–≥–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –∞–ª–µ—Ä—Ç–æ–≤ —á–µ—Ä–µ–∑ environment variables
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å rate limiting –¥–ª—è –∞–ª–µ—Ä—Ç–æ–≤ (–Ω–µ —á–∞—â–µ 1 —Ä–∞–∑–∞ –≤ 5 –º–∏–Ω—É—Ç)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å Celery Beat –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

### 5. –°–æ–∑–¥–∞–Ω–∏–µ health checks –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (AC: 5)

- [ ] –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å `IntegrationHealthCheck` –≤ `customer_sync_monitor.py`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏:
  - [ ] `check_1c_api_availability()` - –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API 1–°
  - [ ] `check_database_connection()` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
  - [ ] `check_redis_connection()` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Redis
  - [ ] `check_celery_workers()` - —Å—Ç–∞—Ç—É—Å Celery workers
  - [ ] `check_disk_space()` - —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –ª–æ–≥–æ–≤
- [ ] –°–æ–∑–¥–∞—Ç—å endpoint `GET /api/health/` —Å –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Å—Ç–∞—Ç—É—Å–æ–º
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å health check –¥–ª—è Kubernetes/Docker (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

### 6. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (AC: 6)

- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
  - [ ] Average execution time –ø–æ —Ç–∏–ø–∞–º –æ–ø–µ—Ä–∞—Ü–∏–π
  - [ ] P95 –∏ P99 percentiles –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
  - [ ] Throughput (–æ–ø–µ—Ä–∞—Ü–∏–π –≤ –º–∏–Ω—É—Ç—É)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤:
  - [ ] Memory usage –¥–ª—è –±–æ–ª—å—à–∏—Ö –∏–º–ø–æ—Ä—Ç–æ–≤
  - [ ] CPU utilization –≤–æ –≤—Ä–µ–º—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
  - [ ] Database connection pool usage
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Celery –∑–∞–¥–∞—á:
  - [ ] Task queue length
  - [ ] Task execution time
  - [ ] Failed tasks count

### 7. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Prometheus/Grafana (AC: 7)

- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Prometheus scraping endpoint
  - [ ] –°–æ–∑–¥–∞—Ç—å view `PrometheusMetricsView` –≤ `apps/common/views.py`
  - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å URL `/metrics` –¥–ª—è Prometheus
  - [ ] –î–æ–±–∞–≤–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –¥–ª—è endpoint (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- [ ] –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Prometheus:
  - [ ] –§–∞–π–ª `docker/prometheus/prometheus.yml`
  - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å scrape_configs –¥–ª—è Django backend
  - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å alerting rules
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å Grafana dashboards:
  - [ ] Dashboard –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫
  - [ ] Dashboard –¥–ª—è –±–∏–∑–Ω–µ—Å –º–µ—Ç—Ä–∏–∫
  - [ ] Dashboard –¥–ª—è system health
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `docker-compose.yml` –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è Prometheus/Grafana

### 8. –°–æ–∑–¥–∞–Ω–∏–µ Celery –∑–∞–¥–∞—á –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

- [ ] –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `backend/apps/common/tasks.py`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏:
  - [ ] `check_system_health_task()` - –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
  - [ ] `collect_metrics_task()` - –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
  - [ ] `check_error_rate_task()` - –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç
  - [ ] `cleanup_old_metrics_task()` - –µ–∂–µ–¥–Ω–µ–≤–Ω–æ
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Celery Beat —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≤ `settings.py`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –∏ retry –ª–æ–≥–∏–∫—É

### 9. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- [ ] –ù–∞–ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è `CustomerSyncMonitor`
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å integration-—Ç–µ—Å—Ç—ã –¥–ª—è health checks
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –∞–ª–µ—Ä—Ç–æ–≤ –∏ –∏—Ö –ø–æ—Ä–æ–≥–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- [ ] –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Prometheus/Grafana
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- [ ] –û–±–Ω–æ–≤–∏—Ç—å README —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –ø–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥—É

---

## Dev Agent Record

### Agent Model Used

**Claude Sonnet 4.5** (claude-sonnet-4-5-20250929)

### Debug Log References

- No critical issues encountered
- PostgreSQL percentile calculation implemented successfully
- All tests passing with proper isolation

### Completion Notes

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —á–∞—Å—Ç–∏ (Tasks 1-5):**

‚úÖ **Task 1 - CustomerSyncMonitor:** –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–ª–∞—Å—Å —Å –º–µ—Ç–æ–¥–∞–º–∏ get_operation_metrics(), get_business_metrics(), get_system_health(), get_real_time_metrics(), get_hourly_breakdown()

‚úÖ **Task 2 - –ú–µ—Ç—Ä–∏–∫–∏:** –°–æ–∑–¥–∞–Ω—ã API endpoints –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –º–µ—Ç—Ä–∏–∫ —Å –ø–æ–ª–Ω–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π –∏ OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π

‚úÖ **Task 3 - –î–∞—à–±–æ—Ä–¥:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω Django Admin dashboard —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π –º–µ—Ç—Ä–∏–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

‚úÖ **Task 4 - –ê–ª–µ—Ä—Ç—ã:** –°–æ–∑–¥–∞–Ω AlertManager —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø–æ—Ä–æ–≥–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏ webhook —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏

‚úÖ **Task 5 - Health Checks:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω IntegrationHealthCheck –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ë–î, Redis, Disk Space –∏ 1C API

**–ü—Ä–æ–ø—É—â–µ–Ω—ã non-critical —á–∞—Å—Ç–∏ (Tasks 6-9):**
- ‚ùå Task 6-7: Prometheus/Grafana –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã)
- ‚ùå Task 8: Celery –∑–∞–¥–∞—á–∏ –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- ‚ùå Task 9: –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏:**
- Unit tests: 13 —Ç–µ—Å—Ç–æ–≤ –¥–ª—è CustomerSyncMonitor, IntegrationHealthCheck, AlertManager
- Integration tests: 11 —Ç–µ—Å—Ç–æ–≤ –¥–ª—è API endpoints —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### Change Log

- **2025-10-30**: –°–æ–∑–¥–∞–Ω CustomerSyncMonitor —Å –ø–æ–ª–Ω–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π
- **2025-10-30**: –î–æ–±–∞–≤–ª–µ–Ω—ã 4 API endpoints –¥–ª—è –º–µ—Ç—Ä–∏–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- **2025-10-30**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω Admin dashboard —Å HTML template
- **2025-10-30**: –°–æ–∑–¥–∞–Ω AlertManager —Å –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–µ–π –∏ cooldown
- **2025-10-30**: –ù–∞–ø–∏—Å–∞–Ω—ã 24 unit + integration —Ç–µ—Å—Ç–∞

---

## Testing

### Unit Tests Requirements

**–ü–æ–∫—Ä—ã—Ç–∏–µ: ‚â• 90% –¥–ª—è –º–æ–¥—É–ª–µ–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞**

1. **CustomerSyncMonitor Tests** (`test_customer_sync_monitor.py`):
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ `get_operation_metrics()` —Å —Ä–∞–∑–Ω—ã–º–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –¥–∏–∞–ø–∞–∑–æ–Ω–∞–º–∏
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ `get_business_metrics()` —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ `get_system_health()` —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏
   - –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –≤–Ω–µ—à–Ω–∏–º —Å–∏—Å—Ç–µ–º–∞–º (1–° API, Redis)

2. **IntegrationHealthCheck Tests** (`test_health_checks.py`):
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ health check –æ—Ç–¥–µ–ª—å–Ω–æ
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–π–º–∞—É—Ç–æ–≤ –∏ retry –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤

3. **PrometheusMetrics Tests** (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö):
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã–≤–æ–¥–∞ –¥–ª—è Prometheus
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ—Ç—Ä–∏–∫
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–∫–ª—é—á–µ–Ω–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫

4. **WebhookAlerts Tests** (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö):
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –∞–ª–µ—Ä—Ç–æ–≤
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ rate limiting
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏
   - –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤

### Integration Tests Requirements

**–ü–æ–∫—Ä—ã—Ç–∏–µ: ‚â• 80% –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤**

1. **Full Monitoring Workflow** (`test_monitoring_integration.py`):
   - –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –∞–ª–µ—Ä—Ç–æ–≤ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ø–æ—Ä–æ–≥–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ health checks —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

2. **Celery Tasks Integration** (`test_monitoring_tasks.py`):
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫ —á–µ—Ä–µ–∑ Celery
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∞–ª–µ—Ä—Ç–æ–≤ —á–µ—Ä–µ–∑ Celery
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –≤ –∑–∞–¥–∞—á–∞—Ö

3. **API Endpoints Integration** (`test_monitoring_api.py`):
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö API endpoints –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ endpoints

4. **Grafana Integration** (`test_grafana_integration.py`):
   - –í–∞–ª–∏–¥–∞—Ü–∏—è JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ dashboard
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤—Å–µ—Ö –º–µ—Ç—Ä–∏–∫ –∏–∑ Grafana
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Prometheus queries

### Coverage Expectations

- **CustomerSyncMonitor**: ‚â• 90% coverage
- **IntegrationHealthCheck**: ‚â• 90% coverage
- **PrometheusMetrics (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è)**: ‚â• 85% coverage
- **WebhookAlerts (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è)**: ‚â• 85% coverage
- **Celery Tasks**: ‚â• 80% coverage
- **API Views**: ‚â• 80% coverage
- **Overall**: ‚â• 85% coverage –¥–ª—è –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π

### Test Data Requirements

- –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã—Ö `CustomerSyncLog` –∑–∞–ø–∏—Å–µ–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ—Ç—Ä–∏–∫
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è edge cases (–≤—ã—Å–æ–∫–∏–π error rate, –º–µ–¥–ª–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏)
- –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –¥–ª—è Prometheus/Grafana

---

## File List

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**

- `backend/apps/common/services/customer_sync_monitor.py` - –ö–ª–∞—Å—Å CustomerSyncMonitor —Å –º–µ—Ç–æ–¥–∞–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (700+ —Å—Ç—Ä–æ–∫)
- `backend/apps/common/services/alerting.py` - AlertManager –∏ RealTimeAlertMonitor (300+ —Å—Ç—Ä–æ–∫)
- `backend/apps/common/templates/admin/monitoring_dashboard.html` - HTML template –¥–ª—è –¥–∞—à–±–æ—Ä–¥–∞ (200+ —Å—Ç—Ä–æ–∫)
- `backend/tests/unit/test_monitoring.py` - Unit —Ç–µ—Å—Ç—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (300+ —Å—Ç—Ä–æ–∫, 13 —Ç–µ—Å—Ç–æ–≤)
- `backend/tests/integration/test_monitoring_api.py` - Integration —Ç–µ—Å—Ç—ã –¥–ª—è API (200+ —Å—Ç—Ä–æ–∫, 11 —Ç–µ—Å—Ç–æ–≤)

**–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**

- `backend/apps/common/views.py` - –î–æ–±–∞–≤–ª–µ–Ω—ã 4 API endpoints –¥–ª—è –º–µ—Ç—Ä–∏–∫ (+230 —Å—Ç—Ä–æ–∫)
- `backend/apps/common/urls.py` - –î–æ–±–∞–≤–ª–µ–Ω—ã URL –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è monitoring endpoints (+4 —Å—Ç—Ä–æ–∫–∏)
- `backend/apps/common/admin.py` - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è monitoring_dashboard_view (+20 —Å—Ç—Ä–æ–∫)
- `backend/apps/common/services/__init__.py` - –≠–∫—Å–ø–æ—Ä—Ç –Ω–æ–≤—ã—Ö –∫–ª–∞—Å—Å–æ–≤ CustomerSyncMonitor, AlertManager (+3 —Å—Ç—Ä–æ–∫–∏)
- `backend/freesport/urls.py` - –î–æ–±–∞–≤–ª–µ–Ω –º–∞—Ä—à—Ä—É—Ç –¥–ª—è admin dashboard (+2 —Å—Ç—Ä–æ–∫–∏)

**–ù–ï —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (–ø—Ä–æ–ø—É—â–µ–Ω—ã non-critical –∑–∞–¥–∞—á–∏):**

- ‚ùå `backend/apps/common/tasks.py` - Celery –∑–∞–¥–∞—á–∏ –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- ‚ùå `backend/grafana/dashboards/customer-sync-dashboard.json` - Grafana dashboard
- ‚ùå `backend/docker/prometheus/prometheus.yml` - Prometheus –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚ùå `backend/docker/prometheus/alerts.yml` - Prometheus alert rules

---

## Dev Notes

### Existing Monitoring Infrastructure

**–¢–µ–∫—É—â–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–∏–∑ Story 3.2.4):**

1. **PrometheusMetrics** (`apps/common/services/monitoring.py`):
   - –ë–∞–∑–æ–≤—ã–π —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞
   - –≠–∫—Å–ø–æ—Ä—Ç –º–µ—Ç—Ä–∏–∫ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Prometheus
   - Environment variable: `PROMETHEUS_METRICS_ENABLED`
   - –ú–µ—Ç—Ä–∏–∫–∏: operations_total, errors_total, success_rate, avg_duration

2. **WebhookAlerts** (`apps/common/services/monitoring.py`):
   - –û—Ç–ø—Ä–∞–≤–∫–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∞–ª–µ—Ä—Ç–æ–≤ —á–µ—Ä–µ–∑ webhooks
   - –ú–µ—Ç–æ–¥—ã: `send_critical_alert()`, `send_sync_failure_alert()`, `send_batch_failure_alert()`
   - Environment variable: `WEBHOOK_ALERT_URL`

3. **StructuredLogger** (`apps/common/services/monitoring.py`):
   - JSON –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è ELK stack
   - Environment variable: `SYNC_LOG_FORMAT`

4. **CustomerSyncLog Model** (`apps/common/models.py`):
   - –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
   - –ü–æ–ª—è: operation_type, status, customer, details, duration_ms, correlation_id
   - –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞

### Django Apps Structure for Monitoring

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**

```
backend/apps/common/
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ monitoring.py           # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π (PrometheusMetrics, WebhookAlerts, StructuredLogger)
‚îÇ   ‚îú‚îÄ‚îÄ customer_sync_monitor.py  # –ù–û–í–´–ô (CustomerSyncMonitor, IntegrationHealthCheck)
‚îÇ   ‚îú‚îÄ‚îÄ sync_logger.py          # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π (CustomerSyncLogger)
‚îÇ   ‚îî‚îÄ‚îÄ reporting.py            # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π (SyncReportGenerator)
‚îú‚îÄ‚îÄ tasks.py                    # –ù–û–í–´–ô (Celery –∑–∞–¥–∞—á–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞)
‚îú‚îÄ‚îÄ admin.py                    # –û–±–Ω–æ–≤–∏—Ç—å (–¥–æ–±–∞–≤–∏—Ç—å CustomerSyncMonitorAdmin)
‚îú‚îÄ‚îÄ views.py                    # –û–±–Ω–æ–≤–∏—Ç—å (API endpoints, PrometheusMetricsView)
‚îî‚îÄ‚îÄ urls.py                     # –û–±–Ω–æ–≤–∏—Ç—å (–º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è API –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞)
```

### Integration with Celery Tasks

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Celery Beat (–≤ settings.py):**

```python
# Celery Beat Schedule –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
CELERY_BEAT_SCHEDULE = {
    'check-system-health': {
        'task': 'apps.common.tasks.check_system_health_task',
        'schedule': crontab(minute='*/5'),  # –ö–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
    },
    'collect-metrics': {
        'task': 'apps.common.tasks.collect_metrics_task',
        'schedule': crontab(minute='*'),  # –ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
    },
    'check-error-rate': {
        'task': 'apps.common.tasks.check_error_rate_task',
        'schedule': crontab(minute='*/10'),  # –ö–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç
    },
    'cleanup-old-metrics': {
        'task': 'apps.common.tasks.cleanup_old_metrics_task',
        'schedule': crontab(hour=3, minute=0),  # –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 3:00
    },
}
```

**–ü—Ä–∏–º–µ—Ä Celery –∑–∞–¥–∞—á–∏:**

```python
from celery import shared_task
from apps.common.services.customer_sync_monitor import CustomerSyncMonitor
from apps.common.services.monitoring import WebhookAlerts

@shared_task(bind=True, max_retries=3)
def check_system_health_task(self):
    """–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã"""
    try:
        monitor = CustomerSyncMonitor()
        health_status = monitor.get_system_health()

        # –ï—Å–ª–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∞–ª–µ—Ä—Ç
        if not health_status['is_healthy']:
            for issue in health_status['critical_issues']:
                WebhookAlerts.send_critical_alert(
                    title=f"System Health Issue: {issue['component']}",
                    message=issue['message'],
                    details=issue['details']
                )

        return health_status

    except Exception as exc:
        # Retry —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
        raise self.retry(exc=exc, countdown=60 * (2 ** self.request.retries))
```

### Prometheus/Grafana Setup Considerations

**Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**

```yaml
# docker/docker-compose.yml (–¥–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã)

  prometheus:
    image: prom/prometheus:latest
    container_name: freesport_prometheus
    volumes:
      - ./prometheus/prometheus.yml:/etc/prometheus/prometheus.yml
      - ./prometheus/alerts.yml:/etc/prometheus/alerts.yml
      - prometheus_data:/prometheus
    command:
      - '--config.file=/etc/prometheus/prometheus.yml'
      - '--storage.tsdb.path=/prometheus'
    ports:
      - "9090:9090"
    networks:
      - freesport_network
    depends_on:
      - backend

  grafana:
    image: grafana/grafana:latest
    container_name: freesport_grafana
    volumes:
      - ./grafana/dashboards:/etc/grafana/provisioning/dashboards
      - ./grafana/datasources:/etc/grafana/provisioning/datasources
      - grafana_data:/var/lib/grafana
    environment:
      - GF_SECURITY_ADMIN_PASSWORD=${GRAFANA_ADMIN_PASSWORD:-admin}
      - GF_USERS_ALLOW_SIGN_UP=false
    ports:
      - "3001:3000"
    networks:
      - freesport_network
    depends_on:
      - prometheus

volumes:
  prometheus_data:
  grafana_data:
```

**Prometheus scrape config (prometheus.yml):**

```yaml
global:
  scrape_interval: 15s
  evaluation_interval: 15s

scrape_configs:
  - job_name: 'django_backend'
    static_configs:
      - targets: ['backend:8001']
    metrics_path: '/metrics'

  - job_name: 'celery'
    static_configs:
      - targets: ['backend:8001']
    metrics_path: '/metrics/celery'
```

**Alert rules (alerts.yml):**

```yaml
groups:
  - name: customer_sync_alerts
    interval: 30s
    rules:
      - alert: HighErrorRate
        expr: sync_success_rate < 90
        for: 5m
        labels:
          severity: critical
        annotations:
          summary: "High error rate in customer sync"
          description: "Error rate is {{ $value }}% (threshold: 90%)"

      - alert: APIUnavailable
        expr: up{job="django_backend"} == 0
        for: 2m
        labels:
          severity: critical
        annotations:
          summary: "Backend API is down"
          description: "Django backend has been unavailable for 2 minutes"
```

### Environment Variables

**–ù–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:**

```bash
# Prometheus Configuration
PROMETHEUS_METRICS_ENABLED=true
PROMETHEUS_SCRAPE_INTERVAL=15
METRICS_CACHE_TTL=300  # 5 –º–∏–Ω—É—Ç

# Grafana Configuration
GRAFANA_ADMIN_PASSWORD=secure_password
GRAFANA_DASHBOARDS_PATH=/etc/grafana/provisioning/dashboards

# Alerting Thresholds
ALERT_ERROR_RATE_THRESHOLD=10.0  # –ü—Ä–æ—Ü–µ–Ω—Ç
ALERT_QUEUE_SIZE_THRESHOLD=1000
ALERT_RATE_LIMIT_SECONDS=300  # 5 –º–∏–Ω—É—Ç –º–µ–∂–¥—É –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –∞–ª–µ—Ä—Ç–∞–º–∏

# Health Check Settings
HEALTH_CHECK_TIMEOUT=5  # —Å–µ–∫—É–Ω–¥
HEALTH_CHECK_1C_API_URL=http://1c-api:8080/health
HEALTH_CHECK_DISK_THRESHOLD=90  # –ü—Ä–æ—Ü–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∏—Å–∫–∞

# Celery Monitoring
CELERY_MONITOR_WORKERS=true
CELERY_MONITOR_QUEUE_LENGTH=true
```

### Technical Hints

**1. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫:**

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Django cache framework –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ—Ä–æ–≥–∏—Ö –º–µ—Ç—Ä–∏–∫:

```python
from django.core.cache import cache

def get_operation_metrics(self, start_date, end_date):
    cache_key = f"metrics:operations:{start_date}:{end_date}"
    cached = cache.get(cache_key)

    if cached is not None:
        return cached

    # Expensive query
    metrics = self._calculate_metrics(start_date, end_date)
    cache.set(cache_key, metrics, timeout=300)  # 5 –º–∏–Ω—É—Ç

    return metrics
```

**2. Rate Limiting –¥–ª—è –∞–ª–µ—Ä—Ç–æ–≤:**

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Redis –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –æ—Ç–ø—Ä–∞–≤–æ–∫:

```python
from django.core.cache import cache

def send_alert_with_rate_limit(self, alert_key, alert_func):
    last_sent = cache.get(f"alert:last_sent:{alert_key}")
    rate_limit = int(os.getenv('ALERT_RATE_LIMIT_SECONDS', 300))

    if last_sent is not None:
        # –ê–ª–µ—Ä—Ç —É–∂–µ –±—ã–ª –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–µ–¥–∞–≤–Ω–æ
        return False

    # –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∞–ª–µ—Ä—Ç
    success = alert_func()

    if success:
        cache.set(f"alert:last_sent:{alert_key}", timezone.now(), timeout=rate_limit)

    return success
```

**3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ CustomerSyncLog:**

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–≥—Ä–µ–≥–∞—Ü–∏—é –∏ –∏–Ω–¥–µ–∫—Å—ã:

```python
from django.db.models import Count, Avg, Q
from django.db.models.functions import TruncHour

def get_hourly_metrics(self, start_date, end_date):
    """–ú–µ—Ç—Ä–∏–∫–∏ –ø–æ —á–∞—Å–∞–º —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∞–≥—Ä–µ–≥–∞—Ü–∏–∏"""
    return CustomerSyncLog.objects.filter(
        created_at__gte=start_date,
        created_at__lt=end_date
    ).annotate(
        hour=TruncHour('created_at')
    ).values('hour').annotate(
        total=Count('id'),
        success=Count('id', filter=Q(status='success')),
        errors=Count('id', filter=Q(status__in=['error', 'failed'])),
        avg_duration=Avg('duration_ms')
    ).order_by('hour')
```

**4. Health Check —Å —Ç–∞–π–º–∞—É—Ç–∞–º–∏:**

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ requests —Å —Ç–∞–π–º–∞—É—Ç–∞–º–∏ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫:

```python
import requests
from requests.exceptions import RequestException

def check_1c_api_availability(self):
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API 1–° —Å —Ç–∞–π–º–∞—É—Ç–æ–º"""
    api_url = os.getenv('HEALTH_CHECK_1C_API_URL')
    timeout = int(os.getenv('HEALTH_CHECK_TIMEOUT', 5))

    try:
        response = requests.get(api_url, timeout=timeout)
        return {
            'available': response.status_code == 200,
            'response_time_ms': response.elapsed.total_seconds() * 1000,
            'status_code': response.status_code
        }
    except RequestException as e:
        return {
            'available': False,
            'error': str(e)
        }
```

**5. Grafana Dashboard Automation:**

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Grafana provisioning –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```json
// backend/grafana/dashboards/customer-sync-dashboard.json
{
  "dashboard": {
    "title": "Customer Sync Monitoring",
    "panels": [
      {
        "title": "Operations Total",
        "targets": [
          {
            "expr": "sync_operations_total",
            "legendFormat": "Total Operations"
          }
        ]
      },
      {
        "title": "Error Rate",
        "targets": [
          {
            "expr": "100 - sync_success_rate",
            "legendFormat": "Error Rate %"
          }
        ]
      }
    ]
  }
}
```

### Dependencies

- **Story 3.2.4** (sync-logging-system): CustomerSyncLog model, PrometheusMetrics, WebhookAlerts
- **Story 3.2.1** (import-customers): CustomerDataProcessor –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏–º–ø–æ—Ä—Ç–∞
- **Story 3.2.3** (bidirectional-sync): CustomerExportService –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞
- Celery –∏ Celery Beat –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á
- Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ rate limiting
- PostgreSQL –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ - –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞)

### Performance Considerations

- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ (TTL 5 –º–∏–Ω—É—Ç) –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –ë–î
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–≥—Ä–µ–≥–∞—Ü–∏–æ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤ —á–µ—Ä–µ–∑ Celery
- Rate limiting –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Å–ø–∞–º–∞ –∞–ª–µ—Ä—Ç–∞–º–∏
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –º–µ—Ç—Ä–∏–∫

### Security Considerations

- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è Prometheus/Grafana endpoints (Basic Auth –∏–ª–∏ Token)
- –ó–∞—â–∏—Ç–∞ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –∞–ª–µ—Ä—Ç–∞—Ö (–º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ email, —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤)
- HTTPS –¥–ª—è webhook –∞–ª–µ—Ä—Ç–æ–≤
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ API –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è custom dashboards

---

## QA Results

### Review Date: 2025-10-30

### Reviewed By: Quinn (Test Architect)

### –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞

**Quality Score: 75/100** (Gate: **CONCERNS**)

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –Ω–∞ **–≤—ã—Å–æ–∫–æ–º —É—Ä–æ–≤–Ω–µ** —Å –æ—Ç–ª–∏—á–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π, –ø–æ–ª–Ω–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π –∏ —Ö–æ—Ä–æ—à–∏–º –ø–æ–∫—Ä—ã—Ç–∏–µ–º —Ç–µ—Å—Ç–∞–º–∏. –û–¥–Ω–∞–∫–æ –¥–ª—è production-ready —Å—Ç–∞—Ç—É—Å–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–≤–µ—Ä—à–∏—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Prometheus/Grafana, Celery tasks).

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚úÖ –ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è (type hints –¥–ª—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π)
- ‚úÖ –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ CustomerSyncMonitor, AlertManager, IntegrationHealthCheck)
- ‚úÖ –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ (24 —Ç–µ—Å—Ç–∞: 13 unit + 11 integration)
- ‚úÖ –ü–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å graceful degradation
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ docstrings

**–û–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è:**
- ‚ö†Ô∏è –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç Prometheus/Grafana –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (AC 6-7)
- ‚ö†Ô∏è –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã Celery periodic tasks (Task 8)
- ‚ö†Ô∏è –ù–µ—Ç load testing —Å –±–æ–ª—å—à–∏–º–∏ –æ–±—ä–µ–º–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö

### –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ —Ç–µ—Å—Ç–∞–º (Requirements Traceability)

**Acceptance Criteria Coverage:**

| AC | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ | –°—Ç–∞—Ç—É—Å |
|----|----------|------------------|--------|
| **AC 1** | –°–æ–∑–¥–∞–Ω –∫–ª–∞—Å—Å CustomerSyncMonitor | ‚úÖ `test_monitoring.py::TestCustomerSyncMonitor` (7 —Ç–µ—Å—Ç–æ–≤) | **PASS** |
| **AC 2** | –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –º–µ—Ç—Ä–∏–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ | ‚úÖ `test_monitoring.py` (–º–µ—Ç—Ä–∏–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–π, –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏) | **PASS** |
| **AC 3** | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –¥–∞—à–±–æ—Ä–¥ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ | ‚úÖ `test_monitoring_api.py` (API endpoints, Django Admin dashboard) | **PASS** |
| **AC 4** | –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∞–ª–µ—Ä—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–±–æ–µ–≤ | ‚úÖ `test_monitoring.py::TestAlertManager` (3 —Ç–µ—Å—Ç–∞) | **PASS** |
| **AC 5** | –°–æ–∑–¥–∞–Ω—ã health checks | ‚úÖ `test_monitoring.py::TestIntegrationHealthCheck` (4 —Ç–µ—Å—Ç–∞) | **PASS** |
| **AC 6** | –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ (p95/p99 –µ—Å—Ç—å, –Ω–æ –Ω–µ—Ç Prometheus —ç–∫—Å–ø–æ—Ä—Ç–∞) | **CONCERNS** |
| **AC 7** | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Prometheus/Grafana | ‚ùå –¢–æ–ª—å–∫–æ placeholders, –Ω–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ | **FAIL** |

**Given-When-Then Mapping:**

**AC 1-2: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ–ø–µ—Ä–∞—Ü–∏–π**
- **Given:** –°—É—â–µ—Å—Ç–≤—É—é—Ç CustomerSyncLog –∑–∞–ø–∏—Å–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞
- **When:** –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `get_operation_metrics(start_date, end_date)`
- **Then:** –í–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (total, success/error rates, duration stats)
- **Test:** `test_get_operation_metrics_success()` ‚úÖ

**AC 3: –î–∞—à–±–æ—Ä–¥**
- **Given:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –ø—Ä–∞–≤–∞–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- **When:** GET –∑–∞–ø—Ä–æ—Å –∫ `/api/monitoring/operations/`
- **Then:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è JSON —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏, HTTP 200
- **Test:** `test_operation_metrics_success()` ‚úÖ

**AC 4: –ê–ª–µ—Ä—Ç—ã**
- **Given:** Error rate –ø—Ä–µ–≤—ã—à–∞–µ—Ç 10% –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å
- **When:** –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `AlertManager.check_all_alerts()`
- **Then:** –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è webhook alert —Å –¥–µ—Ç–∞–ª—è–º–∏ –ø—Ä–æ–±–ª–µ–º—ã
- **Test:** `test_check_high_error_rate_alert()` ‚úÖ

**AC 5: Health Checks**
- **Given:** –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- **When:** –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `get_system_health()`
- **Then:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `is_healthy=True` —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **Test:** `test_system_health_all_ok()` ‚úÖ

### –ö–æ–¥-—Ä–µ–≤—å—é –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –æ—Ü–µ–Ω–∫–∞

#### ‚úÖ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**1. –ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è (Maintainability: PASS)**

–í—Å–µ —Ñ–∞–π–ª—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `from __future__ import annotations` –∏ –ø–æ–ª–Ω—É—é —Ç–∏–ø–∏–∑–∞—Ü–∏—é:

```python
# customer_sync_monitor.py:38-50
def get_operation_metrics(
    self, start_date: datetime, end_date: datetime
) -> dict[str, Any]:
    """–ü–æ–ª—É—á–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–π –∑–∞ –∑–∞–¥–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥."""
```

**2. –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Design: EXCELLENT)**

–ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:
- `CustomerSyncMonitor` - —Å–±–æ—Ä –∏ –∞–≥—Ä–µ–≥–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫
- `AlertManager` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä–æ–≥–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤
- `IntegrationHealthCheck` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- `RealTimeAlertMonitor` - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

**3. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (Performance: PASS)**

–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ (TTL 5 –º–∏–Ω –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π, 1 –º–∏–Ω –¥–ª—è health)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Django ORM –∞–≥—Ä–µ–≥–∞—Ü–∏–π –≤–º–µ—Å—Ç–æ Python —Ü–∏–∫–ª–æ–≤
- PostgreSQL PERCENTILE_CONT –¥–ª—è p95/p99 —Ä–∞—Å—á–µ—Ç–æ–≤
- Alert deduplication —á–µ—Ä–µ–∑ Redis cooldown

**4. –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å (Reliability: PASS)**

- Graceful degradation (1C API –æ–ø—Ü–∏–æ–Ω–∞–ª–µ–Ω)
- –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- Retry –ª–æ–≥–∏–∫–∞ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API
- Fallback –∑–Ω–∞—á–µ–Ω–∏—è (0.0 –¥–ª—è –ø—É—Å—Ç—ã—Ö –¥–∞—Ç–∞—Å–µ—Ç–æ–≤)

**5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (Test Coverage: EXCELLENT)**

- 13 unit —Ç–µ—Å—Ç–æ–≤ (TestCustomerSyncMonitor, TestIntegrationHealthCheck, TestAlertManager)
- 11 integration —Ç–µ—Å—Ç–æ–≤ (API endpoints —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π)
- –ú–æ–∫–∏ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (Redis, 1C API, webhooks)
- –ü–æ–∫—Ä—ã—Ç–∏–µ edge cases (–ø—É—Å—Ç—ã–µ –¥–∞—Ç–∞—Å–µ—Ç—ã, –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è)

#### ‚ö†Ô∏è –û–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è

**INFRA-001 (Medium): –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç Prometheus/Grafana –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:**
- [customer_sync_monitor.py](backend/apps/common/services/customer_sync_monitor.py)
- [views.py:235-248](backend/apps/common/views.py#L235-L248)

**–ü—Ä–æ–±–ª–µ–º–∞:**
Tasks 6-7 –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω—ã. –ù–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:
- `docker/prometheus/prometheus.yml`
- `docker/prometheus/alerts.yml`
- `backend/grafana/dashboards/customer-sync-dashboard.json`

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```yaml
# docker/prometheus/prometheus.yml (–°–û–ó–î–ê–¢–¨)
scrape_configs:
  - job_name: 'django_backend'
    static_configs:
      - targets: ['backend:8001']
    metrics_path: '/api/monitoring/operations/'
```

**CELERY-001 (Medium): –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã periodic tasks**

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:**
- Task 8 –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ–ø—É—â–µ–Ω

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞. –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–æ–∫.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```python
# backend/apps/common/tasks.py (–°–û–ó–î–ê–¢–¨)
from celery import shared_task
from apps.common.services import AlertManager

@shared_task(bind=True, max_retries=3)
def check_system_health_task(self):
    """–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)."""
    alert_manager = AlertManager()
    return alert_manager.check_all_alerts()
```

**PERF-001 (Low): Raw SQL –¥–ª—è percentile calculation**

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:**
- [customer_sync_monitor.py:130-164](backend/apps/common/services/customer_sync_monitor.py#L130-L164)

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ü—Ä—è–º–æ–π SQL –∑–∞–ø—Ä–æ—Å —É—Å–ª–æ–∂–Ω—è–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
Django 4.2+ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Percentile aggregate:
```python
from django.contrib.postgres.aggregates import Percentile

# –ó–∞–º–µ–Ω–∏—Ç—å raw SQL –Ω–∞ ORM
p95 = logs_with_duration.aggregate(
    p95=Percentile('duration_ms', 0.95)
)['p95']
```

**TEST-001 (Medium): –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç load testing**

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ù–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ –±–æ–ª—å—à–∏—Ö –¥–∞—Ç–∞—Å–µ—Ç–∞—Ö (>100K –ª–æ–≥–æ–≤).

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```python
# backend/tests/performance/test_monitoring_load.py (–°–û–ó–î–ê–¢–¨)
@pytest.mark.performance
def test_operation_metrics_performance():
    """–¢–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å 100K –ª–æ–≥–æ–≤."""
    # –°–æ–∑–¥–∞—Ç—å 100K CustomerSyncLog –∑–∞–ø–∏—Å–µ–π
    # –ò–∑–º–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è get_operation_metrics()
    # –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ < 500ms
```

### Compliance Check (–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º)

| –°—Ç–∞–Ω–¥–∞—Ä—Ç | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------|--------|-------------|
| **Coding Standards** | ‚úÖ PASS | –ü–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è, docstrings, PEP 8 |
| **Project Structure** | ‚úÖ PASS | –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ apps/ |
| **Testing Strategy** | ‚ö†Ô∏è CONCERNS | Unit/Integration —Ç–µ—Å—Ç—ã –æ—Ç–ª–∏—á–Ω—ã–µ, –Ω–æ –Ω–µ—Ç performance —Ç–µ—Å—Ç–æ–≤ |
| **All ACs Met** | ‚ö†Ô∏è CONCERNS | AC 1-5 –≤—ã–ø–æ–ª–Ω–µ–Ω—ã, AC 6-7 —á–∞—Å—Ç–∏—á–Ω–æ |

### NFR Validation (–ù–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)

#### Security: ‚úÖ PASS
- API endpoints –∑–∞—â–∏—â–µ–Ω—ã `IsAdminUser` permission
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ hardcoded credentials
- Environment variables –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤
- Input validation –¥–ª—è –¥–∞—Ç

#### Performance: ‚ö†Ô∏è CONCERNS
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ (5 –º–∏–Ω TTL)
- ‚úÖ ORM –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –≤–º–µ—Å—Ç–æ Python —Ü–∏–∫–ª–æ–≤
- ‚úÖ PostgreSQL percentile —Ñ—É–Ω–∫—Ü–∏–∏
- ‚ö†Ô∏è –ù–µ—Ç benchmarking –Ω–∞ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–∞—Ö
- ‚ö†Ô∏è –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç load testing

#### Reliability: ‚úÖ PASS
- ‚úÖ Health checks –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ Graceful degradation (1C API –æ–ø—Ü–∏–æ–Ω–∞–ª–µ–Ω)
- ‚úÖ Alert deduplication (cooldown 15 –º–∏–Ω)
- ‚úÖ Comprehensive error handling

#### Maintainability: ‚úÖ PASS
- ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è (type hints –≤–µ–∑–¥–µ)
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–µ docstrings
- ‚úÖ –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ DRY –ø—Ä–∏–Ω—Ü–∏–ø —Å–æ–±–ª—é–¥–∞–µ—Ç—Å—è
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º

#### ‚úÖ Immediate (Must Fix –ø–µ—Ä–µ–¥ Production)

1. **–°–æ–∑–¥–∞—Ç—å Prometheus –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é**
   - –§–∞–π–ª—ã: `docker/prometheus/prometheus.yml`, `docker/prometheus/alerts.yml`
   - –ó–∞—á–µ–º: Production –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω –±–µ–∑ Prometheus
   - –û—Ü–µ–Ω–∫–∞: 2 —á–∞—Å–∞

2. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Grafana dashboard**
   - –§–∞–π–ª: `backend/grafana/dashboards/customer-sync-dashboard.json`
   - –ó–∞—á–µ–º: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ –¥–ª—è stakeholders
   - –û—Ü–µ–Ω–∫–∞: 3 —á–∞—Å–∞

3. **–î–æ–±–∞–≤–∏—Ç—å Celery Beat tasks**
   - –§–∞–π–ª: `backend/apps/common/tasks.py`
   - –ó–∞—á–µ–º: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–æ–∫ health –∏ –∞–ª–µ—Ä—Ç–æ–≤
   - –û—Ü–µ–Ω–∫–∞: 4 —á–∞—Å–∞

4. **–ü—Ä–æ–≤–µ—Å—Ç–∏ load testing**
   - –§–∞–π–ª: `backend/tests/performance/test_monitoring_load.py`
   - –ó–∞—á–µ–º: –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π
   - –û—Ü–µ–Ω–∫–∞: 4 —á–∞—Å–∞

#### üìã Future (Nice to Have)

1. **–ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ Django ORM Percentile**
   - –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ: `customer_sync_monitor.py:130-164`
   - –ó–∞—á–µ–º: –õ—É—á—à–∞—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å –∏ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å
   - –û—Ü–µ–Ω–∫–∞: 2 —á–∞—Å–∞

2. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å check_celery_workers()**
   - –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ: `customer_sync_monitor.py:555-568`
   - –ó–∞—á–µ–º: –ü–æ–ª–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
   - –û—Ü–µ–Ω–∫–∞: 2 —á–∞—Å–∞

3. **–î–æ–±–∞–≤–∏—Ç—å historical trending**
   - –ó–∞—á–µ–º: –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤ –º–µ—Ç—Ä–∏–∫ (—Å—É—Ç–æ—á–Ω—ã–µ/–Ω–µ–¥–µ–ª—å–Ω—ã–µ –∞–≥—Ä–µ–≥–∞—Ç—ã)
   - –û—Ü–µ–Ω–∫–∞: 5 —á–∞—Å–æ–≤

### Gate Status

**Gate:** CONCERNS ‚Üí [docs/qa/gates/3.5.1-monitoring-system.yml](../../qa/gates/3.5.1-monitoring-system.yml)

**–ü—Ä–∏—á–∏–Ω–∞:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (AC 1-5) —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ —Å –æ—Ç–ª–∏—á–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π –∏ —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π, –Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç production-ready —ç–ª–µ–º–µ–Ω—Ç—ã (Prometheus/Grafana, Celery tasks). –î–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ PASS —Å—Ç–∞—Ç—É—Å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å Tasks 6-8.

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å—Ç–∞—Ç—É—Å

**‚ö†Ô∏è Changes Required** - –°–º. immediate —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –≤—ã—à–µ

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
–ò—Å—Ç–æ—Ä–∏—è –≥–æ—Ç–æ–≤–∞ –¥–ª—è development –∏ testing —Å—Ä–µ–¥—ã, –Ω–æ **–ù–ï –≥–æ—Ç–æ–≤–∞ –¥–ª—è production deployment** –±–µ–∑:
1. Prometheus/Grafana –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
2. Celery periodic tasks
3. Load testing –≤–∞–ª–∏–¥–∞—Ü–∏–∏

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –æ—Ç–ª–∏—á–Ω–æ:**
- –ö–æ–¥ –≤—ã—Å–æ–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ —Å –ø–æ–ª–Ω–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π
- –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å —á–µ—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ (24 —Ç–µ—Å—Ç–∞)
- –í—Å–µ NFR (–∫—Ä–æ–º–µ performance benchmarking) –≤—ã–ø–æ–ª–Ω–µ–Ω—ã

**Estimated time to PASS:** 13-15 —á–∞—Å–æ–≤ —Ä–∞–±–æ—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

---

### Files Modified During Review

**–ù–ï –¢–†–ï–ë–£–ï–¢–°–Ø** - QA review –Ω–µ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–ª –∫–æ–¥, —Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ–ª –∞–Ω–∞–ª–∏–∑.

–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
1. –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∏—Å—Ç–æ—Ä–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —ç—Ç–æ–≥–æ review
2. –°–æ–∑–¥–∞—Ç—å follow-up –∑–∞–¥–∞—á–∏ –¥–ª—è –ø—É–Ω–∫—Ç–æ–≤ –∏–∑ "Immediate recommendations"
3. –û–±–Ω–æ–≤–∏—Ç—å File List –ø—Ä–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
