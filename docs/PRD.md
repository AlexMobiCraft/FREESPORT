# **Product Requirements Document (PRD)**

## **Goals and Background Context**

### **Goals**

* Центральной задачей является запуск B2B-функционала, который предоставит оптовым покупателям, тренерам и представителям спортивных федераций единую точку доступа ко всему ассортименту.   
* Обеспечить базовый цикл онлайн-продаж: Запустить полностью работающий процесс онлайн-заказов для B2B- и B2C-клиентов.  
* Создать фундамент IT-инфраструктуры (API-First): Разработать бэкенд, который позволит в будущем легко расширять количество направлений и добавлять новые торговые марки.  
* В рамках проекта будет создан новый сайт FREESPORT для B2B  
* Заменить существующие сайты: В рамках проекта будет создан новый сайт для торговой марки BOYBO, интегрированный в разрабатываемую платформу. В дальнейшем это позволит поэтапно перевести пользователей с существующих сайтов на новую единую платформу.  
* Интегрироваться с базой данных 1С: Реализовать двусторонний обмен данными для синхронизации остатков товаров, цен, выгрузки заказов и обновления их статусов.

### **Background Context**

Существующие сайты компании разрознены и не имеют полноценного функционала интернет-магазина для B2B- и B2C-клиентов. Это мешает централизовать управление продажами, а также добавлять новый функционал. Проект призван решить эту проблему путем создания единой платформы, которая будет служить основой для всех пяти торговых марок и обеспечит полноценный цикл онлайн-продаж.

## **Requirements**

### **Функциональные**

* FR1: Портал должен иметь каталог товаров с многоуровневой структурой.  
* FR2: Должна быть реализована упрощенная фильтрация товаров (только по цене и размеру).  
* FR3: Должна быть реализована базовая сортировка товаров (только по цене).  
* FR4: Должен быть реализован базовый поиск по названию товара.  
* FR5: Портал должен иметь возможность отображать цены в зависимости от роли пользователя и минимальное количество для оптового заказа в карточке товара. Система поддерживает следующие типы цен по ролям пользователей: retail (розничные покупатели), opt1/opt2/opt3 (три уровня оптовых покупателей level1/level2/level3), trainer (тренеры), federation (представители федерации). Дополнительно для всех неРозничных пользователей (оптовики, тренеры, федералы) в карточке товара должны отображаться рекомендуемая розничная цена (RRP - Recommended Retail Price) и максимальная розничная цена (MSRP - Maximum Suggested Retail Price) для информационных целей.  
* FR6: Должна быть реализована корзина для просмотра, изменения количества и удаления товаров. 
  * FR6.1: При добавлении товара, который уже есть в корзине, количество должно увеличиваться в существующей позиции (без создания дубликата).
  * FR6.2: Аналогичная логика применяется при оформлении заказов - один товар может присутствовать в заказе только в одной позиции. 
* FR7: Должен быть реализован процесс оформления заказа (checkout) на одной или двух страницах с возможностью "быстрого заказа" для розничных покупателей.  
* FR8: Портал должен иметь базовую административную панель для управления заказами и пользователями.  
* FR9: Должна быть реализована двусторонняя интеграция с 1С для синхронизации остатков товаров, цен, выгрузки заказов и обновления их статусов.  
* FR10: Должны быть реализованы следующие роли пользователей: "Оптовый покупатель", "Тренер", "Представитель федерации" и "Розничный покупатель".  
* FR11: Должен быть реализован личный кабинет с разделами "Мой профиль", "Мои заказы", "Адрес доставки" и "Избранное" для всех пользователей.  
* FR12: Оптовые покупатели должны иметь доступ к дополнительным разделам личного кабинета: "Управление компанией" и "История счетов".  
* FR13: На главной странице рекламные баннеры должны показываться для каждой категории клиентов свои.
* FR14: Мобильная адаптивность должна быть реализована для всех ключевых страниц (каталог, карточка товара, корзина, оформление заказа).
* FR15: Единая дизайн-система для B2B и B2C интерфейсов для ускорения разработки.

/### **Нефункциональные**

* NFR1: Скорость загрузки страниц не более 3 секунд. Показатель Google PageSpeed Insights \> 70\.  
* NFR2: Портал должен иметь защиту от XSS, SQL-инъекций, CSRF.  
* NFR3: Должно использоваться защищенное соединение HTTPS.  
* NFR4: Архитектура должна быть спроектирована с учетом будущего роста и позволять легко масштабироваться.  
* NFR5: Портал должен соответствовать ФЗ-152 "О персональных данных".  
* NFR6: API должен быть документирован с использованием стандарта OpenAPI 3.1 (Swagger) и поддерживать версионирование.  
* NFR7: Доступ к приватным методам API должен осуществляться через токены (JWT).

## **User Interface Design Goals**

**✅ РЕАЛИЗОВАНО:** Детальная UI/UX спецификация создана в [front-end-spec.md](front-end-spec.md)

Этот раздел определяет высокоуровневое видение UI/UX для руководства дизайном и информирования о создании пользовательских историй.

#### **Overall UX Vision** (Реализовано в спецификации)

* **Стилистика:** B2B-ориентированный дизайн с акцентом на функциональность превыше эстетики
* **UI/UX:** Ролевая персонализация интерфейса для оптовиков, тренеров и представителей федераций
* **Брендбук:** Единая дизайн-система с цветовой палитрой, типографикой и 25+ компонентами
* **B2B Специфика:** Оптовые цены, минимальные заказы, процесс верификации клиентов

#### **Core Screens and Views** (Детализированы в спецификации)

**Основные экраны с каркасами:**
* Главная страница B2B с ролевыми баннерами
* Каталог товаров с фильтрами и сортировкой (6 типов сортировки)
* Карточка товара с ролевым ценообразованием (RRP/MSRP для B2B)
* Корзина и checkout flow
* Личный кабинет с role-specific разделами
* **Административная панель:**
  - Дашборд с KPI метриками
  - Модерация B2B заявок 
  - Мониторинг интеграции с 1С (Circuit Breaker)
  - Управление пользователями и заказами

**Специализированные компоненты:**
* Процесс верификации B2B клиентов (с Mermaid диаграммой)
* TypeScript интерфейсы для всех компонентов
* Адаптивные breakpoints и состояния компонентов

#### **Technical Implementation** (Согласовано с архитектурой)

* **Framework:** Next.js 14+ с TypeScript 5.0+
* **Forms:** React Hook Form для производительности
* **Styling:** CSS-in-JS с поддержкой B2B/B2C тем
* **Performance:** PageSpeed > 85, LCP < 2.5s
* **Browser Support:** Chrome 90+, Firefox 88+, Safari 14+, Edge 90+

Подробная спецификация: **[front-end-spec.md](front-end-spec.md)**

## **Technical Assumptions**

Этот раздел описывает технические решения, которые будут приняты за основу при проектировании архитектуры.

#### **Repository Structure: { Monorepo, Polyrepo, etc...}**

* **Monorepo:** Предполагается использование монорепозитория для более удобной работы с общими компонентами и кодом, так как будет несколько направлений и общая логика.

#### **Service Architecture**

* **API-First (Headless):** Проект будет реализован по принципу API-First, где бэкенд и фронтенд являются полностью независимыми.  
* **Backend:** Python (фреймворк Django \+ Django REST Framework) будет служить ядром системы, предоставляя данные через REST API.  
* **Frontend:** JavaScript (фреймворк React) будет использоваться для создания SPA-приложения.

#### **Testing requirements**

* **Базовые тесты:** На этапе MVP будут реализованы базовые unit-тесты для ключевого функционала.  
* **Ручное тестирование:** Также будет проводиться ручное тестирование функционала.

#### Additional Technical Assumptions and Requests

* **Интеграция с 1С:** Будет реализована двусторонняя интеграция для синхронизации остатков товаров, цен и выгрузки/обновления заказов.  
* **База данных:** В качестве основной базы данных будет использоваться PostgreSQL.
* **Отказоустойчивость импорта (Сессии импорта):** Для обеспечения целостности данных при первоначальной загрузке из 1С, процесс будет обернут в "сессии". Это позволит безопасно откатывать изменения в случае сбоя и избежать появления неполных или некорректных данных в системе.
* **Гибкость архитектуры интеграции (Абстракция сервисного слоя):** Чтобы упростить будущий переход от файлового обмена к интеграции по API, разработка будет вестись с разделением логики на слой получения данных (парсер) и слой их обработки (процессор). Это позволит в будущем менять способ получения данных, не затрагивая основную бизнес-логику.

## **Временные рамки и ресурсы проекта**

**Общая продолжительность:** 28 недель  
**Бюджет:** 9600€  
**Команда:** 1 фулстек разработчик + фриланс дизайнер

### **Критерии успеха ФАЗЫ 1**

#### **Бизнес-метрики:**
- Успешная регистрация минимум 10 B2B клиентов
- Обработка минимум 50 заказов через платформу  
- Работающая интеграция с 1С без критических ошибок

#### **Технические метрики:**
- PageSpeed > 70 на ключевых страницах
- Время отклика API < 2 секунд
- Корректная работа на мобильных устройствах

## **Epics ФАЗЫ 1 (28 недель)**

* **Эпик 1: Фундамент проекта и база данных (3 недели).**  
  * **Цель:** Создать фундаментальную IT-инфраструктуру проекта и спроектировать структуру базы данных.  
  * **Детализация:**  
    * Настройка системы контроля версий (Git).  
    * Настройка среды разработки.  
    * Создание структуры проекта (Backend: Django \+ Django REST Framework).  
    * Создание структуры проекта (Frontend: React SPA).  
    * Настройка базовой CI/CD-инфраструктуры.  
    * Создание Docker-контейнеров для разработки.  
    * Настройка тестовой среды.  
    * Проектирование и создание базы данных.  
    * Разработка задания для дизайнера.  
* **Эпик 2: Разработка упрощенного API (2 недель).**  
  * **Цель:** Реализовать упрощенный API для начала интеграции с фронтендом.  
  * **Детализация:**  
    * Имплементация API для регистрации, редактирования и удаления пользователя.  
    * Имплементация API для работы с личным кабинетом.  
    * Имплементация API для каталога товаров.  
    * Имплементация API для карточки товара.  
    * Имплементация API оформления заказа.  
    * Имплементация API для корзины.  
    * Настройка Swagger для документирования API.  
    * Реализация базового поиска товаров.  
    * Базовая система фильтрации товаров.  
    * Создание API для информационных страниц.  
* **Эпик 3: Загрузка тестовых данных в БД (2 недели).**  
  * **Цель:** Подготовить бэкенд для начала интеграции с фронтендом.  
  * **Детализация:**  
    * Импорт данных о товаре и остатках из 1С.  
    * Разработка структуры для импорта данных о товаре из 1С.  
    * Создание скриптов для загрузки данных в базу портала.  
    * Тестовая загрузка каталога товаров с ценами.  
    * Тестовая загрузка остатков товара.  
* **Эпик 4: Разработка B2B интерфейса с мобильной адаптивностью (6 недель).**  
  * **Цель:** Разработать основной B2B-функционал с поддержкой мобильных устройств.  
  * **Детализация:**  
    * Верстка страницы регистрации и аутентификации.  
    * Верстка главной страницы согласно дизайн-макету.  
    * Верстка каталога товаров и фильтров.  
    * Верстка карточки товара.  
    * Верстка корзины.  
    * Верстка процесса оформления заказа.  
    * Верстка информационных страниц.  
    * Интеграция с API бэкенда.  
    * Адаптивная верстка для мобильных устройств.  
* **Эпик 5: Базовая интеграция с 1С (4 недели).**  
  * **Цель:** Настроить упрощенную интеграцию с 1С для синхронизации данных и заказов.  
  * **Детализация:**  
    * Интеграция с 1С для автоматической загрузки данных о товаре и их остатках.  
    * Интеграция с 1С для заказов и их статусов.  
    * Разработка структуры для экспорта заказов в 1С.  
    * Формирование файла заказа для экспорта заказов в 1С.  
    * Настройка процедуры ручной установки статуса заказа.  
    * Базовое тестирование интеграции.  
* **Эпик 7: Разработка B2C интерфейса с мобильной адаптивностью (6 недель).**  
  * **Цель:** Разработать B2C-функционал с поддержкой мобильных устройств.  
  * **Детализация:**  
    * Адаптация главной страницы для B2C согласно единой дизайн-системе.  
    * Адаптация каталога товаров для розничных покупателей.  
    * Адаптация карточки товара для B2C.  
    * Адаптация корзины для B2C.  
    * Верстка упрощенного процесса оформления заказа.  
    * Интеграция с API бэкенда.  
    * Полная мобильная адаптивность всех B2C страниц.  
    * Базовая интеграция с ЮКасса.  
* **Эпик 8: Критическое тестирование и запуск (2 недели).**  
  * **Цель:** Обеспечить минимально необходимое качество для запуска.  
  * **Детализация:**  
    * Функциональное тестирование критического функционала.  
    * Базовая проверка безопасности.  
    * Тестирование мобильной адаптивности.  
    * Исправление критических ошибок.  
    * Базовая оптимизация производительности.  
    * Настройка продакшн-сервера.  
    * Запуск платформы.  
    * Мониторинг первых пользователей.

## **Отложенные на ФАЗУ 2**

* **Эпик 6: Полная админ-панель и CMS.**  
  * **Цель:** Создать полноценную административную панель для управления контентом.  
  * **Включает:**  
    * Расширенное управление каталогом товаров.  
    * Управление контентом и баннерами.  
    * Детальная аналитика и отчеты.  
    * Полный дашборд с расширенной статистикой.  
* **Расширенные функции:**  
  * Продвинутые фильтры и поиск (по артикулу, дополнительным характеристикам).  
  * SEO-оптимизация страниц.  
  * Расширенная аналитика и метрики.  
  * Дополнительные интеграции.  
  * Оптимизация производительности до PageSpeed >85.  
