# **–≠–ø–∏–∫ 15: Checkout (–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞)** - Brownfield Enhancement

**–í–µ—Ä—Å–∏—è:** 2.0.0
**–°—Ç–∞—Ç—É—Å:** üîÑ –ê–∫—Ç–∏–≤–Ω—ã–π
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P0 (–∫—Ä–∏—Ç–∏—á–Ω—ã–π)
**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 2 –Ω–µ–¥–µ–ª–∏ (—É–ø—Ä–æ—â—ë–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
**–°–æ–∑–¥–∞–Ω:** 2025-12-14
**–û–±–Ω–æ–≤–ª—ë–Ω:** 2025-12-14
**–ê–≤—Ç–æ—Ä:** John (PM Agent)

---

## Epic Goal

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —É–ø—Ä–æ—â—ë–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ (checkout) –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã FREESPORT —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π B2B —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤. –ù–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ: –æ—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–∫–∞–∑–∞ –Ω–∞ email –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –¥–ª—è —Ä—É—á–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —á–µ—Ä–µ–∑ Django Admin, –≤—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –∏–∑ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ (–±–µ–∑ —Ä–∞—Å—á—ë—Ç–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏), –±–µ–∑ –æ–Ω–ª–∞–π–Ω-–æ–ø–ª–∞—Ç—ã.

---

## Epic Description

### **Existing System Context:**

**–¢–µ–∫—É—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- ‚úÖ Backend API –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤ (`/orders/`, `/orders/{id}/`)
- ‚úÖ –ö–æ—Ä–∑–∏–Ω–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ –∏ —Ä–∞—Å—á—ë—Ç–æ–º –∏—Ç–æ–≥–æ–≤–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ (–≠–ø–∏–∫ 14)
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å —Ä–æ–ª–µ–≤–æ–π –º–æ–¥–µ–ª—å—é B2B/B2C (–≠–ø–∏–∫ 13)
- ‚úÖ UI Kit –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Input, Select, Button, Modal, InfoPanel) –∏–∑ –≠–ø–∏–∫–∞ 10

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫:**
- Frontend: Next.js 15.4.6 + TypeScript 5.0+ + React 19.1.0
- State Management: Zustand 4.5.7
- –§–æ—Ä–º–∞—Ç—ã: React Hook Form 7.62.0 –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–æ—Ä–º–∞–º–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è: Zod –¥–ª—è —Å—Ö–µ–º –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: Vitest 2.1.5 + React Testing Library 16.3.0
- E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: Playwright –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–ª–æ—É
- API Mocking: MSW 2.12.2

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–æ—á–∫–∏:**
- `/orders/create` - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- `/delivery/methods` - —Å–ø–∏—Å–æ–∫ —Å–ø–æ—Å–æ–±–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Django Admin)
- `/cart/` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∫–æ—Ä–∑–∏–Ω—ã
- `/profile/addresses` - –∞–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**‚ö†Ô∏è –ù–ï –†–ï–ê–õ–ò–ó–£–ï–¢–°–Ø –Ω–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ:**
- ‚ùå –†–∞—Å—á—ë—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ (CDEK, Boxberry API)
- ‚ùå –û–Ω–ª–∞–π–Ω –æ–ø–ª–∞—Ç–∞ (YuKassa)
- ‚ùå –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞–∫–∞–∑–æ–≤

---

### **Enhancement Details:**

**–ß—Ç–æ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è (–£–ü–†–û–©–Å–ù–ù–ê–Ø –í–ï–†–°–ò–Ø):**

1. **Single Page Checkout –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** (`/checkout` —Å—Ç—Ä–∞–Ω–∏—Ü–∞):
   - –ï–¥–∏–Ω–∞—è —Ñ–æ—Ä–º–∞ –±–µ–∑ —Ä–∞–∑–±–∏–µ–Ω–∏—è –Ω–∞ —à–∞–≥–∏
   - –°–µ–∫—Ü–∏–∏: –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏, —Å–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É
   - –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Orders API:**
   - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ —á–µ—Ä–µ–∑ `/orders/create`
   - –û—Ç–ø—Ä–∞–≤–∫–∞ email –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É —Å –¥–µ—Ç–∞–ª—è–º–∏ –∑–∞–∫–∞–∑–∞
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å cartStore (Zustand) - –æ—á–∏—Å—Ç–∫–∞ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

3. **–í—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ –¥–æ—Å—Ç–∞–≤–∫–∏:**
   - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–ø–æ—Å–æ–±–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏ —á–µ—Ä–µ–∑ `/delivery/methods`
   - Radio group –¥–ª—è –≤—ã–±–æ—Ä–∞: –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∞—è –∫–æ–º–ø–∞–Ω–∏—è, –ö—É—Ä—å–µ—Ä, –°–∞–º–æ–≤—ã–≤–æ–∑
   - **–ë–ï–ó —Ä–∞—Å—á—ë—Ç–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏** - —Å—Ç–æ–∏–º–æ—Å—Ç—å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ "–£—Ç–æ—á–Ω—è–µ—Ç—Å—è"
   - –°–ø–æ—Å–æ–±—ã –¥–æ—Å—Ç–∞–≤–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º —á–µ—Ä–µ–∑ Django Admin

4. **–°—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–∞ (—É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é):**
   - –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "–ù–æ–≤—ã–π"
   - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —á–µ—Ä–µ–∑ Django Admin –º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å—ã:
     - –ù–æ–≤—ã–π ‚Üí –û–ø–ª–∞—á–µ–Ω ‚Üí –û—Ç–ø—Ä–∞–≤–ª–µ–Ω ‚Üí –î–æ—Å—Ç–∞–≤–ª–µ–Ω
   - Email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞
   - **–ë–ï–ó –æ–Ω–ª–∞–π–Ω –æ–ø–ª–∞—Ç—ã** –Ω–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ

5. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:**
   - Success-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/checkout/success/[orderId]`
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ –∑–∞–∫–∞–∑–∞, –¥–µ—Ç–∞–ª–µ–π, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π"
   - Email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É –æ–± —É—Å–ø–µ—à–Ω–æ–º —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞

**–ö–∞–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç cartStore –∏–∑ –≠–ø–∏–∫–∞ 14 –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç authStore –∏–∑ –≠–ø–∏–∫–∞ 13 –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç UI Kit –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–∑ –≠–ø–∏–∫–∞ 10 (Input, Select, Button, Modal)
- –°–ª–µ–¥—É–µ—Ç –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–µ –∏–∑ `frontend/docs/design-system.json`

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞ (—É–ø—Ä–æ—â—ë–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è):**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑ –∑–∞ 2-3 –º–∏–Ω—É—Ç—ã
- –§–æ—Ä–º–∞ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (React Hook Form + Zod)
- –ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞—ë—Ç—Å—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è email –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É
- –°–ø–æ—Å–æ–±—ã –¥–æ—Å—Ç–∞–≤–∫–∏ –≤—ã–±–∏—Ä–∞—é—Ç—Å—è –∏–∑ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Å—Ç–∞—Ç—É—Å–∞–º–∏ —á–µ—Ä–µ–∑ Django Admin
- E2E –ø–æ–∫—Ä—ã—Ç–∏–µ –±–∞–∑–æ–≤–æ–≥–æ —Ñ–ª–æ—É (–∫–æ—Ä–∑–∏–Ω–∞ ‚Üí checkout ‚Üí —É—Å–ø–µ—Ö)
- Unit-—Ç–µ—Å—Ç—ã –ø–æ–∫—Ä—ã—Ç–∏–µ 70%+
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω (mobile/tablet/desktop)

---

## Stories

### **Story 15.1: Checkout —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∏ —É–ø—Ä–æ—â—ë–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞**

**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É `/checkout` —Å —É–ø—Ä–æ—â—ë–Ω–Ω–æ–π —Ñ–æ—Ä–º–æ–π –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ (–∫–æ–Ω—Ç–∞–∫—Ç—ã, –∞–¥—Ä–µ—Å, –¥–æ—Å—Ç–∞–≤–∫–∞, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π). –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å React Hook Form –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Ñ–æ—Ä–º—ã –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ Zod —Å—Ö–µ–º—ã.

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏:**

- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/checkout` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å –µ–¥–∏–Ω–æ–π —Ñ–æ—Ä–º–æ–π
- ‚úÖ –°–µ–∫—Ü–∏–∏: –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏, –°–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏, –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É
- ‚úÖ **–ë–ï–ó —Å–µ–∫—Ü–∏–∏ "–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã"** (–æ–ø–ª–∞—Ç–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ React Hook Form + Zod
- ‚úÖ –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–µ—Å–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω)
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤—ë—Ä—Å—Ç–∫–∞ (mobile-first)
- ‚úÖ Unit-—Ç–µ—Å—Ç—ã –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Ñ–æ—Ä–º—ã

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**

- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: `src/app/checkout/page.tsx`
- –§–æ—Ä–º–∞: `src/components/checkout/CheckoutForm.tsx`
- –í–∞–ª–∏–¥–∞—Ü–∏—è: `src/schemas/checkoutSchema.ts` (Zod)
- –°—Ç–∏–ª–∏: Tailwind CSS + design-system tokens

---

### **Story 15.2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Orders API –∏ email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**

**–û–ø–∏—Å–∞–Ω–∏–µ:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞ —á–µ—Ä–µ–∑ `/orders/create` API —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π email –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å cartStore, –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫.

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏:**

- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ —á–µ—Ä–µ–∑ `ordersService.create()`
- ‚úÖ –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "–ù–æ–≤—ã–π"
- ‚úÖ Email –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (backend –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç)
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å cartStore (–æ—á–∏—Å—Ç–∫–∞ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (–≤–∞–ª–∏–¥–∞—Ü–∏—è, —Å–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏)
- ‚úÖ Unit-—Ç–µ—Å—Ç—ã —Å MSW –º–æ–∫–∞–º–∏

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**

- –°–µ—Ä–≤–∏—Å: `src/services/ordersService.ts`
- Store: `src/stores/orderStore.ts` (Zustand)
- API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è: `POST /orders/create`
- Backend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç email –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞

---

### **Story 15.3: –í—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ (–ë–ï–ó —Ä–∞—Å—á—ë—Ç–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏)**

**–û–ø–∏—Å–∞–Ω–∏–µ:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –∏–∑ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–≥–æ —á–µ—Ä–µ–∑ Django Admin. **–ë–ï–ó –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å—á—ë—Ç–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫–∏.**

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏:**

- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–ø–æ—Å–æ–±–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏ —á–µ—Ä–µ–∑ `GET /delivery/methods`
- ‚úÖ Radio group –¥–ª—è –≤—ã–±–æ—Ä–∞: –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∞—è –∫–æ–º–ø–∞–Ω–∏—è, –ö—É—Ä—å–µ—Ä, –°–∞–º–æ–≤—ã–≤–æ–∑
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ —Å–ø–æ—Å–æ–±–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
- ‚úÖ **–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ "–£—Ç–æ—á–Ω—è–µ—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º"**
- ‚úÖ **–ë–ï–ó –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å CDEK/Boxberry API**
- ‚úÖ –°–ø–æ—Å–æ–±—ã –¥–æ—Å—Ç–∞–≤–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º —á–µ—Ä–µ–∑ Django Admin
- ‚úÖ Unit-—Ç–µ—Å—Ç—ã –¥–ª—è deliveryService

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**

- –°–µ—Ä–≤–∏—Å: `src/services/deliveryService.ts`
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: `src/components/checkout/DeliveryOptions.tsx`
- API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è: `GET /delivery/methods`
- Backend: Django Admin –º–æ–¥–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ø–æ—Å–æ–±–∞–º–∏ –¥–æ—Å—Ç–∞–≤–∫–∏

---

### **Story 15.4: –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞**

**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å success-—Å—Ç—Ä–∞–Ω–∏—Ü—É `/checkout/success/[orderId]` —Å –¥–µ—Ç–∞–ª—è–º–∏ –∑–∞–∫–∞–∑–∞, –Ω–æ–º–µ—Ä–æ–º –∑–∞–∫–∞–∑–∞ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞.

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏:**

- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/checkout/success/[orderId]` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- ‚úÖ –î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞: –Ω–æ–º–µ—Ä, —Ç–æ–≤–∞—Ä—ã, –∞–¥—Ä–µ—Å, —Å–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π –±–ª–æ–∫: "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã –∏ –¥–æ—Å—Ç–∞–≤–∫–∏"
- ‚úÖ –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞: "–ù–æ–≤—ã–π" (–±—É–¥–µ—Ç –∏–∑–º–µ–Ω—ë–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º)
- ‚úÖ –ö–Ω–æ–ø–∫–∏: "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∫—É–ø–∫–∏", "–ü–µ—Ä–µ–π—Ç–∏ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç"
- ‚úÖ Email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (backend)
- ‚úÖ Unit-—Ç–µ—Å—Ç—ã –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- ‚úÖ Unit-—Ç–µ—Å—Ç—ã –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: `src/app/checkout/success/[orderId]/page.tsx`
- SSR –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π –∑–∞–∫–∞–∑–∞

---

### **Story 15.5: E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–ø—Ä–æ—â—ë–Ω–Ω–æ–≥–æ —Ñ–ª–æ—É**

**–û–ø–∏—Å–∞–Ω–∏–µ:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—ã–µ E2E —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ñ–ª–æ—É: –∫–æ—Ä–∑–∏–Ω–∞ ‚Üí checkout ‚Üí —É—Å–ø–µ—Ö. **–£–ø—Ä–æ—â—ë–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –±–µ–∑ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–ø–ª–∞—Ç—ã.**

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏:**

- ‚úÖ E2E —Ç–µ—Å—Ç: –ø–µ—Ä–µ—Ö–æ–¥ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã –≤ checkout
- ‚úÖ E2E —Ç–µ—Å—Ç: –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ E2E —Ç–µ—Å—Ç: –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
- ‚úÖ E2E —Ç–µ—Å—Ç: –≤—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
- ‚úÖ E2E —Ç–µ—Å—Ç: –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- ‚úÖ E2E —Ç–µ—Å—Ç: –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —É—Å–ø–µ—Ö–∞ —Å –Ω–æ–º–µ—Ä–æ–º –∑–∞–∫–∞–∑–∞
- ‚úÖ Playwright –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- ‚úÖ CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**

- –¢–µ—Å—Ç—ã: `tests/e2e/checkout.spec.ts` (Playwright)
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: `playwright.config.ts`
- –§–æ–∫—É—Å –Ω–∞ –±–∞–∑–æ–≤–æ–º —Ñ–ª–æ—É –±–µ–∑ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –ø–ª–∞—Ç—ë–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º

---

## Compatibility Requirements

### **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:**
- ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ API endpoints –æ—Å—Ç–∞—é—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–º–∏
- ‚úÖ cartStore –∏–∑ –≠–ø–∏–∫–∞ 14 –Ω–µ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ)
- ‚úÖ authStore –∏–∑ –≠–ø–∏–∫–∞ 13 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–ª–µ–¥—É—é—Ç design-system.json
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: PageSpeed > 70, LCP < 2.5s

### **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `Button`, `Input`, `Select`, `Modal`, `InfoPanel` –∏–∑ UI Kit
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `apiClient` –∏–∑ `src/services/api-client.ts`
- ‚úÖ –°–ª–µ–¥—É–µ—Ç TypeScript best practices (–±–µ–∑ `as any`)
- ‚úÖ –°–ª–µ–¥—É–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ Next.js App Router

---

## Risk Mitigation

### **–û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∏—Å–∫–∏:**

**1. –†–∏—Å–∫:** ~~–°–ª–æ–∂–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ –¥–æ—Å—Ç–∞–≤–∫–∏~~
**–°—Ç–∞—Ç—É—Å:** ‚ùå **–ù–ï –ê–ö–¢–£–ê–õ–¨–ù–û** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CDEK/Boxberry –Ω–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –Ω–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ

**2. –†–∏—Å–∫:** –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ñ–ª–æ—É
**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è
**–í–ª–∏—è–Ω–∏–µ:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Playwright
- Unit-—Ç–µ—Å—Ç—ã –ø–æ–∫—Ä—ã—Ç–∏–µ 80%+
- –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö B2B/B2C —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

**3. –†–∏—Å–∫:** –ü—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ñ–æ—Ä–º—ã (React Hook Form)
**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è
**–í–ª–∏—è–Ω–∏–µ:** –°—Ä–µ–¥–Ω–µ–µ
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å React Hook Form (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)
- ~~Debounce –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Ä–∞—Å—á—ë—Ç–æ–≤~~ (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è - –±–µ–∑ —Ä–∞—Å—á—ë—Ç–æ–≤)
- Lighthouse –∞—É–¥–∏—Ç –ø–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º

**4. –†–∏—Å–∫:** UX –ø—Ä–æ–±–ª–µ–º—ã –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è
**–í–ª–∏—è–Ω–∏–µ:** –í—ã—Å–æ–∫–æ–µ
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- Mobile-first –ø–æ–¥—Ö–æ–¥ –∫ –≤—ë—Ä—Å—Ç–∫–µ
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö (iOS/Android)
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–∑ design-system.json

### **Rollback Plan:**

1. **–ë—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–∞—Ç:**
   - –£–¥–∞–ª–∏—Ç—å `/checkout` —Ä–æ—É—Ç –∏–∑ production
   - –í–µ—Ä–Ω—É—Ç—å —Å—Å—ã–ª–∫—É "–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑" –Ω–∞ —Å—Ç–∞—Ä—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É (–µ—Å–ª–∏ –±—ã–ª–∞)
   - –û—Ç–∫–∞—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ cartStore (–µ—Å–ª–∏ –±—ã–ª–∏)

2. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:**
   - –ó–∞–∫–∞–∑—ã —Å–æ–∑–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π API (–Ω–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –ë–î)
   - Draft orders –æ—á–∏—â–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ 24 —á–∞—Å–æ–≤
   - –õ–æ–≥–∏ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å 4xx/5xx –æ—à–∏–±–∫–∏ –Ω–∞ `/orders/create`
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∫–æ–Ω–≤–µ—Ä—Å–∏—é checkout ‚Üí success
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å –¥–æ—Å—Ç–∞–≤–∫—É email –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É

---

## Definition of Done

### **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (—É–ø—Ä–æ—â—ë–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è):**

- ‚úÖ –í—Å–µ 5 stories –∑–∞–≤–µ—Ä—à–µ–Ω—ã —Å acceptance criteria
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Orders API –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞
- ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ñ–ª–æ—É —Ä–∞–±–æ—Ç–∞–µ—Ç: –∫–æ—Ä–∑–∏–Ω–∞ ‚Üí checkout ‚Üí —É—Å–ø–µ—Ö
- ‚úÖ Email –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞
- ‚úÖ –í—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –∏–∑ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞
- ‚úÖ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–∫–∞–∑–∞–º–∏ —á–µ—Ä–µ–∑ Django Admin

### **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞:**
- ‚úÖ TypeScript –±–µ–∑ `as any`
- ‚úÖ ESLint/Prettier –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã
- ‚úÖ Code review –∑–∞–≤–µ—Ä—à—ë–Ω
- ‚úÖ –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö Lighthouse –ø—Ä–æ–±–ª–µ–º

### **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- ‚úÖ Unit-—Ç–µ—Å—Ç—ã: 80%+ –ø–æ–∫—Ä—ã—Ç–∏–µ
- ‚úÖ Integration-—Ç–µ—Å—Ç—ã —Å MSW –¥–ª—è –≤—Å–µ—Ö API –≤—ã–∑–æ–≤–æ–≤
- ‚úÖ E2E —Ç–µ—Å—Ç—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ñ–ª–æ—É (Playwright)
- ‚úÖ CI/CD –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–µ–ª—ë–Ω—ã–µ
- ‚úÖ –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ mobile/tablet/desktop

### **UX/UI:**
- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ design-system.json
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤—ë—Ä—Å—Ç–∫–∞ (mobile/tablet/desktop)
- ‚úÖ Accessibility (WCAG 2.1 AA)
- ‚úÖ PageSpeed > 70, LCP < 2.5s

### **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- ‚úÖ README –æ–±–Ω–æ–≤–ª—ë–Ω —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –ø–æ checkout
- ‚úÖ API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–ø–∏—Å–∞–Ω—ã (JSDoc/TSDoc)
- ‚úÖ E2E —Ç–µ—Å—Ç—ã –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã

### **–†–µ–≥—Ä–µ—Å—Å–∏—è:**
- ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∫–æ—Ä–∑–∏–Ω—ã –Ω–µ —Å–ª–æ–º–∞–Ω
- ‚úÖ Smoke-—Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã
- ‚úÖ –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–æ–≤
- ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## Dependencies and Integration Points

### **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥—Ä—É–≥–∏—Ö —ç–ø–∏–∫–æ–≤:**
- **–≠–ø–∏–∫ 10 (–§—É–Ω–¥–∞–º–µ–Ω—Ç):** UI Kit –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, apiClient, Zustand setup
- **–≠–ø–∏–∫ 13 (–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è):** authStore, JWT —Ç–æ–∫–µ–Ω—ã, –∑–∞—â–∏—â—ë–Ω–Ω—ã–µ —Ä–æ—É—Ç—ã
- **–≠–ø–∏–∫ 14 (–ö–æ—Ä–∑–∏–Ω–∞):** cartStore, —Ç–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ, –ø—Ä–æ–º–æ–∫–æ–¥—ã

### **API Endpoints (—É–ø—Ä–æ—â—ë–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è):**

- `POST /orders/create` - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ (–æ—Ç–ø—Ä–∞–≤–∫–∞ email –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É)
- `GET /delivery/methods` - —Å–ø–∏—Å–æ–∫ —Å–ø–æ—Å–æ–±–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Django Admin)
- `GET /cart/` - —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ—Ä–∑–∏–Ω—ã
- `GET /profile/addresses` - –∞–¥—Ä–µ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### **‚ö†Ô∏è –ù–ï –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ:**

- ‚ùå `POST /delivery/calculate` - —Ä–∞—Å—á—ë—Ç –¥–æ—Å—Ç–∞–≤–∫–∏ (CDEK/Boxberry)
- ‚ùå `GET /payment/methods` - —Å–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã
- ‚ùå `POST /orders/confirm` - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è)

### **External Services:**

- ‚ùå ~~CDEK API~~ - –Ω–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è
- ‚ùå ~~Boxberry API~~ - –Ω–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è
- ‚ùå ~~YuKassa Payment Gateway~~ - –Ω–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è
- ‚úÖ Email –æ—Ç–ø—Ä–∞–≤–∫–∞ (Django email backend)

---

## Technical Architecture

### **Component Structure:**
```
src/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ checkout/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx                    # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ checkout
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ success/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [orderId]/
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ page.tsx            # Success —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ __tests__/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ page.test.tsx           # Unit-—Ç–µ—Å—Ç—ã —Å—Ç—Ä–∞–Ω–∏—Ü
‚îÇ
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ checkout/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CheckoutForm.tsx            # –ì–ª–∞–≤–Ω–∞—è —Ñ–æ—Ä–º–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ContactSection.tsx          # –°–µ–∫—Ü–∏—è –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AddressSection.tsx          # –°–µ–∫—Ü–∏—è –∞–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DeliveryOptions.tsx         # –í—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ (–ë–ï–ó —Ä–∞—Å—á—ë—Ç–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ~~PaymentMethods.tsx~~      # ‚ùå –ù–ï –†–ï–ê–õ–ò–ó–£–ï–¢–°–Ø (–æ–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∞)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ OrderSummary.tsx            # –ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ __tests__/                  # Unit-—Ç–µ—Å—Ç—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ ordersService.ts                # API –¥–ª—è –∑–∞–∫–∞–∑–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ deliveryService.ts              # API –¥–ª—è —Å–ø–æ—Å–æ–±–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏ (–ë–ï–ó —Ä–∞—Å—á—ë—Ç–∞)
‚îÇ   ‚îú‚îÄ‚îÄ ~~paymentService.ts~~           # ‚ùå –ù–ï –†–ï–ê–õ–ò–ó–£–ï–¢–°–Ø
‚îÇ   ‚îî‚îÄ‚îÄ __tests__/                      # Unit-—Ç–µ—Å—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ stores/
‚îÇ   ‚îî‚îÄ‚îÄ orderStore.ts                   # Zustand store –¥–ª—è –∑–∞–∫–∞–∑–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ schemas/
‚îÇ   ‚îî‚îÄ‚îÄ checkoutSchema.ts               # Zod –≤–∞–ª–∏–¥–∞—Ü–∏—è
‚îÇ
‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îú‚îÄ‚îÄ order.ts                        # TypeScript —Ç–∏–ø—ã –¥–ª—è –∑–∞–∫–∞–∑–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ delivery.ts                     # TypeScript —Ç–∏–ø—ã –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ payment.ts                      # TypeScript —Ç–∏–ø—ã –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π
‚îÇ
‚îî‚îÄ‚îÄ __mocks__/
    ‚îú‚îÄ‚îÄ handlers/
    ‚îÇ   ‚îú‚îÄ‚îÄ ordersHandlers.ts           # MSW –º–æ–∫–∏ –¥–ª—è orders API
    ‚îÇ   ‚îú‚îÄ‚îÄ deliveryHandlers.ts         # MSW –º–æ–∫–∏ –¥–ª—è delivery API
    ‚îÇ   ‚îî‚îÄ‚îÄ paymentHandlers.ts          # MSW –º–æ–∫–∏ –¥–ª—è payment API
```

### **Data Flow:**
```
1. User ‚Üí CheckoutForm
2. CheckoutForm ‚Üí ordersService.create()
3. ordersService ‚Üí POST /orders/create
4. Backend ‚Üí Returns orderId
5. orderStore ‚Üí Save order state
6. CheckoutForm ‚Üí Redirect to /checkout/success/[orderId]
7. Success Page ‚Üí Display order details
8. cartStore ‚Üí Clear cart items
```

### **State Management (Zustand):**
```typescript
// orderStore.ts
interface OrderState {
  currentOrder: Order | null;
  isSubmitting: boolean;
  error: string | null;
  createOrder: (data: CheckoutFormData) => Promise<void>;
  confirmOrder: (orderId: string) => Promise<void>;
  clearOrder: () => void;
}
```

---

## Testing Strategy

### **1. Unit Tests (Vitest + React Testing Library):**
- ‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã checkout —Å–µ–∫—Ü–∏–∏
- ‚úÖ –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã (ordersService, deliveryService, paymentService)
- ‚úÖ orderStore (Zustand)
- ‚úÖ Zod –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ö–µ–º—ã
- **–¶–µ–ª—å:** 80%+ –ø–æ–∫—Ä—ã—Ç–∏–µ

### **2. Integration Tests (MSW):**
- ‚úÖ API –≤—ã–∑–æ–≤—ã —Å –º–æ–∫–∞–º–∏
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —É—Å–ø–µ—à–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (4xx, 5xx)
- ‚úÖ Retry –ª–æ–≥–∏–∫–∞

### **3. E2E Tests (Playwright):**
- ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ñ–ª–æ—É: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É ‚Üí checkout ‚Üí —É—Å–ø–µ—Ö
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã
- ‚úÖ –†–∞—Å—á—ë—Ç –¥–æ—Å—Ç–∞–≤–∫–∏
- ‚úÖ –í—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã
- ‚úÖ –†–æ–ª–µ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ (B2B/B2C)

### **4. Accessibility Tests:**
- ‚úÖ axe-core –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ WCAG 2.1 AA
- ‚úÖ Keyboard navigation
- ‚úÖ Screen reader compatibility

### **5. Performance Tests:**
- ‚úÖ Lighthouse audit (PageSpeed > 70)
- ‚úÖ LCP < 2.5s
- ‚úÖ Bundle size –∞–Ω–∞–ª–∏–∑

---

## Documentation Requirements

### **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**

1. **README.md –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
   - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é checkout
   - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏/–ø–ª–∞—Ç–µ–∂–µ–π
   - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API

2. **API Integration Docs:**
   - –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö endpoints
   - Request/Response –ø—Ä–∏–º–µ—Ä—ã
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

3. **Component Documentation (JSDoc):**
   ```typescript
   /**
    * CheckoutForm - –≥–ª–∞–≤–Ω–∞—è —Ñ–æ—Ä–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞
    *
    * @component
    * @example
    * ```tsx
    * <CheckoutForm
    *   cartItems={items}
    *   user={currentUser}
    *   onSuccess={(orderId) => router.push(`/checkout/success/${orderId}`)}
    * />
    * ```
    */
   ```

4. **E2E Tests Documentation:**
   - –û–ø–∏—Å–∞–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–ª–æ—É
   - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–ø—É—Å–∫—É —Ç–µ—Å—Ç–æ–≤
   - Troubleshooting guide

---

## Performance Targets

### **–ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**

| –ú–µ—Ç—Ä–∏–∫–∞ | –¶–µ–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ |
|---------|------------------|----------------------|
| **LCP (Largest Contentful Paint)** | < 2.5s | < 4.0s |
| **FID (First Input Delay)** | < 100ms | < 300ms |
| **CLS (Cumulative Layout Shift)** | < 0.1 | < 0.25 |
| **PageSpeed Score** | > 70 | > 50 |
| **Bundle Size (checkout page)** | < 200KB gzipped | < 300KB gzipped |
| **API Response Time (create order)** | < 500ms | < 1000ms |

### **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- ‚úÖ Code splitting –¥–ª—è checkout —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- ‚úÖ Lazy loading –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏/–ø–ª–∞—Ç–µ–∂–µ–π
- ‚úÖ Image optimization (Next.js Image)
- ‚úÖ Debounce –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Ä–∞—Å—á—ë—Ç–æ–≤
- ‚úÖ Caching —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–ª—è delivery options

---

## Accessibility Requirements

### **WCAG 2.1 AA Compliance:**

1. **–ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è:**
   - ‚úÖ –í—Å–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ Tab
   - ‚úÖ Focus indicators –≤–∏–¥–Ω—ã
   - ‚úÖ Skip links –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

2. **Screen Reader Support:**
   - ‚úÖ ARIA labels –¥–ª—è –≤—Å–µ—Ö —Ñ–æ—Ä–º
   - ‚úÖ Semantic HTML (form, fieldset, legend)
   - ‚úÖ Error announcements

3. **–ö–æ–Ω—Ç—Ä–∞—Å—Ç:**
   - ‚úÖ –¢–µ–∫—Å—Ç: –º–∏–Ω–∏–º—É–º 4.5:1
   - ‚úÖ UI —ç–ª–µ–º–µ–Ω—Ç—ã: –º–∏–Ω–∏–º—É–º 3:1
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ axe-core

4. **–§–æ—Ä–º—ã:**
   - ‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–µ label –¥–ª—è –≤—Å–µ—Ö input
   - ‚úÖ Error messages —Å–≤—è–∑–∞–Ω—ã —Å –ø–æ–ª—è–º–∏
   - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ–º

---

## Security Considerations

### **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**

1. **–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
   - ‚úÖ HTTPS –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
   - ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã –≤ HttpOnly cookies
   - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –≤–≤–æ–¥–æ–≤ (Zod)

2. **–ü–ª–∞—Ç–µ–∂–∏:**
   - ‚úÖ PCI DSS compliance —á–µ—Ä–µ–∑ YuKassa
   - ‚úÖ –ù–∏–∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–∞ frontend
   - ‚úÖ Tokenization –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π

3. **CSRF Protection:**
   - ‚úÖ CSRF —Ç–æ–∫–µ–Ω—ã –¥–ª—è –≤—Å–µ—Ö POST –∑–∞–ø—Ä–æ—Å–æ–≤
   - ‚úÖ SameSite cookies

4. **Rate Limiting:**
   - ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞ —á–µ—Ä–µ–∑ backend rate limiting
   - ‚úÖ Debounce –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤

---

## Monitoring and Observability

### **–ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:**

1. **Business Metrics (—É–ø—Ä–æ—â—ë–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è):**

   - –ö–æ–Ω–≤–µ—Ä—Å–∏—è checkout ‚Üí success
   - –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞
   - Drop-off rate –ø–æ —Å–µ–∫—Ü–∏—è–º —Ñ–æ—Ä–º—ã
   - % –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–ø–æ—Å–æ–±–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤, —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –≤ –¥–µ–Ω—å

2. **Technical Metrics:**

   - API response times (`/orders/create`)
   - 4xx/5xx error rates
   - Client-side errors (Sentry)
   - Performance metrics (RUM)
   - Email delivery success rate (–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É)

3. **Alerts:**

   - ‚ùó Critical: –û—à–∏–±–∫–∏ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞ > 5%
   - ‚ùó Critical: Email –Ω–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É
   - ‚ùó Warning: API latency > 1s
   - ‚ùó Info: Drop-off rate > 50%

---

## Success Metrics (KPIs)

### **–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞:**

| –ú–µ—Ç—Ä–∏–∫–∞ | –¶–µ–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | –¢–µ–∫—É—â–µ–µ (baseline) |
|---------|------------------|-------------------|
| **–ö–æ–Ω–≤–µ—Ä—Å–∏—è –∫–æ—Ä–∑–∏–Ω–∞ ‚Üí –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ** | > 60% | N/A (–Ω–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª) |
| **–ö–æ–Ω–≤–µ—Ä—Å–∏—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ ‚Üí —É—Å–ø–µ—Ö** | > 80% | N/A |
| **–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è** | < 2 –º–∏–Ω | N/A (—É–ø—Ä–æ—â—ë–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞) |
| **Mobile conversion rate** | > 50% | N/A |
| **–û—à–∏–±–∫–∏ API (create order)** | < 2% | N/A |
| **Email delivery rate (–∞–¥–º–∏–Ω—É)** | > 99% | N/A |
| **–ó–∞–∫–∞–∑–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ –∞–¥–º–∏–Ω–æ–º** | < 24 —á–∞—Å–∞ | N/A (—Ä—É—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞) |

### **–°–±–æ—Ä –º–µ—Ç—Ä–∏–∫:**
- Google Analytics 4 –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
- Sentry –¥–ª—è client-side –æ—à–∏–±–æ–∫
- Backend logging –¥–ª—è API –º–µ—Ç—Ä–∏–∫
- User surveys –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è

---

## Story Manager Handoff

**Story Manager Handoff:**

"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–π—Ç–µ –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–ª—è brownfield —ç–ø–∏–∫–∞ **–≠–ø–∏–∫ 15: Checkout (–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞) - –£–ü–†–û–©–Å–ù–ù–ê–Ø –í–ï–†–°–ò–Ø**.

**‚ö†Ô∏è –í–ê–ñ–ù–û: –≠—Ç–æ —É–ø—Ä–æ—â—ë–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —ç–ø–∏–∫–∞:**

- ‚ùå **–ë–ï–ó —Ä–∞—Å—á—ë—Ç–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫–∏** (CDEK/Boxberry API –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- ‚ùå **–ë–ï–ó –æ–Ω–ª–∞–π–Ω –æ–ø–ª–∞—Ç—ã** (YuKassa –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- ‚úÖ **–†—É—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫–∞–∑–æ–≤** –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º —á–µ—Ä–µ–∑ Django Admin
- ‚úÖ **Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞
- ‚úÖ **–ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –¥–æ—Å—Ç–∞–≤–∫–∏** (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ Django Admin)

**–ö–ª—é—á–µ–≤—ã–µ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è:**

- **–°—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Å–∏—Å—Ç–µ–º–∞:** Next.js 15.4.6 + TypeScript 5.0+ + React 19.1.0 + Zustand 4.5.7
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–æ—á–∫–∏ (—É–ø—Ä–æ—â—ë–Ω–Ω—ã–µ):**
  - `POST /orders/create` - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π email –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É
  - `GET /delivery/methods` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–ø–æ—Å–æ–±–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏
  - `cartStore` (Zustand) - –∫–æ—Ä–∑–∏–Ω–∞ –∏–∑ –≠–ø–∏–∫–∞ 16
  - `authStore` (Zustand) - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏–∑ –≠–ø–∏–∫–∞ 15
  - UI Kit –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–∑ –≠–ø–∏–∫–∞ 10

- **–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è —Å–ª–µ–¥–æ–≤–∞–Ω–∏—è:**
  - React Hook Form 7.62.0 –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–æ—Ä–º–∞–º–∏
  - Zod –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å—Ö–µ–º
  - MSW 2.12.2 –¥–ª—è API mocking –≤ —Ç–µ—Å—Ç–∞—Ö
  - Vitest 2.1.5 + React Testing Library 16.3.0 –¥–ª—è unit-—Ç–µ—Å—Ç–æ–≤
  - Playwright –¥–ª—è E2E —Ç–µ—Å—Ç–æ–≤
  - design-system.json –¥–ª—è UI/UX —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏

- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏:**
  - TypeScript –±–µ–∑ `as any`
  - ESLint/Prettier –ø—Ä–æ–≤–µ—Ä–∫–∏
  - Unit-—Ç–µ—Å—Ç—ã –ø–æ–∫—Ä—ã—Ç–∏–µ 70%+ (—É–ø—Ä–æ—â—ë–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
  - E2E —Ç–µ—Å—Ç—ã –±–∞–∑–æ–≤–æ–≥–æ —Ñ–ª–æ—É (–±–µ–∑ –æ–ø–ª–∞—Ç—ã)
  - Mobile-first –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å
  - WCAG 2.1 AA accessibility

- **–ö–∞–∂–¥–∞—è –∏—Å—Ç–æ—Ä–∏—è –¥–æ–ª–∂–Ω–∞ –≤–∫–ª—é—á–∞—Ç—å:**
  - –ü—Ä–æ–≤–µ—Ä–∫—É, —á—Ç–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∫–æ—Ä–∑–∏–Ω—ã –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–µ—Ç—Ä–æ–Ω—É—Ç—ã–º
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å MSW –º–æ–∫–∞–º–∏
  - Unit-—Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
  - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (JSDoc)

–≠–ø–∏–∫ –¥–æ–ª–∂–µ–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è **—É–ø—Ä–æ—â—ë–Ω–Ω—ã–π Single Page Checkout —Å —Ä—É—á–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∑–∞–∫–∞–∑–æ–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º —á–µ—Ä–µ–∑ Django Admin**."

---

## Approval and Sign-off

**–ó–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚úÖ Product Manager (John) - –û–¥–æ–±—Ä–µ–Ω–æ
- ‚è≥ Tech Lead - –û–∂–∏–¥–∞–µ—Ç —Ä–µ–≤—å—é
- ‚è≥ UX Designer - –û–∂–∏–¥–∞–µ—Ç —Ä–µ–≤—å—é
- ‚è≥ QA Lead - –û–∂–∏–¥–∞–µ—Ç —Ä–µ–≤—å—é

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. ‚úÖ Epic —Å–æ–∑–¥–∞–Ω –∏ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω
2. üîÑ Story Manager: –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –Ω–∞ –¥–µ—Ç–∞–ª—å–Ω—ã–µ user stories
3. ‚è≥ Tech Lead: –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ–≤—å—é
4. ‚è≥ UX Designer: —Ä–µ–≤—å—é UX/UI —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
5. ‚è≥ –ù–∞—á–∞–ª–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ Story 15.1

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-12-14
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-12-14
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0.0
**–ê–≤—Ç–æ—Ä:** John (PM Agent) üìã
