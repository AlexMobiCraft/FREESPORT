# Epic 21: Сброс пароля через Email

**Status:** Planned
**Owner:** TBD

## Описание

Реализация функционала сброса пароля для зарегистрированных пользователей. Процесс включает запрос на сброс, отправку ссылки с токеном на email пользователя, валидацию токена и установку нового пароля.

## Цели

- Обеспечить пользователям возможность восстановить доступ к аккаунту при утере пароля.
- Реализовать безопасный механизм сброса пароля через email.
- Заменить текущую "заглушку" в API реальной отправкой писем.

## Объем работ (Scope)

1. **Backend:**
    - Интеграция с сервисом отправки email (используя существующие настройки Email).
    - Обновление `PasswordResetRequestView` для отправки реальных писем.
    - Использование HTML шаблона для письма сброса пароля.
    - Убедиться, что `ValidateTokenView` и `PasswordResetConfirmView` работают корректно (уже реализованы, требуется проверка).

2. **Frontend (Story 21.2 - будет создана отдельно, пока фокус на Backend):**
    - Страница запроса сброса пароля (ввод email).
    - Страница установки нового пароля (ввод нового пароля по ссылке из письма).

## Истории (Stories)

- **[Story 21.1: Backend реализации сброса пароля](file:///c:/Users/38670/DEV_WEB/FREESPORT/docs/stories/epic-21/21.1.reset-password-backend.story.md)**
  - Настройка Celery задачи для отправки email.
  - Генерация ссылки сброса пароля.
  - Отправка письма пользователю.

## Технические требования

- Использовать Django `PasswordResetTokenGenerator`.
- Email отправляется асинхронно через Celery.
- Ссылка в письме должна вести на Frontend URL: `{FRONTEND_URL}/password-reset/confirm/{uid}/{token}/`.
- Соблюдение Security Best Practices (не раскрывать наличие email в базе при запросе сброса).

## Связанные Эпики

- Epic 29: Уведомления и Верификация (использует общий механизм отправки email).
