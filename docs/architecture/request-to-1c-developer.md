# Запрос к программисту 1С по интеграции с веб-платформой FREESPORT

**Дата:** 10 сентября 2025  
**Проект:** FREESPORT - платформа электронной коммерции B2B/B2C  
**От:** Команда разработки веб-платформы  
**Кому:** Программист 1С:Управление торговлей  

---

## Введение

Разрабатываем веб-платформу FREESPORT для продажи спортивных товаров с интеграцией к вашей системе 1С:Управление торговлей. Нам необходимо настроить двустороннюю синхронизацию данных между системами.

**Техническая база веб-платформы:**
- Backend: Django + PostgreSQL
- 7 ролей пользователей с разным ценообразованием (розница + 6 B2B ролей)
- REST API для всех операций
- Поддержка Битрикс24 REST API протокола
- Асинхронная обработка через Celery + Redis
- Webhook endpoints для получения данных в реальном времени

---

## 1. Данные, которые нам нужно получать из 1С

### 1.1 **КАТАЛОГ ТОВАРОВ**

**Товары (номенклатура):**
- Уникальный ID товара в 1С
- Наименование товара
- Артикул/SKU (если есть)
- Полное описание
- Краткое описание (если есть)
- Технические характеристики
- Изображения товара (основное + галерея)
- Единица измерения
- Минимальное количество для заказа
- Бренд/производитель
- Статус активности (активен/деактивирован)

**Категории товаров:**
- Уникальный ID категории в 1С
- Наименование категории
- Родительская категория (для иерархии)
- Описание категории
- Изображение категории (если есть)
- Порядок сортировки
- **Связь товара с категорией** (categoryId в товаре)

**Бренды:**
- Наименование бренда
- Описание бренда
- Логотип (если есть)

### 1.2 **ЦЕНООБРАЗОВАНИЕ И КОММЕРЧЕСКИЕ УСЛОВИЯ**

У нас 6 типов покупателей с разными ценами (+ админ):**

1. **retail** - Розничные покупатели
2. **wholesale_level1** - Оптовики уровень 1
3. **wholesale_level2** - Оптовики уровень 2  
4. **wholesale_level3** - Оптовики уровень 3
5. **trainer** - Тренеры/спорт.клубы/фитнес
6. **federation_rep** - Представители федераций
7. **admin** - Администраторы (внутренняя роль, не покупатель)

**Для каждого товара нужны цены для 6 типов покупателей:**
- Цена для розничных покупателей
- Цена для оптовиков уровень 1, 2, 3
- Цена для тренеров/спорт.клубов/фитнес
- Цена для представителей федераций
- Администраторы цены не получают (внутренняя роль)

**Информационные цены для B2B пользователей:**
- RRP (Recommended Retail Price) - рекомендованная розничная цена
- MSRP (Maximum Suggested Retail Price) - максимальная рекомендованная цена

### 1.3 **ОСТАТКИ И НАЛИЧИЕ**

**Нас интересует только:**
- **Доступное для заказа количество** (итоговое значение после всех расчетов 1С)
- Мы не хотим получать внутренние данные 1С (резервы, складские остатки и т.д.)
- Нужно только конечное число: сколько можно заказать прямо сейчас

### 1.4 **ПОКУПАТЕЛИ (КЛИЕНТЫ)**

**Для всех типов клиентов:**
- Уникальный ID клиента в 1С
- ФИО контактного лица
- Email
- Телефон
- Тип клиента (физическое лицо / юридическое лицо)
- Тип ценообразования (retail, wholesale_level1-3, trainer, federation_rep)
- Адрес доставки
- Статус клиента (активен/заблокирован)
- Дата создания в 1С

**Дополнительно для B2B:**
- Наименование организации
- ИНН
- Юридический адрес

---

## 2. Данные, которые мы будем передавать в 1С

### 2.1 **ЗАКАЗЫ КЛИЕНТОВ**

**Информация о заказе:**
- Уникальный номер заказа в веб-платформе
- Дата и время создания заказа
- Статус заказа - 'новый заказ'
- Общая сумма заказа
- Способ оплаты
- Статус оплаты

**Информация о клиенте:**
- Уникальный ID клиента в 1С
- ФИО контактного лица
- Название организации (для B2B)
- Email и телефон
- Тип клиента (физ.лицо/юр.лицо)
- ИНН (для юр.лиц)
- Адрес доставки

**Состав заказа:**
- ID товара в 1С
- Наименование товара
- Количество
- Цена на момент заказа
- Сумма по позиции

**Дополнительная информация:**
- Комментарии к заказу
- Способ доставки
- Дата желаемой доставки

### 2.2 **НОВЫЕ ПОКУПАТЕЛИ**

При регистрации на веб-платформе передаем в 1С:
- ФИО контактного лица
- Наименование организации (для B2B)
- Email (используется как логин)
- Телефон
- Тип пользователя (физ.лицо/юр.лицо)
- ИНН (для юр.лиц)
- Адреса (юридический и доставки)
- Тип ценообразования (модерация администратором)
- Дата регистрации

**Важно:** B2B клиенты требуют модерации администратором платформы для присвоения типа ценообразования.
После синхронизации в 1С, Уникальный ID клиента в 1С должен быть присвоен автоматически, и передан обратно в веб-платформу.

### 2.3 **ОБНОВЛЕНИЯ СТАТУСОВ ЗАКАЗОВ**

Нам нужно получать обратно из 1С:
- Подтверждение получения заказа
- Изменения статуса заказа в реальном времени
- Номер заказа в 1С (onec_order_id)
- Трек-номер для отслеживания (если есть)
- Дата и время изменения статуса
- Комментарии к изменению статуса (если есть)

---

## 3. Вопросы по техническому формату

### 3.1 **ОСНОВНЫЕ ВОПРОСЫ ПО МОДУЛЮ «ИНТЕРНЕТ-МАГАЗИН + 1С»:**

1. **Какие настройки модуля «Интернет-магазин + 1С» для «УТ, ред. 11.5» необходимы?**
   - Какие поля товаров будут синхронизироваться?
   - Настройки частоты синхронизации?
   - Конфигурация webhook endpoints?

2. **Поддержка категорий товаров:**
   - Как в модуле организована связь товара с категорией?
   - Поддерживается ли иерархия категорий?
   - Передается ли categoryId в данных товара?

### 3.2 **ВОПРОСЫ ПО ЦЕНООБРАЗОВАНИЮ:**

3. **Как настроить 6 типов цен для наших покупателей в модуле?**
   - Как называются типы цен в вашей 1С для: retail, wholesale_level1-3, trainer, federation_rep?
   - Какие точные наименования используются для розничных и оптовых цен?
   - Есть ли специальные типы цен для тренеров и представителей федераций?

4. **Информационные цены (RRP/MSRP):**
   - Есть ли в 1С информационные цены (RRP/MSRP)?
   - Как они называются в системе?
   - В каком поле выгружаются через модуль?

### 3.3 **ВОПРОСЫ ПО ЗАКАЗАМ И СТАТУСАМ:**

5. **Полный список статусов заказов в 1С:**
   - Можете ли предоставить полный список всех возможных статусов заказов в 1С с их точными названиями?
   - Есть ли стандартные статусы типа: "Принят в обработку", "Резервирование на складе", "Готов к отгрузке", "Отгружен", "Доставлен", "Отменен", "Возврат"?
   - Как эти статусы передаются через модуль (строки, коды)?

6. **Обратная связь по статусам заказов через модуль:**
   - Как модуль отправляет обновления статусов на нашу платформу?
   - Поддерживается ли отправка в реальном времени при изменении статуса?
   - Какие данные передаются: номер заказа в 1С, дата изменения, комментарии?

### 3.4 **ВОПРОСЫ ПО СИНХРОНИЗАЦИИ ПОКУПАТЕЛЕЙ:**

7. **Загрузка существующих клиентов из 1С:**
   - Как модуль выгружает справочник существующих клиентов?
   - Какие поля клиентов передаются (ID, ФИО, тип ценообразования, статус)?
   - Как организована автоматическая привязка при регистрации существующего клиента на сайте?

8. **Модерация B2B клиентов:**
   - Как через модуль передать информацию о том, что B2B клиент прошел модерацию?
   - Кто и как присваивает утвержденный тип ценообразования?
   - Как обновить статус клиента в 1С после модерации?

### 3.5 **ТЕХНИЧЕСКИЕ ОСОБЕННОСТИ МОДУЛЯ:**

9. **Настройки webhook для нашей платформы:**
   - Какие webhook URL нужно настроить в модуле для получения:
     * Обновлений товаров и цен
     * Обновлений остатков
     * Статусов заказов
   - Как настроить аутентификацию webhook запросов?

10. **Обработка остатков товаров:**
    - Как модуль рассчитывает итоговое "доступное для заказа" количество?
    - Учитываются ли автоматически резервы, заказы в обработке?
    - В каком поле передается финальное доступное количество?


---

## 4. Примеры структур данных (для уточнения)

### 4.1 Пример товара, который нам нужен:

```json
{
  "onec_id": "00001234-0000-0000-0000-000000000001",
  "name": "Футболка Nike Dri-FIT",
  "sku": "NIKE-DF-001-L",
  "description": "Спортивная футболка с технологией Dri-FIT",
  "category_id": "cat-sportswear",
  "brand": "Nike",
  "unit": "шт",
  "min_order_quantity": 1,
  "specifications": {
    "material": "100% полиэстер",
    "size": "L",
    "color": "Черный"
  },
  "images": [
    "products/nike-dri-fit-001-main.jpg",
    "products/nike-dri-fit-001-back.jpg"
  ],
  "prices": {
    "retail": 2500.00,
    "wholesale_level1": 2000.00,
    "wholesale_level2": 1800.00,
    "wholesale_level3": 1600.00,
    "trainer": 1900.00,
    "federation": 1700.00,
    "rrp": 2500.00,
    "msrp": 3000.00
  },
  "stock": {
    "quantity": 15,
    "reserved": 2,
    "available": 13
  },
  "is_active": true
}
```

### 4.2 Пример заказа, который мы будем передавать:

```json
{
  "order_id": "ORD-2025-000123",
  "created_at": "2025-09-05T14:30:00Z",
  "status": "new",
  "total_amount": 5000.00,
  "customer": {
    "name": "Иванов Иван Иванович",
    "email": "ivan@example.com",
    "phone": "+7 (999) 123-45-67",
    "type": "individual",
    "delivery_address": "Москва, ул. Примерная, д. 1"
  },
  "items": [
    {
      "onec_id": "00001234-0000-0000-0000-000000000001",
      "name": "Футболка Nike Dri-FIT",
      "quantity": 2,
      "price": 2500.00,
      "total": 5000.00
    }
  ],
  "payment_method": "card",
  "delivery_method": "courier",
  "comments": "Доставка после 18:00"
}
```

### 4.3 Пример покупателя, которого мы будем передавать:

```json
{
  "email": "ivan@example.com",
  "registration_date": "2025-09-05T10:00:00Z",
  "customer_type": "individual",
  "individual_data": {
    "first_name": "Иван",
    "last_name": "Иванов", 
    "middle_name": "Иванович",
    "phone": "+7 (999) 123-45-67",
    "birth_date": "1990-01-15",
    "delivery_address": "Москва, ул. Примерная, д. 1, кв. 10"
  },
  "legal_data": null,
  "requested_role": "retail",
  "verification_status": "pending"
}
```

**Или для B2B клиента:**

```json
{
  "email": "orders@sportclub.com",
  "registration_date": "2025-09-05T10:00:00Z",
  "customer_type": "legal_entity",
  "individual_data": null,
  "legal_data": {
    "company_name": "ООО «СпортКлуб»",
    "tax_id": "7701234567",
    "legal_address": "Москва, ул. Деловая, д. 5",
    "delivery_address": "Москва, ул. Складская, д. 10",
    "contact_person": "Петров Петр Петрович",
    "contact_phone": "+7 (999) 987-65-43"
  },
  "requested_role": "wholesale_level2",
  "verification_status": "requires_approval"
}
```

---

## 5. Что нужно от вас

**Ответы на все вопросы из раздела 3:**

1. Настройки модуля «Интернет-магазин + 1С» для «УТ, ред. 11.5»
2. Поддержка категорий товаров и связь товара с категорией  
3. Настройка 6 типов цен для наших покупателей
4. Информационные цены (RRP/MSRP)
5. Полный список статусов заказов в 1С с точными названиями
6. Обратная связь по статусам заказов через модуль
7. Загрузка существующих клиентов из 1С
8. Модерация B2B клиентов
9. Настройки webhook для нашей платформы
10. Обработка остатков товаров

**Примеры реальных данных через модуль:**
- Пример JSON товара с categoryId и 6 типами цен
- Пример данных остатков с финальным доступным количеством
- Пример справочника клиентов с типами ценообразования
- Пример webhook payload для статуса заказа

**Техническая документация:**
- Инструкция по настройке модуля для наших требований
- Список webhook URL endpoints для настройки
- Процедуры аутентификации webhook запросов

**График:**
- Когда можете предоставить тестовые данные?
- Сроки настройки интеграции?

---

## 6. Наши возможности

**Что мы можем адаптировать под вас:**
- Парсинг любых разумных форматов данных (XML, JSON, CSV)
- Работа с различными способами передачи данных
- Адаптация под ваши названия полей и структур
- Гибкая настройка маппинга данных

**Что мы предоставим:**
- Детальную документацию по приему заказов
- Тестовую среду для отладки интеграции
- Техническую поддержку на всех этапах

---

## Контакты

**По техническим вопросам:**  
Email: [указать email]  
Телефон: [указать телефон]

**Ожидаем ответа для продолжения разработки интеграции.**

Спасибо за сотрудничество! 🤝