# План разработки Frontend-приложения FREESPORT

Этот документ определяет пошаговый план для разработки frontend-части платформы FREESPORT. План основан на существующей документации, архитектурных решениях и текущем состоянии кодовой базы.

## Фаза 1: Фундамент и базовый функционал

Цель этой фазы — создать прочную основу для приложения, реализовать ключевые механизмы и базовые страницы.

### 1.1. Настройка и расширение окружения

- **Задача:** Доработать конфигурацию ESLint и Prettier для обеспечения единого стиля кода.
- **Действия:**
    - Установить плагины `eslint-plugin-react-hooks`, `eslint-plugin-jsx-a11y`.
    - Настроить правила в `eslint.config.mjs` для `react-hooks/exhaustive-deps`.
    - Создать файл `.prettierrc` с базовыми правилами форматирования.
- **Обоснование:** Обеспечение высокого качества кода и предотвращение распространенных ошибок.

### 1.2. Разработка UI Kit

- **Задача:** Создать базовый набор переиспользуемых UI-компонентов на основе `front-end-spec.md`.
- **Действия:**
    - Реализовать компоненты в `frontend/src/components/ui/`:
        - `Input.tsx` (с вариантами для текста, пароля, поиска)
        - `Select.tsx`
        - `Checkbox.tsx`
        - `Spinner.tsx`
        - `Modal.tsx`
    - Написать тесты для каждого компонента в `frontend/src/components/__tests__/`.
- **Обоснование:** Ускорение разработки страниц за счет использования готовых строительных блоков.

### 1.3. Реализация слоя API

- **Задача:** Расширить сервис API для всех эндпоинтов, описанных в `api-spec.yaml`.
- **Действия:**
    - В `frontend/src/services/api.ts` добавить функции для взаимодействия с:
        - Продуктами (`getProducts`, `getProductById`)
        - Категориями (`getCategories`)
        - Корзиной (`getCart`, `addToCart`, `updateCartItem`, `removeFromCart`)
        - Заказами (`getOrders`, `createOrder`)
    - Определить типы данных для ответов API в `frontend/src/types/index.ts`.
- **Обоснование:** Централизация логики взаимодействия с бэкендом.

### 1.4. Аутентификация и управление сессией

- **Задача:** Полностью реализовать флоу аутентификации пользователя.
- **Действия:**
    - Доработать `authStore.ts` для хранения токенов и информации о пользователе.
    - Реализовать логику обновления `access` токена с помощью `refresh` токена.
    - Создать `AuthGuard` (High-Order Component) для защиты роутов, требующих аутентификации.
    - Реализовать страницы регистрации (`/register`) и восстановления пароля (`/password-reset`).
- **Обоснование:** Обеспечение безопасности и персонализации.

## Фаза 2: Реализация страниц портала

Цель этой фазы — реализовать все ключевые страницы пользовательского интерфейса, используя созданный в Фазе 1 фундамент.

### 2.1. Основные страницы

- **Главная страница (`/`)**:
  - **Задача:** Создать динамическую главную страницу.
  - **Действия:** Реализовать компоненты для баннера, блоков "Хиты продаж", "Новинки", категорий, новостей и формы подписки. Интегрировать с соответствующими API.
- **Каталог товаров (`/catalog/...`)**:
  - **Задача:** Реализовать страницу каталога с фильтрацией и сортировкой.
  - **Действия:** Создать страницу `app/catalog/[[...slug]]/page.tsx` для поддержки вложенных категорий. Реализовать компоненты `ProductGrid`, `ProductCard`, `Filters`, `Sorting`.
- **Карточка товара (`/product/[slug]`)**:
  - **Задача:** Создать детальную страницу товара.
  - **Действия:** Реализовать галерею изображений, выбор опций (размер, цвет), отображение наличия, кнопки "В корзину" и "В избранное".
- **Поиск (`/search`)**:
  - **Задача:** Реализовать функционал поиска.
  - **Действия:** Создать компонент поиска с автодополнением в `Header`. Создать страницу результатов поиска `app/search/page.tsx` с возможностью дальнейшей фильтрации.

### 2.2. Пользовательский флоу (Аутентификация и Покупка)

- **Регистрация и Авторизация (`/login`, `/register`, `/b2b-register`)**:
  - **Задача:** Обеспечить вход и регистрацию для B2C и B2B пользователей.
  - **Действия:**
    - Реализовать общие формы входа и восстановления пароля.
    - Создать отдельные страницы/формы для B2C (`/register`) и B2B (`/b2b-register`) регистрации, включая флоу верификации.
    - Интегрировать ролевую модель: адаптировать отображение цен, каталога и доступных функций в зависимости от роли пользователя (полученной из `authStore`).
- **Корзина (`/cart`)**:
  - **Задача:** Реализовать страницу корзины.
  - **Действия:** Отображение списка товаров, изменение количества, применение промокодов.
- **Оформление заказа (`/checkout`)**:
  - **Задача:** Создать Single Page Checkout.
  - **Действия:** Реализовать единую форму для ввода контактных данных, выбора адреса, способа доставки и оплаты.

### 2.3. Личный кабинет (`/profile/...`)

- **Задача:** Создать разделы личного кабинета.
- **Действия:**
  - **Мой профиль (`/profile`)**: Управление личной информацией.
  - **Мои заказы (`/profile/orders`)**: Список и детализация заказов.
  - **Адреса доставки (`/profile/addresses`)**: CRUD для адресов доставки.
  - **Избранное (`/profile/favorites`)**: Список избранных товаров.

### 2.4. Информационные страницы

- **Задача:** Создать универсальный шаблон для статических страниц.
- **Действия:** Создать динамический роут `app/info/[slug]/page.tsx`, который будет получать контент через API страниц. Использовать для "О нас", "Доставка и оплата", "Контакты" и т.д.



## Оптимизация и соответствие стандартам

1.  **Соответствие архитектуре:** Текущая структура `frontend/src` полностью соответствует документации. План развития также следует заложенным принципам (разделение на `components`, `services`, `stores`).
2.  **Стандарты кодирования:** План включает в себя доработку линтеров и следование `coding-standards.md` при реализации всех компонентов и страниц.
3.  **Оптимизации:**
    *   **Предложение:** Использовать Server Components (RSC) для страниц каталога и товаров для улучшения SEO и скорости первоначальной загрузки.
    *   **Предложение:** Создать единый `axios` инстанс в `services/api.ts` с интерцепторами для автоматического добавления `Authorization` хедера и обработки ошибок (например, обновления токена при 401).

Этот план является высокоуровневым и должен быть декомпозирован на более мелкие задачи (User Stories) для планирования спринтов.