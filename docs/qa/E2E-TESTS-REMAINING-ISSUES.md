# –û—Å—Ç–∞–≤—à–∏–µ—Å—è –ø—Ä–æ–±–ª–µ–º—ã E2E —Ç–µ—Å—Ç–æ–≤

**–î–∞—Ç–∞:** 2026-01-12
**–í–µ—Ç–∫–∞:** claude/fix-e2e-tests-bptXj

## –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ –ø–æ–ª–µ–π –≤ checkout.spec.ts

**–ü—Ä–æ–±–ª–µ–º–∞:** –í —Ç–µ—Å—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ä–∞–∑–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –ø–æ–∏—Å–∫–∞ –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ –ø–æ–ª–µ–π —Ñ–æ—Ä–º—ã:

```typescript
// –í —Ñ—É–Ω–∫—Ü–∏–∏ fillCheckoutForm():
await page.fill('#input-email', data.email);
await page.fill('#input-—Ç–µ–ª–µ—Ñ–æ–Ω', data.phone);  // ID —Å —Ä—É—Å—Å–∫–∏–º–∏ –±—É–∫–≤–∞–º–∏
await page.fill('#input-–∏–º—è', data.firstName);
await page.fill('#input-—Ñ–∞–º–∏–ª–∏—è', data.lastName);

// –í —Ç–µ—Å—Ç–µ fills contact information correctly:
await page.getByLabel('Email').fill(testCheckoutData.email);
await page.getByLabel('–¢–µ–ª–µ—Ñ–æ–Ω').fill(testCheckoutData.phone);  // getByLabel

// –í —Ç–µ—Å—Ç–µ fills delivery address correctly:
await page.fill('input[name="city"]', testCheckoutData.city);  // name –∞—Ç—Ä–∏–±—É—Ç
```

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π –ø–æ–¥—Ö–æ–¥ - —á–µ—Ä–µ–∑ `name` –∞—Ç—Ä–∏–±—É—Ç –∏–ª–∏ `data-testid`.

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π
**–§–∞–π–ª:** frontend/tests/e2e/checkout.spec.ts
**–°—Ç—Ä–æ–∫–∏:** 179-192, 250-264

---

### 2. –°–µ–ª–µ–∫—Ç–æ—Ä—ã —Å —Ä—É—Å—Å–∫–∏–º–∏ ID

**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ID —Å —Ä—É—Å—Å–∫–∏–º–∏ –±—É–∫–≤–∞–º–∏:

```typescript
await page.fill('#input-—Ç–µ–ª–µ—Ñ–æ–Ω', data.phone);
await page.fill('#input-–∏–º—è', data.firstName);
await page.fill('#input-—Ñ–∞–º–∏–ª–∏—è', data.lastName);
await page.fill('#input-–≥–æ—Ä–æ–¥', data.city);
await page.fill('#input-—É–ª–∏—Ü–∞', data.street);
await page.fill('#input-–¥–æ–º', data.house);
```

–¢–∞–∫–∏–µ ID –º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –∫–æ–¥–µ (–æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –∏–º–µ–Ω–∞ –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã—Ö –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤).

**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã —á–µ—Ä–µ–∑ `input[name="..."]` –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ ID –ø–æ–ª–µ–π –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö.

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π
**–§–∞–π–ª:** frontend/tests/e2e/checkout.spec.ts
**–°—Ç—Ä–æ–∫–∏:** 181-191, 426-437

---

### 3. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ª–∏—á–∏—è data-testid –∞—Ç—Ä–∏–±—É—Ç–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** –í search-history.spec.ts –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `data-testid="search-field"`:

```typescript
const searchField = page.locator('[data-testid="search-field"]').first();
```

–ù–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç SearchField –º–æ–∂–µ—Ç –Ω–µ –∏–º–µ—Ç—å —ç—Ç–æ–≥–æ –∞—Ç—Ä–∏–±—É—Ç–∞.

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç SearchField –∏ –¥–æ–±–∞–≤–∏—Ç—å data-testid –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π —Å–µ–ª–µ–∫—Ç–æ—Ä.

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π
**–§–∞–π–ª:** frontend/tests/e2e/search-history.spec.ts
**–°—Ç—Ä–æ–∫–∏:** 124, 160, 183, 204, –∏ —Ç.–¥.

---

### 4. –û–∂–∏–¥–∞–Ω–∏–µ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö URL –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–µ—Å—Ç—ã –æ–∂–∏–¥–∞—é—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/search?q=...`:

```typescript
await expect(page).toHaveURL(/\/search\?q=–∫—Ä–æ—Å—Å–æ–≤–∫–∏/);
```

–ù–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥—Ä—É–≥–æ–π —Ä–æ—É—Ç–∏–Ω–≥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/catalog?q=...` –∏–ª–∏ `/catalog/search?q=...`).

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –æ–±–Ω–æ–≤–∏—Ç—å —Ç–µ—Å—Ç—ã.

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π
**–§–∞–π–ª:** frontend/tests/e2e/search-history.spec.ts
**–°—Ç—Ä–æ–∫–∏:** 238, 312

---

### 5. –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ API —Å –Ω–µ–ø–æ–ª–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–æ–∫–∏ API –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ API.

–ù–∞–ø—Ä–∏–º–µ—Ä:
```typescript
body: JSON.stringify({
  items: [mockCartItem],
  total_items: 1,
  total_price: 1000,  // —á–∏—Å–ª–æ, –Ω–æ API –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å—Ç—Ä–æ–∫—É "1000.00"
})
```

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã API –∏ –æ–±–Ω–æ–≤–∏—Ç—å –º–æ–∫–∏ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è.

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π
**–§–∞–π–ª—ã:**
- frontend/tests/e2e/checkout.spec.ts
- frontend/tests/e2e/search-history.spec.ts

---

### 6. –¢–∞–π–º–∞—É—Ç—ã –∏ –æ–∂–∏–¥–∞–Ω–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `page.waitForTimeout(400)`, —á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–º:

```typescript
await page.waitForTimeout(400);  // –ñ–µ—Å—Ç–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ debounce
```

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `page.waitForResponse()` –∏–ª–∏ `expect().toBeVisible()` –≤–º–µ—Å—Ç–æ –∂–µ—Å—Ç–∫–∏—Ö —Ç–∞–π–º–∞—É—Ç–æ–≤.

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π
**–§–∞–π–ª:** frontend/tests/e2e/search-history.spec.ts
**–°—Ç—Ä–æ–∫–∏:** 131, 165, 308, 339

---

### 7. Profile —Ç–µ—Å—Ç—ã –æ–∂–∏–¥–∞—é—Ç API endpoints, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:**

```typescript
await page.route('**/api/v1/users/profile/', async route => {
```

–ù–æ endpoint –º–æ–∂–µ—Ç –±—ã—Ç—å `/api/v1/users/me/` –∏–ª–∏ `/api/v1/profile/`.

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ API endpoints –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π
**–§–∞–π–ª:** frontend/tests/e2e/profile/edit-profile.spec.ts
**–°—Ç—Ä–æ–∫–∏:** 75, 128, 201, 241, 278

---

## –ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. ‚úÖ –°–æ–∑–¥–∞—Ç—å —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –∏—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä—ã
3. ‚úÖ –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –≤ checkout.spec.ts
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å data-testid –∞—Ç—Ä–∏–±—É—Ç—ã –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
5. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å URL –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø–æ–∏—Å–∫–∞
6. üîÑ –ó–∞–º–µ–Ω–∏—Ç—å waitForTimeout –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ–∂–∏–¥–∞–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)
7. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API endpoints

---

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ (2026-01-12)

### ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

#### 1. Input Component (frontend/src/components/ui/Input/Input.tsx:41)
**–ù–∞–π–¥–µ–Ω–æ:** ID –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ `input-${label.toLowerCase().replace(/\s+/g, '-')}`
- `label="Email"` ‚Üí `id="input-email"` ‚úÖ
- `label="–¢–µ–ª–µ—Ñ–æ–Ω"` ‚Üí `id="input-—Ç–µ–ª–µ—Ñ–æ–Ω"` ‚ö†Ô∏è (—Ä—É—Å—Å–∫–∏–µ –±—É–∫–≤—ã)
- `label="–ò–º—è"` ‚Üí `id="input-–∏–º—è"` ‚ö†Ô∏è

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `name` –∞—Ç—Ä–∏–±—É—Ç—ã React Hook Form

#### 2. SearchField (frontend/src/components/ui/SearchField/SearchField.tsx:197)
‚úÖ `data-testid="search-field"` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç

#### 3. SearchHistory (frontend/src/components/business/SearchHistory/SearchHistory.tsx:96)
‚úÖ `data-testid="search-history"` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç

#### 4. URL —Ä–æ—É—Ç–∏–Ω–≥ (frontend/src/components/business/SearchAutocomplete/SearchAutocomplete.tsx:159, 177)
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `/search?q=...` - –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç–µ—Å—Ç–∞–º

#### 5. Profile API (frontend/src/components/business/ProfileForm/ProfileForm.tsx:86, 132)
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `/users/profile/` - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –º–æ–∫–∞–º `**/api/v1/users/profile/`

---

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### ‚úÖ checkout.spec.ts (2 –∏–∑–º–µ–Ω–µ–Ω–∏—è)

**–§–∞–π–ª:** `frontend/tests/e2e/checkout.spec.ts`

1. **–§—É–Ω–∫—Ü–∏—è fillCheckoutForm()** (—Å—Ç—Ä–æ–∫–∏ 178-191):
   ```typescript
   // –î–û:
   await page.fill('#input-—Ç–µ–ª–µ—Ñ–æ–Ω', data.phone);

   // –ü–û–°–õ–ï:
   await page.fill('input[name="phone"]', data.phone);
   ```
   –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ 9 —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ —Å —Ä—É—Å—Å–∫–∏—Ö ID –Ω–∞ `name` –∞—Ç—Ä–∏–±—É—Ç—ã.

2. **–¢–µ—Å—Ç 'validates minimum length for name fields'** (—Å—Ç—Ä–æ–∫–∏ 421-440):
   ```typescript
   // –î–û:
   await page.fill('#input-–∏–º—è', '–ê');

   // –ü–û–°–õ–ï:
   await page.fill('input[name="firstName"]', '–ê');
   ```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- `name` –∞—Ç—Ä–∏–±—É—Ç—ã —Å—Ç–∞–±–∏–ª—å–Ω—ã –∏ –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
- –Ø–≤–ª—è—é—Ç—Å—è —á–∞—Å—Ç—å—é React Hook Form API
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Å–µ–º–∞–Ω—Ç–∏–∫–µ HTML —Ñ–æ—Ä–º

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
2. üîÑ –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã –ª–æ–∫–∞–ª—å–Ω–æ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø –∫ CDN Playwright –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –±—Ä–∞—É–∑–µ—Ä–æ–≤)
3. üîÑ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –ó–∞–º–µ–Ω–∏—Ç—å `waitForTimeout` –Ω–∞ `waitForResponse` –≤ search-history.spec.ts

---

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (‚Ññ1, 2) —Ä–µ—à–µ–Ω—ã ‚úÖ
- –ü—Ä–æ–±–ª–µ–º—ã ‚Ññ3, 4, 5, 7 –æ–∫–∞–∑–∞–ª–∏—Å—å –ª–æ–∂–Ω—ã–º–∏ - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚úÖ
- –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ6 (waitForTimeout) –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–∞ - –º–æ–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ
- –¢–µ—Å—Ç—ã —Ç–µ–ø–µ—Ä—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å —Ä–µ–∞–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
