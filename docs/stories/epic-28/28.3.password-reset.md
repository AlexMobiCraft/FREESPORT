# Story 28.3: Password Reset Flow

**Epic**: [28: Authentication System Implementation](../../epics/epic-28/epic-28-authentication.md)
**Status**: Draft
**Priority**: Medium

## User Story

**As a** user,
**I want** to reset my password if I forget it,
**So that** I can regain access to my account.

## Story Context

**Existing System Integration:**

- **Integrates with**: Backend Password Reset Generic Views (Django)
- **Touch points**:
  - `src/app/(auth)/password-reset/page.tsx` (Request)
  - `src/app/(auth)/password-reset/confirm/[token]/page.tsx` (Confirm)

## Acceptance Criteria

### Functional Requirements

1. **Request Reset:**
   - Input: Email.
   - Action: Sends request to backend to generate link.
   - Feedback: "If an account exists, an email has been sent" (security best practice to avoid user enumeration).

2. **Confirm Reset:**
   - Page accepts `token` and `uid` (or just token) from URL.
   - Inputs: New Password, Confirm New Password.
   - Action: Updates password.
   - On success: Redirects to Login with "Password updated" toast.

3. **Edge Cases:**
   - Invalid/Expired token: Shows clear error message and link to request new reset.

### Integration Requirements

4. Compatible with Django Rest Framework's standard password reset endpoints (or custom auth extensions used).
5. Email templates are handled by Backend, but Frontend provides the route structure expected by the link in the email.

### Quality Requirements

7. Test coverage for the token extraction and form submission.
8. Secure handling of password fields (masked input).

## Technical Notes

- **Integration Approach**: Coordinate with Backend on the exact URL format sent in emails (e.g., `frontend.com/password-reset/confirm/{uid}/{token}`).
- **Key Constraints**:
  - Ensure token handling doesn't leak in history/logs if possible (URL params are visible, but standard practice).

## Definition of Done

- [ ] Request Reset page implemented
- [ ] Confirm Reset page implemented
- [ ] Token handling logic working
- [ ] API integration execution verified
- [ ] Error states (expired token) handled
