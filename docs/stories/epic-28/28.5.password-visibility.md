# Story 28.5: Password Visibility Toggle

**Epic:** [Epic 28: Authentication System Implementation](../epics/epic-28/epic-28-authentication.md)
**Status:** Draft

## User Story

**As a** user (B2C or B2B),
**I want** to toggle the visibility of my password while typing,
**so that** I can ensure I verify the characters I have entered and avoid mistakes.

## Scope

- **Frontend Components:**
  - Update `Input` component (or create a dedicated `PasswordInput` wrapper) to support a visibility toggle.
  - Integrate an "eye" / "eye-off" icon (using Lucide React or existing icon set).
- **Integration:**
  - Update `LoginForm.tsx`
  - Update `RegisterForm.tsx`
  - Update `B2BRegisterForm.tsx` (if applicable)
  - Update `PasswordResetConfirmForm.tsx` (New Password & Confirm Password fields)
  - Update `ProfilePasswordChangeForm` (if exists)

## Acceptance Criteria

1. **Visual Toggle:**
   - All password input fields have a clickable icon (eye/eye-slash) on the right side.
   - Default state is **hidden** (masked characters).
2. **Interaction:**
   - Clicking the icon toggles the input type between `password` and `text`.
   - The icon changes state to reflect the current visibility (e.g., slash for hidden, open eye for visible, or vice versa depending on design system).
3. **Accessibility:**
   - The toggle button refers to the input field via `aria-controls` (optional but good).
   - The button has an `aria-label` that updates ("Показать пароль" / "Скрыть пароль").
   - Breaking changes to tab order are minimized (button should probably be reachable but not annoying).
4. **Security:**
   - Copying text from the field works in both states (browser default behavior).
   - Visibility state is local to the component and resets on unmount.

## Technical Notes

- Check `frontend/src/components/ui/Input/Input.tsx`. If it supports `endDecorator` or `suffix`, use that. If not, add support for `type="password"` specific rendering or create `PasswordInput.tsx`.
- Use existing icons from `lucide-react` (e.g. `Eye`, `EyeOff`).
- Ensure consistent styling with other inputs.

## Dev Notes

- `RegisterForm` uses `react-hook-form`. Ensure the `ref` forwarding works correctly if wrapping the input.
