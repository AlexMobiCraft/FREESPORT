# Story 2.1.1: swagger-documentation-integration-tests

## Status
Ready for Development

## Story
**As a** QA инженер,
**I want** automated integration tests для всех API documentation endpoints,
**so that** я могу быть уверен в стабильности и доступности документации для разработчиков.

## Story Context

**Existing System Integration:**
- Integrates with: drf-spectacular документация уже настроенная в story 2.1
- Technology: pytest + Django test client + drf-spectacular
- Follows pattern: существующие integration тесты в backend/apps/*/tests/
- Touch points: endpoints `/api/docs/`, `/api/redoc/`, `/api/schema/`

## Acceptance Criteria

**Functional Requirements:**
1. Integration тест проверяет доступность Swagger UI по `/api/docs/`
2. Integration тест проверяет доступность ReDoc по `/api/redoc/`  
3. Integration тест проверяет генерацию OpenAPI схемы по `/api/schema/`

**Integration Requirements:**
4. Existing test suite продолжает работать без изменений
5. New тесты следуют existing pytest patterns с @pytest.mark.integration
6. Integration с существующей test infrastructure сохраняет current behavior

**Quality Requirements:**  
7. Тесты покрывают все documentation endpoints
8. Тесты проверяют корректные HTTP status codes и content types
9. No regression в existing functionality verified

## Technical Notes

- **Integration Approach:** Добавление новых integration тестов в apps/common/tests/
- **Existing Pattern Reference:** Использование pytest.mark.integration как в других модулях
- **Key Constraints:** Не должно замедлять существующий test suite

## Testing

- Проверить что `/api/docs/` возвращает 200 и корректный HTML
- Проверить что `/api/redoc/` возвращает 200 и корректный HTML  
- Проверить что `/api/schema/` возвращает 200 и валидный JSON/YAML
- Убедиться что тесты проходят в Docker environment

## Definition of Done

- [ ] Functional requirements met
- [ ] Integration requirements verified  
- [ ] Existing functionality regression tested
- [ ] Code follows existing patterns and standards
- [ ] Tests pass (existing and new)
- [ ] Documentation updated if applicable

## Risk and Compatibility Check

**Minimal Risk Assessment:**
- **Primary Risk:** Новые тесты могут замедлить CI pipeline
- **Mitigation:** Использовать @pytest.mark.integration для селективного запуска
- **Rollback:** Простое удаление новых test файлов

**Compatibility Verification:**
- [x] No breaking changes to existing APIs
- [x] Database changes (if any) are additive only  
- [x] UI changes follow existing design patterns
- [x] Performance impact is negligible

## Validation Checklist

**Scope Validation:**
- [x] Story can be completed in one development session
- [x] Integration approach is straightforward
- [x] Follows existing patterns exactly
- [x] No design or architecture work required

**Clarity Check:**
- [x] Story requirements are unambiguous
- [x] Integration points are clearly specified  
- [x] Success criteria are testable
- [x] Rollback approach is simple

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-01-03 | 1.0 | Initial story creation based on QA feedback for story 2.1 | John (PM) |