# Story 21.2: Frontend сброса пароля

## Status

Planned

## Story

**As a** пользователь, потерявший пароль,
**I want** иметь интерфейс для запроса сброса пароля и ввода нового пароля,
**so that** я мог завершить процедуру восстановления доступа.

## Acceptance Criteria

1. Страница `/password-reset` содержит форму ввода email.
2. При отправке формы отправляется запрос на `POST /api/v1/users/password_reset/`.
3. Пользователю показывается сообщение "Если аккаунт существует, вы получите письмо" (успех), даже если email не найден (security check, хотя API возвращает 200).
4. Страница `/password-reset/confirm/[uid]/[token]` открывается по ссылке из письма.
5. При загрузке страницы `/password-reset/confirm/...` происходит валидация токена (`POST /api/v1/users/password_reset/validate_token/`).
    - Если токен невалиден/истек -> показать ошибку и кнопку "Запросить повторно".
    - Если токен валиден -> показать форму ввода нового пароля.
6. Форма ввода нового пароля содержит два поля (пароль и подтверждение).
7. При отправке формы отправляется запрос на `POST /api/v1/users/password_reset/confirm/`.
8. После успешного сброса -> редирект на `/login` с Toast уведомлением "Пароль успешно изменен".

## Tasks / Subtasks

- [ ] **Task 1: Request Page**
  - [ ] Создать страницу `frontend/src/app/(auth)/password-reset/page.tsx`.
  - [ ] Создать форму `PasswordResetRequestForm` (email validation via Zod).
- [ ] **Task 2: Confirm Page**
  - [ ] Создать страницу `frontend/src/app/(auth)/password-reset/confirm/[uid]/[token]/page.tsx`.
  - [ ] Реализовать проверку токена при маунте (useEffect).
  - [ ] Создать форму `PasswordResetConfirmForm` (new password validation).
- [ ] **Task 3: Integration**
  - [ ] Добавить методы в `authService` (requestReset, validateToken, confirmReset).
  - [ ] Обработка ошибок (400, 404, 410).

## Technical Constraints

- Использовать существующие UI компоненты (Button, Input, Form).
- Zustand `authStore` не требуется для этого флоу (пользователь не залогинен).

## Dev Notes

- Endpoint для запроса: `POST /api/v1/users/password_reset/`
- Endpoint для валидации: `POST /api/v1/users/password_reset/validate_token/`
- Endpoint для подтверждения: `POST /api/v1/users/password_reset/confirm/`
