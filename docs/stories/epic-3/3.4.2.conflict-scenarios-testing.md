# Story 3.4.2: conflict-scenarios-testing

## Status
Ready for Development

## Story
**As a** QA инженер,
**I want** протестировать все типы конфликтов данных,
**so that** убедиться в надежности системы разрешения конфликтов.

## Acceptance Criteria

1. Созданы тесты для конфликтов клиентов
2. Протестированы алгоритмы разрешения конфликтов
3. Проверена работа ручной модерации
4. Тестирование производительности при большом количестве конфликтов
5. Созданы интеграционные тесты (`@pytest.mark.integration`)
6. Используется полная изоляция БД в тестах
7. Покрытие тестами ≥95% кода разрешения конфликтов

### Conflict Test Scenarios:

**Email конфликты:**
- Точное совпадение email
- Case-sensitive дубликаты
- Whitespace в email адресах

**ФИО + телефон конфликты:**
- Точное совпадение ФИО и телефона
- Нечеткое совпадение имен (80-95% схожесть)
- Транслитерация (Иван vs Ivan)
- Сокращения имен (Александр vs Саша)

**Роли конфликты:**
- B2B клиент регистрируется как B2C
- Изменение роли в 1С vs платформе
- Противоречивые типы клиентов

**Данные конфликты:**
- Различающиеся телефоны у одного email
- Разные адреса для одного клиента
- Изменение реквизитов юр.лица

## Definition of Done
- [ ] Все типы конфликтов обрабатываются корректно
- [ ] Система стабильна при 1000+ конфликтах
- [ ] Тесты покрывают ≥95% кода
- [ ] False positive rate <5%

## Story Points
**8** (High complexity due to comprehensive testing)

## Priority
**High** - Критично для надежности системы

## Labels
`epic-3` `conflict-testing` `integration-tests` `reliability` `edge-cases`