# Story 19.1: Компоненты для информационных страниц

<!-- Powered by BMAD™ Core -->

## Status

**Draft**

---

## Story

**As a** разработчик,  
**I want** набор переиспользуемых компонентов для информационных страниц,  
**so that** я могу быстро собирать страницы «О компании», «Партнёрам» и «Доставка».

---

## Acceptance Criteria

1. [ ] Создан компонент `FeatureCard` (вертикальная карточка с иконкой)
2. [ ] Создан компонент `StatCounter` (анимированный счётчик с Intersection Observer)
3. [ ] Создан компонент `ProcessSteps` (шаги процесса «Как начать сотрудничество»)
4. [ ] Создан компонент `Accordion` (FAQ секция с ARIA)
5. [ ] Все компоненты соответствуют дизайн-системе (`design-system.json`)
6. [ ] Компоненты имеют unit-тесты (покрытие ≥ 80%)
7. [ ] Компоненты доступны (WCAG 2.1 AA)

---

## Tasks / Subtasks

### Task 1: Создать компонент FeatureCard (AC: 1, 5, 6, 7)

- [ ] 1.1 Создать папку `frontend/src/components/ui/FeatureCard/`
- [ ] 1.2 Создать `FeatureCard.tsx` с типизацией `FeatureCardProps`
- [ ] 1.3 Создать `FeatureCard.module.css` с использованием CSS-токенов
- [ ] 1.4 Реализовать варианты: `default`, `horizontal`, `compact`
- [ ] 1.5 Добавить hover-эффект (поднятие -2px, shadow-hover)
- [ ] 1.6 Добавить unit-тесты `FeatureCard.test.tsx`

### Task 2: Создать компонент StatCounter (AC: 2, 5, 6, 7)

- [ ] 2.1 Создать папку `frontend/src/components/ui/StatCounter/`
- [ ] 2.2 Создать `StatCounter.tsx` с типизацией `StatCounterProps`
- [ ] 2.3 Реализовать анимацию счётчика с использованием `Intersection Observer` API
- [ ] 2.4 Добавить поддержку `suffix` ("+", "%", "лет" и т.д.)
- [ ] 2.5 Добавить `prefers-reduced-motion` media query для отключения анимации
- [ ] 2.6 Создать `StatCounter.module.css` с анимацией
- [ ] 2.7 Добавить unit-тесты `StatCounter.test.tsx`

### Task 3: Создать компонент ProcessSteps (AC: 3, 5, 6, 7)

- [ ] 3.1 Создать папку `frontend/src/components/ui/ProcessSteps/`
- [ ] 3.2 Создать `ProcessSteps.tsx` с типизацией `ProcessStepsProps`
- [ ] 3.3 Реализовать варианты: `numbered` (по умолчанию), `timeline`
- [ ] 3.4 Добавить responsive-поведение (горизонтально на desktop, вертикально на mobile)
- [ ] 3.5 Создать `ProcessSteps.module.css`
- [ ] 3.6 Добавить unit-тесты `ProcessSteps.test.tsx`

### Task 4: Создать компонент Accordion (AC: 4, 5, 6, 7)

- [ ] 4.1 Создать папку `frontend/src/components/ui/Accordion/`
- [ ] 4.2 Создать `Accordion.tsx` с типизацией `AccordionProps`
- [ ] 4.3 Создать `AccordionItem.tsx` — вложенный компонент для каждого элемента
- [ ] 4.4 Реализовать ARIA-атрибуты: `aria-expanded`, `aria-controls`, `aria-labelledby`
- [ ] 4.5 Добавить поддержку `allowMultiple` (опционально открывать несколько элементов)
- [ ] 4.6 Добавить keyboard navigation (Enter/Space для toggle, Up/Down для навигации)
- [ ] 4.7 Создать `Accordion.module.css` с анимацией (180ms)
- [ ] 4.8 Добавить unit-тесты `Accordion.test.tsx`

### Task 5: Обновить экспорты UI компонентов (AC: 5)

- [ ] 5.1 Добавить экспорты `FeatureCard`, `StatCounter`, `ProcessSteps`, `Accordion` в `frontend/src/components/ui/index.ts`

### Task 6: Запустить линтинг и тесты

- [ ] 6.1 Запустить ESLint (`npm run lint`) и исправить ошибки
- [ ] 6.2 Запустить Vitest (`npm run test`) и убедиться, что все тесты проходят
- [ ] 6.3 Проверить покрытие тестами (`npm run test:coverage`)

---

## Dev Notes

### Существующие компоненты для переиспользования

Следующие компоненты уже существуют и могут быть использованы как референс или для композиции:
[Source: frontend/src/components/ui/index.ts]

| Компонент | Путь | Использование |
|-----------|------|---------------|
| `Card` | `ui/Card/Card.tsx` | Базовый контейнер для карточек |
| `Badge` | `ui/Badge/Badge.tsx` | Бейджи для статусов |
| `InfoPanel` | `ui/InfoPanel/InfoPanel.tsx` | Информационные баннеры |
| `SupportPanel` | `ui/SupportPanel/SupportPanel.tsx` | Панели доставки/наличия |
| `Button` | `ui/Button/Button.tsx` | CTA кнопки |

### Структура файлов

```text
frontend/src/components/ui/
├── FeatureCard/
│   ├── FeatureCard.tsx
│   ├── FeatureCard.module.css
│   ├── FeatureCard.test.tsx
│   └── index.ts
├── StatCounter/
│   ├── StatCounter.tsx
│   ├── StatCounter.module.css
│   ├── StatCounter.test.tsx
│   └── index.ts
├── ProcessSteps/
│   ├── ProcessSteps.tsx
│   ├── ProcessSteps.module.css
│   ├── ProcessSteps.test.tsx
│   └── index.ts
├── Accordion/
│   ├── Accordion.tsx
│   ├── AccordionItem.tsx
│   ├── Accordion.module.css
│   ├── Accordion.test.tsx
│   └── index.ts
└── index.ts (обновить экспорты)
```

### Спецификация компонентов

#### 1. FeatureCard

[Source: docs/frontend/info-pages-spec.md#Component Library]

```typescript
interface FeatureCardProps {
  icon: LucideIcon;        // Иконка из lucide-react
  title: string;           // Заголовок карточки
  description?: string;    // Опциональное описание
  variant?: 'default' | 'horizontal' | 'compact';
  className?: string;      // Дополнительные классы
}
```

**Токены дизайн-системы:**

- `background: var(--color-neutral-100)` (#FFFFFF)
- `radius: 16px` (md)
- `iconSize: 48px`
- `iconBackground: var(--color-primary-subtle)` (#E7F3FF)
- `shadow: var(--shadow-default)` (0 8px 24px rgba(15, 23, 42, 0.08))
- `hoverShadow: var(--shadow-hover)` (0 10px 32px rgba(15, 23, 42, 0.12))

#### 2. StatCounter

[Source: docs/frontend/info-pages-spec.md#Component Library]

```typescript
interface StatCounterProps {
  value: number;           // Числовое значение для анимации (например, 1000)
  suffix?: string;         // Суффикс после числа (например, "+", "%", " лет")
  label: string;           // Подпись под числом (например, "товаров")
  duration?: number;       // Длительность анимации в ms (по умолчанию 2000)
  className?: string;
}
```

**Поведение:**

- Анимация запускается при scroll into view (Intersection Observer с threshold: 0.2)
- Используется `requestAnimationFrame` для плавной анимации
- `prefers-reduced-motion`: показывать финальное значение сразу без анимации

**Типография:**

- Значение: `headline-l` (32px, weight 700)
- Label: `body-s` (14px, weight 500)

#### 3. ProcessSteps

[Source: docs/frontend/info-pages-spec.md#Component Library]

```typescript
interface ProcessStep {
  number: number;          // Номер шага (1, 2, 3...)
  title: string;           // Заголовок шага
  description: string;     // Описание шага
}

interface ProcessStepsProps {
  steps: ProcessStep[];
  variant?: 'numbered' | 'timeline';
  className?: string;
}
```

**Layout:**

- Desktop: горизонтальный (flex-direction: row)
- Mobile (< 640px): вертикальный (flex-direction: column)
- Разделители между шагами: стрелки "→" или линия для timeline

**Токены:**

- Номер шага: `primary` (#0060FF), круг 40px
- Заголовок: `title-m` (20px, weight 600)
- Описание: `body-m` (16px, weight 500, color text-secondary)

#### 4. Accordion

[Source: docs/frontend/info-pages-spec.md#Component Library]

```typescript
interface AccordionItem {
  question: string;        // Вопрос (заголовок)
  answer: string;          // Ответ (содержимое)
  id?: string;             // Опциональный ID для ARIA
}

interface AccordionProps {
  items: AccordionItem[];
  allowMultiple?: boolean; // Разрешить открывать несколько элементов одновременно
  defaultOpenIndex?: number; // Индекс элемента, открытого по умолчанию
  className?: string;
}
```

**ARIA:**

- `role="region"` на контейнере
- `aria-expanded` на кнопке (true/false)
- `aria-controls` = ID контента
- `aria-labelledby` = ID заголовка
- Иконка: `ChevronDown` из lucide-react, поворот на 180° при открытии

**Анимация:**

- Duration: 180ms
- Easing: `cubic-bezier(0.4, 0, 0.2, 1)`
- Transition: `max-height`, `opacity`

### CSS-переменные

Все компоненты должны использовать CSS-переменные из `globals.css`:
[Source: docs/frontend/design-system.json]

```css
/* Цвета */
--color-primary: #0060FF;
--color-primary-hover: #0047CC;
--color-primary-subtle: #E7F3FF;
--color-neutral-100: #FFFFFF;
--color-neutral-200: #F5F7FB;
--color-neutral-300: #E3E8F2;
--color-text-primary: #1F2A44;
--color-text-secondary: #4B5C7A;

/* Тени */
--shadow-default: 0 8px 24px rgba(15, 23, 42, 0.08);
--shadow-hover: 0 10px 32px rgba(15, 23, 42, 0.12);

/* Радиусы */
--radius-sm: 6px;
--radius-default: 12px;
--radius-md: 16px;
--radius-lg: 20px;

/* Анимация */
--duration-short: 120ms;
--duration-medium: 180ms;
--easing: cubic-bezier(0.4, 0, 0.2, 1);
```

### Иконки (lucide-react)

[Source: docs/frontend/info-pages-spec.md#Branding & Style Guide]

Рекомендуемые иконки для использования:

- `Factory`, `Truck`, `Handshake`, `Package` — преимущества
- `MapPin`, `Phone`, `Mail` — контакты
- `Store`, `Globe`, `Dumbbell`, `Heart`, `Trophy`, `GraduationCap` — типы клиентов
- `ChevronDown` — Accordion
- `Check`, `Zap`, `Shield`, `Lightbulb`, `Award` — ценности

### Доступность (WCAG 2.1 AA)

[Source: docs/frontend/info-pages-spec.md#Accessibility]

- Контраст текста ≥ 4.5:1
- Focus индикаторы на всех интерактивных элементах
- Keyboard navigation для Accordion
- `prefers-reduced-motion` для анимаций

---

## Testing

### Стандарты тестирования

[Source: docs/architecture/coding-standards.md#Тестирование]

- **Framework:** Vitest 2.1.5 + React Testing Library 16.3.0
- **Расположение тестов:** рядом с компонентом (`*.test.tsx`)
- **Минимальное покрытие:** 80% для новых компонентов

### Ключевые тест-кейсы

**FeatureCard:**

```typescript
describe('FeatureCard', () => {
  it('renders title and description');
  it('displays icon correctly');
  it('applies variant styles (default, horizontal, compact)');
  it('applies hover effect on mouse enter');
});
```

**StatCounter:**

```typescript
describe('StatCounter', () => {
  it('renders initial value of 0');
  it('animates to target value when in viewport');
  it('respects prefers-reduced-motion');
  it('displays suffix correctly');
});
```

**ProcessSteps:**

```typescript
describe('ProcessSteps', () => {
  it('renders all steps in order');
  it('displays step numbers correctly');
  it('switches to vertical layout on mobile');
  it('supports numbered and timeline variants');
});
```

**Accordion:**

```typescript
describe('Accordion', () => {
  it('renders all items collapsed by default');
  it('expands item on click');
  it('collapses other items when allowMultiple is false');
  it('supports keyboard navigation (Enter, Space, Arrow keys)');
  it('has correct ARIA attributes');
});
```

### Mock данные для тестов

```typescript
// FeatureCard
const mockFeatureCard = {
  icon: Factory,
  title: 'Собственное производство',
  description: 'Контроль качества на всех этапах',
};

// StatCounter
const mockStatCounter = {
  value: 1000,
  suffix: '+',
  label: 'товаров',
};

// ProcessSteps
const mockSteps = [
  { number: 1, title: 'Подайте заявку', description: 'На сайте или по телефону' },
  { number: 2, title: 'Получите доступ', description: 'К оптовым ценам' },
  { number: 3, title: 'Работайте', description: 'С персональным менеджером' },
];

// Accordion
const mockFAQ = [
  { question: 'Какие документы нужны?', answer: 'ИНН, ОГРН, реквизиты' },
  { question: 'Как происходит оплата?', answer: 'По безналичному расчёту' },
];
```

### Команды для запуска тестов

```bash
# Запуск всех тестов
npm run test

# Запуск тестов для конкретного компонента
npm run test -- FeatureCard

# Запуск с покрытием
npm run test:coverage

# Watch режим
npm run test -- --watch
```

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-22 | 1.0 | Начальный черновик истории | Bob (SM) |

---

## Dev Agent Record

### Agent Model Used

_To be filled by Dev Agent_

### Debug Log References

_To be filled by Dev Agent_

### Completion Notes List

_To be filled by Dev Agent_

### File List

_To be filled by Dev Agent_

---

## QA Results

_To be filled by QA Agent_
