# Story 13.5a: ProductOptions UI component —Å MSW mock

## Status
Done

## Story
**–ö–∞–∫** Frontend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫,
**–Ø —Ö–æ—á—É** —Å–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç ProductOptions —Å mock-–¥–∞–Ω–Ω—ã–º–∏ –∏–∑ MSW,
**–ß—Ç–æ–±—ã** –Ω–∞—á–∞—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É UI –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å backend –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å UX.

## Acceptance Criteria

1. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `ProductOptions.tsx` —Å–æ–∑–¥–∞–Ω –≤ `src/components/product/`
2. –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å–µ–ª–µ–∫—Ç–æ—Ä—ã —Ä–∞–∑–º–µ—Ä–æ–≤ (Size) –∫–∞–∫ –≥—Ä—É–ø–ø–∞ Chip –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
3. –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å–µ–ª–µ–∫—Ç–æ—Ä—ã —Ü–≤–µ—Ç–æ–≤ (Color) –∫–∞–∫ –≥—Ä—É–ø–ø–∞ Chip —Å —Ü–≤–µ—Ç–æ–≤—ã–º–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏
4. –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ –æ–ø—Ü–∏–∏ (is_available: false) –≤–∏–∑—É–∞–ª—å–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω—ã (opacity 0.5, disabled)
5. –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –æ–ø—Ü–∏—é –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ `selectedOptions`
6. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º—É: Chip styles –∏–∑ front-end-spec.md
7. MSW mock –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è `/products/{slug}/` —Å variants –¥–∞–Ω–Ω—ã–º–∏
8. –ù–∞–ø–∏—Å–∞–Ω—ã unit —Ç–µ—Å—Ç—ã (Vitest + RTL) –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

## Integration Verification
- IV1: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/catalog/[category]/[slug]`
- IV2: –°—Ç–∏–ª–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–µ
- IV3: MSW mock –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ–≥–æ API –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞

## Tasks / Subtasks

- [x] –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç ProductOptions.tsx (AC: 1, 2, 3)
  - [x] –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `src/components/product/ProductOptions.tsx`
  - [x] –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å Chip –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–∑ UI kit
  - [x] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `ProductOptionsProps`:
    ```typescript
    interface ProductOptionsProps {
      variants: ProductVariant[];
      selectedOptions: SelectedOptions;
      onSelectionChange: (options: SelectedOptions) => void;
    }
    ```
  - [x] –°–æ–∑–¥–∞—Ç—å state –¥–ª—è `selectedOptions` —á–µ—Ä–µ–∑ useState
  - [x] –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≥—Ä—É–ø–ø—É Size —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ (Chip –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
  - [x] –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≥—Ä—É–ø–ø—É Color —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ (Chip —Å —Ü–≤–µ—Ç–æ–≤—ã–º–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏)

- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –≤—ã–±–æ—Ä–∞ –æ–ø—Ü–∏–π (AC: 4, 5)
  - [x] –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `handleSizeClick(size: string)`
  - [x] –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `handleColorClick(color: string)`
  - [x] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ state `selectedOptions` –ø—Ä–∏ –∫–ª–∏–∫–µ
  - [x] –í—ã–∑–æ–≤ callback `onSelectionChange(newOptions)`
  - [x] Disabled state –¥–ª—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö –æ–ø—Ü–∏–π (is_available: false)

- [x] –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å—Ç–∏–ª–∏ –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º—ã (AC: 6, IV2)
  - [x] Chip Default: `bg-neutral-100`, `border-neutral-400`
  - [x] Chip Selected: `bg-primary`, `text-inverse`
  - [x] Chip Disabled: `opacity-50`, `cursor-not-allowed`
  - [x] Spacing: 24px –º–µ–∂–¥—É –≥—Ä—É–ø–ø–∞–º–∏, 8px –º–µ–∂–¥—É Chip
  - [x] Typography: Montserrat 600 14px –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –≥—Ä—É–ø–ø
  - [x] –¶–≤–µ—Ç–æ–≤—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã: –∫—Ä—É–≥–ª—ã–π 16px —Å border 2px

- [x] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å MSW mock –¥–ª—è API (AC: 7, IV3)
  - [x] –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `src/__mocks__/handlers/products.ts`
  - [x] –î–æ–±–∞–≤–∏—Ç—å handler –¥–ª—è `GET /api/products/:slug/`
  - [x] Mock response —Å –º–∞—Å—Å–∏–≤–æ–º `variants`:
    ```typescript
    {
      id: 1,
      name: "–ö—Ä–æ—Å—Å–æ–≤–∫–∏ Nike Air Max",
      slug: "nike-air-max",
      variants: [
        {
          id: 1,
          sku: "NIKE-AM-RED-42",
          color_name: "–ö—Ä–∞—Å–Ω—ã–π",
          color_hex: "#FF0000",
          size_value: "42",
          current_price: "5990.00",
          stock_quantity: 15,
          is_in_stock: true,
          available_quantity: 15,
        },
        // ... –¥—Ä—É–≥–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
      ]
    }
    ```
  - [x] –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å handler –≤ MSW server

- [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ProductSummary (AC: 5, IV1)
  - [x] –ü–µ—Ä–µ–¥–∞—Ç—å callback `onSelectionChange` –∏–∑ ProductSummary –≤ ProductOptions
  - [x] –û–±–Ω–æ–≤–ª—è—Ç—å `selectedVariant` –≤ ProductSummary –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤—ã–±–æ—Ä–∞
  - [x] –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å ProductOptions –≤–Ω—É—Ç—Ä–∏ ProductSummary (—Å–æ–≥–ª–∞—Å–Ω–æ Story 12.2)

- [x] –ù–∞–ø–∏—Å–∞—Ç—å unit —Ç–µ—Å—Ç—ã Vitest + RTL (AC: 8)
  - [x] –¢–µ—Å—Ç: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —Å —Å–µ–ª–µ–∫—Ç–æ—Ä–∞–º–∏ —Ä–∞–∑–º–µ—Ä–æ–≤
  - [x] –¢–µ—Å—Ç: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —Å —Å–µ–ª–µ–∫—Ç–æ—Ä–∞–º–∏ —Ü–≤–µ—Ç–æ–≤
  - [x] –¢–µ—Å—Ç: –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ –æ–ø—Ü–∏–∏ –≤–∏–∑—É–∞–ª—å–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω—ã (opacity-50)
  - [x] –¢–µ—Å—Ç: –∫–ª–∏–∫ –Ω–∞ —Ä–∞–∑–º–µ—Ä –æ–±–Ω–æ–≤–ª—è–µ—Ç selectedOptions
  - [x] –¢–µ—Å—Ç: –∫–ª–∏–∫ –Ω–∞ —Ü–≤–µ—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç selectedOptions
  - [x] –¢–µ—Å—Ç: callback onSelectionChange –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –≤—ã–±–æ—Ä–µ
  - [x] –¢–µ—Å—Ç: disabled –æ–ø—Ü–∏–∏ –Ω–µ —Ä–µ–∞–≥–∏—Ä—É—é—Ç –Ω–∞ –∫–ª–∏–∫
  - [x] –¢–µ—Å—Ç: –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º—ã

- [x] Accessibility –ø—Ä–æ–≤–µ—Ä–∫–∞ (AC: 6)
  - [x] role="radio" –¥–ª—è Chip –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
  - [x] aria-checked –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –æ–ø—Ü–∏–π
  - [x] aria-disabled –¥–ª—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö –æ–ø—Ü–∏–π
  - [x] Keyboard navigation (Tab, Enter, Space)

- [x] –ü—Ä–æ–≤–µ—Ä–∫–∞ Integration Verification (IV1, IV2, IV3)
  - [x] IV1: ProductOptions —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ç–æ–≤–∞—Ä–∞ –±–µ–∑ –æ—à–∏–±–æ–∫
  - [x] IV2: –°—Ç–∏–ª–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç Chip –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É –∏–∑ –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º—ã
  - [x] IV3: MSW mock –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–æ–≥–ª–∞—Å–Ω–æ ProductVariantSchema

## Dev Notes

### Relevant Source Tree
```
frontend/src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ product/
‚îÇ       ‚îú‚îÄ‚îÄ ProductOptions.tsx       (NEW)
‚îÇ       ‚îú‚îÄ‚îÄ ProductSummary.tsx       (UPDATE - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
‚îÇ       ‚îî‚îÄ‚îÄ __tests__/
‚îÇ           ‚îî‚îÄ‚îÄ ProductOptions.test.tsx  (NEW)
‚îú‚îÄ‚îÄ __mocks__/
‚îÇ   ‚îî‚îÄ‚îÄ handlers/
‚îÇ       ‚îî‚îÄ‚îÄ products.ts              (UPDATE - MSW mock)
‚îî‚îÄ‚îÄ types/
    ‚îî‚îÄ‚îÄ product.ts                   (NEW - –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ç–∏–ø—ã –¥–æ api.generated.ts)
```

### ProductOptions Component Implementation

**–ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:**

```typescript
// src/components/product/ProductOptions.tsx
'use client';

import React, { useState } from 'react';
import { Chip } from '@/components/ui/Chip';

export interface ProductVariant {
  id: number;
  sku: string;
  color_name?: string;
  color_hex?: string | null;
  size_value?: string;
  current_price: string;
  stock_quantity: number;
  is_in_stock: boolean;
  available_quantity: number;
}

export interface SelectedOptions {
  size?: string;
  color?: string;
}

export interface ProductOptionsProps {
  variants: ProductVariant[];
  selectedOptions: SelectedOptions;
  onSelectionChange: (options: SelectedOptions) => void;
}

export const ProductOptions: React.FC<ProductOptionsProps> = ({
  variants,
  selectedOptions,
  onSelectionChange,
}) => {
  // –ò–∑–≤–ª–µ—á—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –∏ —Ü–≤–µ—Ç–∞
  const sizes = [...new Set(variants.map(v => v.size_value).filter(Boolean))];
  const colors = [...new Set(variants.map(v => v.color_name).filter(Boolean))];

  const handleSizeClick = (size: string) => {
    const newOptions = { ...selectedOptions, size };
    onSelectionChange(newOptions);
  };

  const handleColorClick = (color: string) => {
    const newOptions = { ...selectedOptions, color };
    onSelectionChange(newOptions);
  };

  // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –æ–ø—Ü–∏–∏
  const isSizeAvailable = (size: string) => {
    return variants.some(
      v => v.size_value === size && v.is_in_stock
    );
  };

  const isColorAvailable = (color: string) => {
    return variants.some(
      v => v.color_name === color && v.is_in_stock
    );
  };

  return (
    <div className="space-y-6">
      {/* –°–µ–ª–µ–∫—Ç–æ—Ä —Ä–∞–∑–º–µ—Ä–æ–≤ */}
      {sizes.length > 0 && (
        <div className="space-y-2">
          <h3 className="text-sm font-semibold font-montserrat">–†–∞–∑–º–µ—Ä</h3>
          <div className="flex flex-wrap gap-2">
            {sizes.map((size) => {
              const available = isSizeAvailable(size);
              const selected = selectedOptions.size === size;

              return (
                <Chip
                  key={size}
                  label={size}
                  selected={selected}
                  disabled={!available}
                  onClick={() => available && handleSizeClick(size)}
                  role="radio"
                  aria-checked={selected}
                  aria-disabled={!available}
                />
              );
            })}
          </div>
        </div>
      )}

      {/* –°–µ–ª–µ–∫—Ç–æ—Ä —Ü–≤–µ—Ç–æ–≤ */}
      {colors.length > 0 && (
        <div className="space-y-2">
          <h3 className="text-sm font-semibold font-montserrat">–¶–≤–µ—Ç</h3>
          <div className="flex flex-wrap gap-2">
            {colors.map((color) => {
              const variant = variants.find(v => v.color_name === color);
              const available = isColorAvailable(color);
              const selected = selectedOptions.color === color;

              return (
                <Chip
                  key={color}
                  label={color}
                  selected={selected}
                  disabled={!available}
                  onClick={() => available && handleColorClick(color)}
                  colorHex={variant?.color_hex || undefined}
                  role="radio"
                  aria-checked={selected}
                  aria-disabled={!available}
                />
              );
            })}
          </div>
        </div>
      )}
    </div>
  );
};
```

### MSW Mock Handler

**src/__mocks__/handlers/products.ts:**

```typescript
import { http, HttpResponse } from 'msw';

export const productHandlers = [
  http.get('/api/products/:slug/', ({ params }) => {
    const { slug } = params;

    // Mock data —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏
    const mockProduct = {
      id: 1,
      name: '–ö—Ä–æ—Å—Å–æ–≤–∫–∏ Nike Air Max',
      slug: slug,
      description: '–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞',
      variants: [
        {
          id: 1,
          sku: 'NIKE-AM-RED-42',
          color_name: '–ö—Ä–∞—Å–Ω—ã–π',
          color_hex: '#FF0000',
          size_value: '42',
          current_price: '5990.00',
          stock_quantity: 15,
          is_in_stock: true,
          available_quantity: 15,
        },
        {
          id: 2,
          sku: 'NIKE-AM-RED-43',
          color_name: '–ö—Ä–∞—Å–Ω—ã–π',
          color_hex: '#FF0000',
          size_value: '43',
          current_price: '5990.00',
          stock_quantity: 0,
          is_in_stock: false,
          available_quantity: 0,
        },
        {
          id: 3,
          sku: 'NIKE-AM-BLUE-42',
          color_name: '–°–∏–Ω–∏–π',
          color_hex: '#0000FF',
          size_value: '42',
          current_price: '5990.00',
          stock_quantity: 10,
          is_in_stock: true,
          available_quantity: 10,
        },
      ],
    };

    return HttpResponse.json(mockProduct);
  }),
];
```

### Chip Component Props

**–ù–∞ –æ—Å–Ω–æ–≤–µ –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º—ã front-end-spec.md:**

```typescript
interface ChipProps {
  label: string;
  selected?: boolean;
  disabled?: boolean;
  onClick?: () => void;
  colorHex?: string;  // –î–ª—è —Ü–≤–µ—Ç–æ–≤–æ–≥–æ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
  role?: string;
  'aria-checked'?: boolean;
  'aria-disabled'?: boolean;
}
```

**Chip CSS (Tailwind):**

```css
/* Default state */
.chip-default {
  @apply bg-neutral-100 border border-neutral-400 rounded-2xl px-4 py-2;
}

/* Selected state */
.chip-selected {
  @apply bg-primary text-inverse border-primary;
}

/* Disabled state */
.chip-disabled {
  @apply opacity-50 cursor-not-allowed;
}
```

### Vitest + RTL Tests

**src/components/product/__tests__/ProductOptions.test.tsx:**

```typescript
import { describe, it, expect, vi } from 'vitest';
import { render, screen, fireEvent } from '@testing-library/react';
import { ProductOptions, ProductVariant, SelectedOptions } from '../ProductOptions';

const mockVariants: ProductVariant[] = [
  {
    id: 1,
    sku: 'TEST-RED-42',
    color_name: '–ö—Ä–∞—Å–Ω—ã–π',
    color_hex: '#FF0000',
    size_value: '42',
    current_price: '5990.00',
    stock_quantity: 15,
    is_in_stock: true,
    available_quantity: 15,
  },
  {
    id: 2,
    sku: 'TEST-RED-43',
    color_name: '–ö—Ä–∞—Å–Ω—ã–π',
    color_hex: '#FF0000',
    size_value: '43',
    current_price: '5990.00',
    stock_quantity: 0,
    is_in_stock: false,
    available_quantity: 0,
  },
];

describe('ProductOptions', () => {
  it('renders size selectors', () => {
    const onSelectionChange = vi.fn();
    render(
      <ProductOptions
        variants={mockVariants}
        selectedOptions={{}}
        onSelectionChange={onSelectionChange}
      />
    );

    expect(screen.getByText('42')).toBeInTheDocument();
    expect(screen.getByText('43')).toBeInTheDocument();
  });

  it('renders color selectors', () => {
    const onSelectionChange = vi.fn();
    render(
      <ProductOptions
        variants={mockVariants}
        selectedOptions={{}}
        onSelectionChange={onSelectionChange}
      />
    );

    expect(screen.getAllByText('–ö—Ä–∞—Å–Ω—ã–π')).toHaveLength(1);
  });

  it('disables unavailable options', () => {
    const onSelectionChange = vi.fn();
    render(
      <ProductOptions
        variants={mockVariants}
        selectedOptions={{}}
        onSelectionChange={onSelectionChange}
      />
    );

    const size43Chip = screen.getByText('43');
    expect(size43Chip).toHaveClass('opacity-50');
    expect(size43Chip).toHaveAttribute('aria-disabled', 'true');
  });

  it('updates selected options on size click', () => {
    const onSelectionChange = vi.fn();
    render(
      <ProductOptions
        variants={mockVariants}
        selectedOptions={{}}
        onSelectionChange={onSelectionChange}
      />
    );

    const size42Chip = screen.getByText('42');
    fireEvent.click(size42Chip);

    expect(onSelectionChange).toHaveBeenCalledWith({ size: '42' });
  });

  it('does not call callback for disabled options', () => {
    const onSelectionChange = vi.fn();
    render(
      <ProductOptions
        variants={mockVariants}
        selectedOptions={{}}
        onSelectionChange={onSelectionChange}
      />
    );

    const size43Chip = screen.getByText('43');
    fireEvent.click(size43Chip);

    expect(onSelectionChange).not.toHaveBeenCalled();
  });
});
```

### Design System Reference

**–ò–∑ front-end-spec.md:**

#### Chip Component Specs

- **Border radius:** 16px
- **Padding:** 8px 16px
- **Typography:** Open Sans 400 14px
- **Default:** bg-neutral-100, border-neutral-400
- **Selected:** bg-primary (#004DFF), text-inverse (#FFFFFF)
- **Disabled:** opacity 0.5, cursor not-allowed
- **Hover:** border-color: primary
- **Active:** scale(0.95)

#### Color Indicator Specs

- **Size:** 16px –∫—Ä—É–≥–ª—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
- **Border:** 2px solid (border-neutral-400)
- **Position:** Inline —Å–ª–µ–≤–∞ –æ—Ç —Ç–µ–∫—Å—Ç–∞

#### Spacing

- **Between groups:** 24px (space-y-6)
- **Between chips:** 8px (gap-2)
- **From gallery:** 32px margin-top

### Testing Standards

**–ò–∑ CLAUDE.md Section: Frontend —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**

#### Test file location
- `frontend/src/components/product/__tests__/ProductOptions.test.tsx`

#### Test frameworks
- **Framework:** Vitest 2.1.5
- **UI Testing:** React Testing Library 16.3.0
- **Mocking:** MSW 2.12.2

#### Coverage requirements
- **Minimum coverage:** >= 80% –¥–ª—è –Ω–æ–≤–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- **Command:** `npm run test:coverage`

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-11-30 | 1.0 | –°–æ–∑–¥–∞–Ω–∏–µ Story 13.5a –Ω–∞ –æ—Å–Ω–æ–≤–µ Epic 13 PRD | Sarah (PO) |

## Dev Agent Record
(–ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è dev-–∞–≥–µ–Ω—Ç–æ–º)

## QA Results

### Review Date: 2025-12-02

### Reviewed By: Quinn (Test Architect)

### Review Type: Pre-Implementation Architecture Review

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** Story –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å—Ç–∞—Ç—É—Å–µ Draft. –î–∞–Ω–Ω—ã–π review —è–≤–ª—è–µ—Ç—Å—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–º pre-review –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

### –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞

–ü—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ, —á—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç **—É–∂–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω**:

| –ê—Ä—Ç–µ—Ñ–∞–∫—Ç | –°—Ç–∞—Ç—É—Å | –ü—É—Ç—å |
|----------|--------|------|
| ProductOptions.tsx | ‚úÖ –°–æ–∑–¥–∞–Ω | `frontend/src/components/product/ProductOptions.tsx` |
| ProductOptions.test.tsx | ‚úÖ –°–æ–∑–¥–∞–Ω | `frontend/src/components/product/__tests__/ProductOptions.test.tsx` |
| MSW handlers | ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã | `frontend/src/__mocks__/api/handlers.ts` |
| ProductSummary –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è | ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–∞ | `frontend/src/components/product/ProductSummary.tsx` |
| Mock –¥–∞–Ω–Ω—ã–µ | ‚úÖ –°–æ–∑–¥–∞–Ω—ã | `frontend/src/__mocks__/productDetail.ts` |

### Code Quality Assessment

**–û—Ü–µ–Ω–∫–∞: –û—Ç–ª–∏—á–Ω–æ (A)**

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞:

- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞–∑–¥–µ–ª–µ–Ω –Ω–∞ `OptionChip` (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π) –∏ `ProductOptions` (–ø—É–±–ª–∏—á–Ω—ã–π)
- **–¢–∏–ø–∏–∑–∞—Ü–∏—è:** –ü–æ–ª–Ω–∞—è TypeScript —Ç–∏–ø–∏–∑–∞—Ü–∏—è —Å —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–º–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `useMemo` –∏ `useCallback` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ª–∏—à–Ω–∏—Ö —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–æ–≤
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ñ—É–Ω–∫—Ü–∏–π –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### Refactoring Performed

–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è ‚Äî –∫–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –ø—Ä–æ–µ–∫—Ç–∞.

### Compliance Check

- **Coding Standards:** ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç `docs/architecture/coding-standards.md`
- **Project Structure:** ‚úÖ –§–∞–π–ª—ã —Ä–∞–∑–º–µ—â–µ–Ω—ã —Å–æ–≥–ª–∞—Å–Ω–æ `docs/architecture/source-tree.md`
- **Testing Strategy:** ‚úÖ 37 unit —Ç–µ—Å—Ç–æ–≤ –ø–æ–∫—Ä—ã–≤–∞—é—Ç –≤—Å–µ AC
- **All ACs Met:** ‚úÖ –í—Å–µ 8 Acceptance Criteria –≤—ã–ø–æ–ª–Ω–µ–Ω—ã

### Acceptance Criteria Validation

| AC | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ |
|----|----------|--------|----------------|
| 1 | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω –≤ `src/components/product/` | ‚úÖ | `ProductOptions.tsx` (291 —Å—Ç—Ä–æ–∫–∞) |
| 2 | –°–µ–ª–µ–∫—Ç–æ—Ä—ã —Ä–∞–∑–º–µ—Ä–æ–≤ –∫–∞–∫ Chip | ‚úÖ | `sizes.map()` —Å `OptionChip` |
| 3 | –°–µ–ª–µ–∫—Ç–æ—Ä—ã —Ü–≤–µ—Ç–æ–≤ —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏ | ‚úÖ | `colorHex` prop + —Ü–≤–µ—Ç–æ–≤–æ–π –∫—Ä—É–≥ 16px |
| 4 | Disabled state (opacity 0.5) | ‚úÖ | `disabled && 'opacity-50 cursor-not-allowed'` |
| 5 | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ selectedOptions | ‚úÖ | `handleSizeClick`, `handleColorClick` |
| 6 | –î–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–∞ Chip | ‚úÖ | `rounded-2xl`, `px-4 py-2`, `space-y-6`, `gap-2` |
| 7 | MSW mock –Ω–∞—Å—Ç—Ä–æ–µ–Ω | ‚úÖ | Handler –¥–ª—è `nike-air-max` —Å `MOCK_PRODUCT_WITH_VARIANTS` |
| 8 | Unit —Ç–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã | ‚úÖ | 37 —Ç–µ—Å—Ç–æ–≤ –≤ `ProductOptions.test.tsx` |

### Test Results

```
‚úì ProductOptions (37 tests) - 517ms
  ‚úì –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ (7)
  ‚úì Disabled state (AC: 4) (4)
  ‚úì –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ (AC: 5) (5)
  ‚úì Selected state (3)
  ‚úì Accessibility (AC: 6) (9)
  ‚úì –°—Ç–∏–ª–∏ –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º—ã (AC: 6, IV2) (6)
  ‚úì Edge cases (3)
```

### Accessibility Review

‚úÖ **–ü–æ–ª–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ WCAG 2.1 AA:**

- `role="radiogroup"` –¥–ª—è –≥—Ä—É–ø–ø –æ–ø—Ü–∏–π
- `role="radio"` –¥–ª—è –∫–∞–∂–¥–æ–π –æ–ø—Ü–∏–∏
- `aria-checked` –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö
- `aria-disabled` –¥–ª—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö
- `aria-label` –¥–ª—è –≥—Ä—É–ø–ø ("–í—ã–±–æ—Ä —Ä–∞–∑–º–µ—Ä–∞", "–í—ã–±–æ—Ä —Ü–≤–µ—Ç–∞")
- Keyboard navigation (Enter, Space)
- `tabIndex=-1` –¥–ª—è disabled –æ–ø—Ü–∏–π

### Security Review

‚úÖ –ù–µ—Ç security concerns ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ç–æ–ª—å–∫–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ, –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –≤–≤–æ–¥.

### Performance Considerations

‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
- `useMemo` –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö sizes/colors
- `useCallback` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
- –£—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –ø—Ä–∏ –ø—É—Å—Ç—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–∞—Ö

### Improvements Checklist

- [x] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç ProductOptions —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- [x] –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π OptionChip —Å accessibility
- [x] MSW mock –¥–ª—è /api/products/:slug/
- [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ProductSummary
- [x] 37 unit —Ç–µ—Å—Ç–æ–≤
- [ ] –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã ProductSummary + ProductOptions
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è MSW handlers –≤ –∏–∑–æ–ª—è—Ü–∏–∏

### Files Modified During Review

–ù–µ—Ç ‚Äî –∫–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º, —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –Ω–µ —Ç—Ä–µ–±–æ–≤–∞–ª—Å—è.

### Gate Status

**Gate: PASS** ‚Üí `docs/qa/gates/13.5a-productoptions-ui-msw-mock.yml`

### Recommended Status

**‚úÖ Ready for Done**

Story –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å "Draft" –Ω–∞ "Done".

---

### Review Date: 2025-12-03

### Reviewed By: Quinn (Test Architect)

### Review Type: Comprehensive Quality Gate Review

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü—Ä–æ–≤–µ–¥–µ–Ω –ø–æ–ª–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π review –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Story 13.5a.

### Code Quality Assessment

**–û—Ü–µ–Ω–∫–∞: –û—Ç–ª–∏—á–Ω–æ (A+)**

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç **–∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞** –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö:

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–∞:**
- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è:** –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π `OptionChip` –∏ –ø—É–±–ª–∏—á–Ω—ã–π `ProductOptions` –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—é –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ—Å—Ç—å
- ‚úÖ **TypeScript best practices:** –≠–∫—Å–ø–æ—Ä—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ (`ProductVariant`, `SelectedOptions`) –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ **Performance optimization:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `useMemo` –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –æ–ø—Ü–∏–π –∏ `useCallback` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
- ‚úÖ **Accessibility-first design:** –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ WCAG 2.1 AA —Å `role="radiogroup"`, `aria-*` –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏ –∏ keyboard navigation

**–ö–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –ø—Ä–æ–µ–∫—Ç–∞:**
- ‚úÖ JSDoc –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ –≤—Å–µ—Ö –ø—É–±–ª–∏—á–Ω—ã—Ö API
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ TypeScript —Ç–∏–ø–æ–≤ –∏–∑ `api.generated.ts`
- ‚úÖ Design System v2.0 compliance (—Å—Ç–∏–ª–∏, spacing, —Ü–≤–µ—Ç–∞)
- ‚úÖ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ edge cases (–ø—É—Å—Ç—ã–µ –º–∞—Å—Å–∏–≤—ã, null values, –¥—É–±–ª–∏–∫–∞—Ç—ã)

### Refactoring Performed

**–ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è** ‚Äî –∫–æ–¥ —É–∂–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤—Å–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –∫–∞—á–µ—Å—Ç–≤–∞ –ø—Ä–æ–µ–∫—Ç–∞.

### Compliance Check

- **Coding Standards:** ‚úÖ –ü–æ–ª–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ [coding-standards.md](../../architecture/coding-standards.md)
- **Project Structure:** ‚úÖ –§–∞–π–ª—ã —Ä–∞–∑–º–µ—â–µ–Ω—ã —Å–æ–≥–ª–∞—Å–Ω–æ [source-tree.md](../../architecture/source-tree.md)
- **Testing Strategy:** ‚úÖ 37 unit —Ç–µ—Å—Ç–æ–≤ –ø–æ–∫—Ä—ã–≤–∞—é—Ç –≤—Å–µ AC –∏ Integration Verification —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **All ACs Met:** ‚úÖ –í—Å–µ 8 Acceptance Criteria –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã

### Acceptance Criteria Validation

| AC | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ |
|----|----------|--------|----------------|
| 1 | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω –≤ `src/components/product/` | ‚úÖ PASS | [ProductOptions.tsx:284](../../../frontend/src/components/product/ProductOptions.tsx) —Å–æ–∑–¥–∞–Ω –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω |
| 2 | –°–µ–ª–µ–∫—Ç–æ—Ä—ã —Ä–∞–∑–º–µ—Ä–æ–≤ –∫–∞–∫ Chip –≥—Ä—É–ø–ø–∞ | ‚úÖ PASS | –°—Ç—Ä–æ–∫–∏ 232-253: `sizes.map()` —Å `OptionChip` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ |
| 3 | –°–µ–ª–µ–∫—Ç–æ—Ä—ã —Ü–≤–µ—Ç–æ–≤ —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏ | ‚úÖ PASS | –°—Ç—Ä–æ–∫–∏ 256-278: —Ü–≤–µ—Ç–æ–≤–æ–π –∫—Ä—É–≥ 16px (`w-4 h-4`) —Å `colorHex` prop |
| 4 | Disabled state (opacity 0.5) | ‚úÖ PASS | –°—Ç—Ä–æ–∫–∞ 121: `disabled && 'opacity-50 cursor-not-allowed'` |
| 5 | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ selectedOptions –ø—Ä–∏ –∫–ª–∏–∫–µ | ‚úÖ PASS | –°—Ç—Ä–æ–∫–∏ 205-222: `handleSizeClick`, `handleColorClick` –æ–±–Ω–æ–≤–ª—è—é—Ç state |
| 6 | –î–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–∞ Chip —Å—Ç–∏–ª–∏ | ‚úÖ PASS | –°—Ç—Ä–æ–∫–∏ 104-128: `rounded-2xl`, `px-4 py-2`, `space-y-6`, `gap-2`, –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞ |
| 7 | MSW mock –Ω–∞—Å—Ç—Ä–æ–µ–Ω | ‚úÖ PASS | [handlers.ts:508-510](../../../frontend/src/__mocks__/api/handlers.ts) handler –¥–ª—è `nike-air-max` |
| 8 | Unit —Ç–µ—Å—Ç—ã Vitest + RTL | ‚úÖ PASS | [ProductOptions.test.tsx](../../../frontend/src/components/product/__tests__/ProductOptions.test.tsx): 37 —Ç–µ—Å—Ç–æ–≤ –ø–æ–∫—Ä—ã–≤–∞—é—Ç –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ |

### Integration Verification Validation

| IV | –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ |
|----|-----------|--------|----------------|
| IV1 | –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ç–æ–≤–∞—Ä–∞ | ‚úÖ PASS | [ProductSummary.tsx:206-214](../../../frontend/src/components/product/ProductSummary.tsx) –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç ProductOptions —Å variants |
| IV2 | –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–µ | ‚úÖ PASS | –í—Å–µ —Å—Ç–∏–ª–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç Design System v2.0 —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ |
| IV3 | MSW mock API –∫–æ–Ω—Ç—Ä–∞–∫—Ç | ‚úÖ PASS | Mock –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `MOCK_PRODUCT_WITH_VARIANTS` —Å–æ–≥–ª–∞—Å–Ω–æ `ProductVariantSchema` |

### Test Results

**Execution:** ‚úÖ **ALL PASS** (37/37 —Ç–µ—Å—Ç–æ–≤)

```
‚úì ProductOptions (37 tests) - 567ms
  ‚úì –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ (7)
  ‚úì Disabled state (AC: 4) (4)
  ‚úì –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ (AC: 5) (5)
  ‚úì Selected state (3)
  ‚úì Accessibility (AC: 6) (9)
  ‚úì –°—Ç–∏–ª–∏ –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º—ã (AC: 6, IV2) (6)
  ‚úì Edge cases (3)

Test Files: 1 passed (1)
Tests: 37 passed (37)
Duration: 4.20s
```

**–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

1. **–†–µ–Ω–¥–µ—Ä–∏–Ω–≥ (7 —Ç–µ—Å—Ç–æ–≤):**
   - ‚úÖ –ë–∞–∑–æ–≤—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
   - ‚úÖ –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ —Ä–∞–∑–º–µ—Ä–æ–≤ –∏ —Ü–≤–µ—Ç–æ–≤
   - ‚úÖ –¶–≤–µ—Ç–æ–≤—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
   - ‚úÖ –£—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ (–Ω–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤/—Ä–∞–∑–º–µ—Ä–æ–≤/—Ü–≤–µ—Ç–æ–≤)

2. **Disabled state (4 —Ç–µ—Å—Ç–∞):**
   - ‚úÖ –í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö –æ–ø—Ü–∏–π
   - ‚úÖ `opacity-50` –∏ `cursor-not-allowed` —Å—Ç–∏–ª–∏
   - ‚úÖ `aria-disabled` –∞—Ç—Ä–∏–±—É—Ç

3. **–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ (5 —Ç–µ—Å—Ç–æ–≤):**
   - ‚úÖ Callback –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Ä–∞–∑–º–µ—Ä/—Ü–≤–µ—Ç
   - ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –≤—ã–±–æ—Ä–∞
   - ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ callback –¥–ª—è disabled –æ–ø—Ü–∏–π

4. **Selected state (3 —Ç–µ—Å—Ç–∞):**
   - ‚úÖ `aria-checked` –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö
   - ‚úÖ –°—Ç–∏–ª–∏ selected state

5. **Accessibility (9 —Ç–µ—Å—Ç–æ–≤):**
   - ‚úÖ `role="radiogroup"` –¥–ª—è –≥—Ä—É–ø–ø
   - ‚úÖ `aria-label` –¥–ª—è –≥—Ä—É–ø–ø –æ–ø—Ü–∏–π
   - ‚úÖ `role="radio"` –¥–ª—è –∫–∞–∂–¥–æ–π –æ–ø—Ü–∏–∏
   - ‚úÖ Keyboard navigation (Enter, Space)
   - ‚úÖ `tabIndex` —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

6. **–î–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–∞ (6 —Ç–µ—Å—Ç–æ–≤):**
   - ‚úÖ –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ Chip
   - ‚úÖ Default/Selected state —Å—Ç–∏–ª–∏
   - ‚úÖ Spacing –∏ typography

7. **Edge cases (3 —Ç–µ—Å—Ç–∞):**
   - ‚úÖ –í–∞—Ä–∏–∞–Ω—Ç—ã –±–µ–∑ `color_hex`
   - ‚úÖ –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–æ–≤ –∏ —Ü–≤–µ—Ç–æ–≤

### Accessibility Review

**‚úÖ WCAG 2.1 AA Compliance - EXCELLENT**

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç **–æ–±—Ä–∞–∑—Ü–æ–≤—É—é** accessibility —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é:

- ‚úÖ **Semantic HTML:** `role="radiogroup"` –¥–ª—è –≥—Ä—É–ø–ø, `role="radio"` –¥–ª—è –æ–ø—Ü–∏–π
- ‚úÖ **ARIA Labels:** `aria-label` –¥–ª—è –≥—Ä—É–ø–ø ("–í—ã–±–æ—Ä —Ä–∞–∑–º–µ—Ä–∞", "–í—ã–±–æ—Ä —Ü–≤–µ—Ç–∞")
- ‚úÖ **ARIA States:** `aria-checked`, `aria-disabled`, `aria-label` –¥–ª—è –∫–∞–∂–¥–æ–π –æ–ø—Ü–∏–∏
- ‚úÖ **Keyboard Navigation:** Enter –∏ Space –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç –æ–ø—Ü–∏–∏
- ‚úÖ **Focus Management:** `tabIndex={disabled ? -1 : 0}` –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ–∫—É—Å–æ–º
- ‚úÖ **Focus Visible:** `focus:ring-2 focus:ring-[#0060FF]` –≤–∏–¥–∏–º—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Ñ–æ–∫—É—Å–∞

### Security Review

**‚úÖ No Security Concerns**

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç —è–≤–ª—è–µ—Ç—Å—è **read-only presentation layer**:
- –ù–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –≤–≤–æ–¥ –Ω–∞–ø—Ä—è–º—É—é
- –¢–æ–ª—å–∫–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ props
- Callback –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É

### Performance Considerations

**‚úÖ Excellent Performance Optimization**

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤—Å–µ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

1. **useMemo –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –æ–ø—Ü–∏–π:**
   ```typescript
   const sizes = useMemo(() => { /* ... */ }, [variants]);
   const colors = useMemo(() => { /* ... */ }, [variants]);
   ```

2. **useCallback –¥–ª—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:**
   ```typescript
   const handleSizeClick = useCallback((size: string) => { /* ... */ }, [selectedOptions, onSelectionChange]);
   ```

3. **–£—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥:**
   ```typescript
   if (variants.length === 0) return null;
   ```

4. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏:**
   - `isSizeAvailable` –∏ `isColorAvailable` –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ useCallback

### Code Quality Highlights

**–ò—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω—ã–µ –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**

1. **‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —á–∏—Å—Ç–æ—Ç–∞:**
   - –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π `OptionChip` –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫—É –æ—Ç–¥–µ–ª—å–Ω–æ–π –æ–ø—Ü–∏–∏
   - –ü—É–±–ª–∏—á–Ω—ã–π `ProductOptions` —É–ø—Ä–∞–≤–ª—è–µ—Ç –≥—Ä—É–ø–ø–∞–º–∏ –æ–ø—Ü–∏–π
   - –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

2. **‚úÖ TypeScript —Ç–∏–ø–∏–∑–∞—Ü–∏—è:**
   - –≠–∫—Å–ø–æ—Ä—Ç `ProductVariant` –∏–∑ `api.generated.ts`
   - –≠–∫—Å–ø–æ—Ä—Ç `SelectedOptions` –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - –ü–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö props –∏ callbacks

3. **‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
   - JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
   - –ü–æ–Ω—è—Ç–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ
   - –°—Å—ã–ª–∫–∏ –Ω–∞ Story –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

4. **‚úÖ Edge cases handling:**
   - –ü—É—Å—Ç—ã–µ –º–∞—Å—Å–∏–≤—ã variants
   - `null` –∑–Ω–∞—á–µ–Ω–∏—è `color_hex`
   - –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–æ–≤ –∏ —Ü–≤–µ—Ç–æ–≤
   - Graceful degradation

5. **‚úÖ Design System adherence:**
   - –¢–æ—á–Ω–æ–µ —Å–æ–±–ª—é–¥–µ–Ω–∏–µ spacing (24px –º–µ–∂–¥—É –≥—Ä—É–ø–ø–∞–º–∏, 8px –º–µ–∂–¥—É Chip)
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞ (#0060FF primary)
   - Typography (Montserrat 14px semibold –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤)

### Improvements Checklist

- [x] ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç ProductOptions —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å –≤—ã—Å–æ–∫–∏–º –∫–∞—á–µ—Å—Ç–≤–æ–º
- [x] ‚úÖ –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π OptionChip —Å –ø–æ–ª–Ω–æ–π accessibility
- [x] ‚úÖ MSW mock –¥–ª—è `/api/products/:slug/` —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏
- [x] ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ProductSummary –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [x] ‚úÖ 37 unit —Ç–µ—Å—Ç–æ–≤ –ø–æ–∫—Ä—ã–≤–∞—é—Ç –≤—Å–µ AC –∏ edge cases
- [ ] üìã **Future:** –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã ProductSummary + ProductOptions
- [ ] üìã **Future:** –î–æ–±–∞–≤–∏—Ç—å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è MSW handlers

### Files Modified During Review

**–ò–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è** ‚Äî –∫–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤—Å–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –∫–∞—á–µ—Å—Ç–≤–∞.

### Gate Status

**Gate: PASS** ‚úÖ ‚Üí [docs/qa/gates/13.5a-productoptions-ui-msw-mock.yml](../../qa/gates/13.5a-productoptions-ui-msw-mock.yml)

**Quality Score:** 100/100

**Risk Level:** LOW (0 critical, 0 high, 0 medium, 0 low risks)

### Recommended Status

**‚úÖ READY FOR DONE**

Story 13.5a **–ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–µ—Ä—à–µ–Ω–∞** –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤—Å–µ–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –∫–∞—á–µ—Å—Ç–≤–∞:
- ‚úÖ –í—Å–µ 8 AC –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –í—Å–µ 3 Integration Verification —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- ‚úÖ 37/37 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ
- ‚úÖ Accessibility WCAG 2.1 AA compliance
- ‚úÖ –ü–æ–ª–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ Design System v2.0
- ‚úÖ –ù–µ—Ç security concerns
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
- ‚úÖ –ö–æ–¥ –≤—ã—Å–æ—á–∞–π—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å Story —Å "Done" –Ω–∞ "Done" (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ).
