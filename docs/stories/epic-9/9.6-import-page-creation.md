# Story 9.6: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã "–ò–º–ø–æ—Ä—Ç –∏–∑ 1–°"

**Epic:** Epic 9 - Advanced Admin Panel  
**Story ID:** 9.6  
**Status:** Draft  
**Priority:** –í—ã—Å–æ–∫–∏–π (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–¥–æ—á–µ—Ç–æ–≤ Story 9.5)

---

## Story

**As a** Platform Administrator,  
**I want** –æ—Ç–¥–µ–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ 1–° —Å –≤—ã–±–æ—Ä–æ–º —Ç–∏–ø–∞ –∏–º–ø–æ—Ä—Ç–∞,  
**so that** —è –º–æ–≥—É –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—ã–±–∏—Ä–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–µ—Å—Å–∏–∏ –∏–º–ø–æ—Ä—Ç–∞.

---

## Business Context

**–ü—Ä–æ–±–ª–µ–º–∞:**  
–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (Story 9.5) —Ç—Ä–µ–±—É–µ—Ç –≤—ã–±–æ—Ä–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–µ—Å—Å–∏–∏ –∏–º–ø–æ—Ä—Ç–∞ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –Ω–æ–≤–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞, —á—Ç–æ –Ω–µ–ª–æ–≥–∏—á–Ω–æ –∏ —Å–æ–∑–¥–∞–µ—Ç –ø—É—Ç–∞–Ω–∏—Ü—É. Admin action "üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–º–ø–æ—Ä—Ç –∏–∑ 1–°" –¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é, –∞ –Ω–µ –∏–∑–º–µ–Ω—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é.

**–†–µ—à–µ–Ω–∏–µ:**  
–°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É "–ò–º–ø–æ—Ä—Ç –∏–∑ 1–°" –≤ —Ä–∞–∑–¥–µ–ª–µ –ò–ù–¢–ï–ì–†–ê–¶–ò–ò, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–±—Ä–∞—Ç—å —Ç–∏–ø –∏–º–ø–æ—Ä—Ç–∞ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å –∏–º–ø–æ—Ä—Ç–∞, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞—è –Ω–æ–≤—É—é ImportSession.

**–¶–µ–Ω–Ω–æ—Å—Ç—å:**
- –õ–æ–≥–∏—á–Ω—ã–π UX - –∑–∞–ø—É—Å–∫ –∏–º–ø–æ—Ä—Ç–∞ –æ—Ç–¥–µ–ª–µ–Ω –æ—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏—Å—Ç–æ—Ä–∏–∏
- –£–º–µ–Ω—å—à–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º Django Admin

---

## Acceptance Criteria

1. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ URL `/admin/integrations/import_1c/`**
   - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –º–µ–Ω—é –ò–ù–¢–ï–ì–†–ê–¶–ò–ò –ø–µ—Ä–µ–¥ "–°–µ—Å—Å–∏–∏ –∏–º–ø–æ—Ä—Ç–∞"
   - –î–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º

2. **–§–æ—Ä–º–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç 4 —Ç–∏–ø–∞ –∏–º–ø–æ—Ä—Ç–∞ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º**
   - "–ü–æ–ª–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥" - —Ç–æ–≤–∞—Ä—ã, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ü–µ–Ω—ã, –æ—Å—Ç–∞—Ç–∫–∏, —Å–≤–æ–π—Å—Ç–≤–∞
   - "–¢–æ–ª—å–∫–æ –æ—Å—Ç–∞—Ç–∫–∏" - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤
   - "–¢–æ–ª—å–∫–æ —Ü–µ–Ω—ã" - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω —Ç–æ–≤–∞—Ä–æ–≤
   - "–ö–ª–∏–µ–Ω—Ç—ã" - –∏–º–ø–æ—Ä—Ç –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤ –∏–∑ 1–°

3. **–ü—Ä–∏ –≤—ã–±–æ—Ä–µ —Ç–∏–ø–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è management –∫–æ–º–∞–Ω–¥–∞ —á–µ—Ä–µ–∑ Celery**
   - –ü–æ–ª–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ ‚Üí `import_catalog_from_1c --file-type=all`
   - –¢–æ–ª—å–∫–æ –æ—Å—Ç–∞—Ç–∫–∏ ‚Üí `import_catalog_from_1c --file-type=rests`
   - –¢–æ–ª—å–∫–æ —Ü–µ–Ω—ã ‚Üí `import_catalog_from_1c --file-type=prices`
   - –ö–ª–∏–µ–Ω—Ç—ã ‚Üí `import_customers_from_1c`

4. **–°–æ–∑–¥–∞–µ—Ç—Å—è ImportSession —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ç–∏–ø–æ–º**
   - CATALOG –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞
   - STOCKS –¥–ª—è –æ—Å—Ç–∞—Ç–∫–æ–≤
   - PRICES –¥–ª—è —Ü–µ–Ω
   - CUSTOMERS –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤

5. **–í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç**
   - –ò–º–ø–æ—Ä—Ç –æ—Å—Ç–∞—Ç–∫–æ–≤/—Ü–µ–Ω —Ç—Ä–µ–±—É–µ—Ç –Ω–∞–ª–∏—á–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –≤ –ë–î
   - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ

6. **Redis lock –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã**
   - –ï—Å–ª–∏ –∏–º–ø–æ—Ä—Ç —É–∂–µ –∑–∞–ø—É—â–µ–Ω, –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
   - Lock –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

7. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å Task ID –∏ Session ID –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞**
   - –°–æ–æ–±—â–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Å—ã–ª–∫—É –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–µ—Å—Å–∏–π –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–µ—Å—Å–∏–π —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

8. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏–º–ø–æ—Ä—Ç–∞**
   - –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–µ—Å—Å–∏–π
   - –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–µ—Å—Å–∏–π –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å Celery –∑–∞–¥–∞—á–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
   - JavaScript –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
   - –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è: ‚è≥ –í –æ—á–µ—Ä–µ–¥–∏ ‚Üí ‚ñ∂Ô∏è –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è ‚Üí ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ / ‚ùå –û—à–∏–±–∫–∞
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —á—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –∞–∫—Ç–∏–≤–µ–Ω –∏ –Ω–µ –∑–∞–≤–∏—Å

---

## Dev Notes

### Previous Story Insights

**–ò–∑ Story 9.5 (selective-import-ui):**
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º–µ—Ö–∞–Ω–∏–∑–º –≤—ã–±–æ—Ä–æ—á–Ω–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ —á–µ—Ä–µ–∑ admin action
- –°–æ–∑–¥–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π `_validate_dependencies`
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω Redis lock –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∏–º–ø–æ—Ä—Ç–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `celery_task_id` –≤ ImportSession –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–∞–¥–∞—á
- –ü—Ä–æ–±–ª–µ–º–∞: action —Ç—Ä–µ–±—É–µ—Ç –≤—ã–±–æ—Ä–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–µ—Å—Å–∏–∏ (–Ω–µ–ª–æ–≥–∏—á–Ω–æ)

### Data Models

**ImportSession –º–æ–¥–µ–ª—å** [Source: docs/stories/epic-3/3.1.1.import-products-structure.md]
```python
# backend/apps/products/models.py

class ImportSession(models.Model):
    class ImportType(models.TextChoices):
        CATALOG = "catalog", "–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤"
        STOCKS = "stocks", "–û—Å—Ç–∞—Ç–∫–∏"
        PRICES = "prices", "–¶–µ–Ω—ã"
        CUSTOMERS = "customers", "–ö–ª–∏–µ–Ω—Ç—ã"
    
    class ImportStatus(models.TextChoices):
        STARTED = "started", "–ù–∞—á–∞—Ç"
        COMPLETED = "completed", "–ó–∞–≤–µ—Ä—à–µ–Ω"
        FAILED = "failed", "–û—à–∏–±–∫–∞"
    
    import_type = models.CharField(max_length=20, choices=ImportType.choices)
    status = models.CharField(max_length=20, choices=ImportStatus.choices)
    celery_task_id = models.CharField(max_length=100, blank=True)
    started_at = models.DateTimeField(auto_now_add=True)
    finished_at = models.DateTimeField(null=True, blank=True)
    report_details = models.JSONField(default=dict, blank=True)
    error_message = models.TextField(blank=True)
```

**IntegrationImportSession** [Source: backend/apps/integrations/models.py]
```python
# Proxy –º–æ–¥–µ–ª—å –¥–ª—è admin
class IntegrationImportSession(ImportSession):
    class Meta:
        proxy = True
        verbose_name = "–°–µ—Å—Å–∏—è –∏–º–ø–æ—Ä—Ç–∞"
        verbose_name_plural = "–°–µ—Å—Å–∏–∏ –∏–º–ø–æ—Ä—Ç–∞"
```

### API Specifications

**Celery –∑–∞–¥–∞—á–∞** [Source: backend/apps/integrations/tasks.py]
```python
@shared_task(bind=True, max_retries=3)
def run_selective_import_task(self, import_types: list, data_dir: str):
    """
    –ó–∞–ø—É—Å–∫ –≤—ã–±–æ—Ä–æ—á–Ω–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ 1–°
    
    Args:
        import_types: —Å–ø–∏—Å–æ–∫ —Ç–∏–ø–æ–≤ –∏–º–ø–æ—Ä—Ç–∞ ['catalog'|'stocks'|'prices'|'customers']
        data_dir: –ø—É—Ç—å –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å –¥–∞–Ω–Ω—ã–º–∏ 1–°
    """
    # –õ–æ–≥–∏–∫–∞ –≤—ã–∑–æ–≤–∞ management –∫–æ–º–∞–Ω–¥
```

**Management –∫–æ–º–∞–Ω–¥—ã** [Source: docs/epics/epic-3/]
- `import_catalog_from_1c` - –æ—Å–Ω–æ–≤–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –∏–º–ø–æ—Ä—Ç–∞ (Stories 3.1.1, 3.1.2)
  - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `--data-dir`, `--file-type` (goods|offers|prices|rests|all)
- `import_customers_from_1c` - –∏–º–ø–æ—Ä—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤ (Story 3.2.1.0)
  - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `--file` (–ø—É—Ç—å –∫ contragents.xml)

### Component Specifications

**Django Admin Custom View** [Source: docs/architecture/tech-stack.md#backend]
```python
# backend/apps/integrations/admin.py

class ImportFrom1CAdmin(admin.ModelAdmin):
    """
    –ö–∞—Å—Ç–æ–º–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ –∏–∑ 1–°
    –ù–µ –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç changelist_view
    """
    
    def changelist_view(self, request):
        # –û–±—Ä–∞–±–æ—Ç–∫–∞ GET - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã
        # –û–±—Ä–∞–±–æ—Ç–∫–∞ POST - –∑–∞–ø—É—Å–∫ –∏–º–ø–æ—Ä—Ç–∞
        pass
```

**Template** [Source: Django Admin patterns]
```html
<!-- backend/templates/admin/integrations/import_1c.html -->
<!-- –§–æ—Ä–º–∞ —Å radio buttons –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ –∏–º–ø–æ—Ä—Ç–∞ -->
<!-- –û–ø–∏—Å–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –∏–º–ø–æ—Ä—Ç–∞ -->
<!-- –ö–Ω–æ–ø–∫–∞ "–ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–º–ø–æ—Ä—Ç" -->
```

### File Locations

**–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:**
- `backend/apps/integrations/admin.py` - –¥–æ–±–∞–≤–∏—Ç—å –∫–ª–∞—Å—Å ImportFrom1CAdmin
- `backend/templates/admin/integrations/import_1c.html` - template —Ñ–æ—Ä–º—ã
- `backend/apps/integrations/urls.py` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è URL (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)

**–ò–∑–º–µ–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã:**
- `backend/apps/integrations/admin.py` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ admin –∫–ª–∞—Å—Å–∞

### Testing Requirements

[Source: docs/architecture/testing-strategy.md]

**Unit —Ç–µ—Å—Ç—ã:**
- –¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è ImportSession —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ç–∏–ø–æ–º
- –¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –¢–µ—Å—Ç Redis lock –º–µ—Ö–∞–Ω–∏–∑–º–∞
- –¢–µ—Å—Ç –º–∞–ø–ø–∏–Ω–≥–∞ —Ç–∏–ø–æ–≤ –∏–º–ø–æ—Ä—Ç–∞ –Ω–∞ –∫–æ–º–∞–Ω–¥—ã

**Integration —Ç–µ—Å—Ç—ã:**
- –¢–µ—Å—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/admin/integrations/import_1c/`
- –¢–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã –∏ –∑–∞–ø—É—Å–∫–∞ Celery –∑–∞–¥–∞—á–∏
- –¢–µ—Å—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö
- –¢–µ—Å—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

**–ü–æ–∫—Ä—ã—Ç–∏–µ:** ‚â•90% –¥–ª—è –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞

### Technical Constraints

**Django –≤–µ—Ä—Å–∏—è:** 5.0 [Source: docs/architecture/tech-stack.md]  
**Celery:** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á [Source: docs/architecture/tech-stack.md]  
**Redis:** –¥–ª—è lock –º–µ—Ö–∞–Ω–∏–∑–º–∞ –∏ Celery broker [Source: docs/architecture/tech-stack.md]  
**Docker:** –≤—Å–µ –∑–∞–ø—É—Å–∫–∏ —á–µ—Ä–µ–∑ Docker Compose [Source: user preferences]

**Settings:**
- `ONEC_DATA_DIR` - –ø—É—Ç—å –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å –¥–∞–Ω–Ω—ã–º–∏ 1–°
- Redis connection: `get_redis_connection("default")`

### Security Considerations

[Source: docs/architecture/security.md]
- –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ —á–µ—Ä–µ–∑ Django permissions
- CSRF –∑–∞—â–∏—Ç–∞ –¥–ª—è POST –∑–∞–ø—Ä–æ—Å–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### Performance Considerations

- Redis lock timeout: 3600 —Å–µ–∫—É–Ω–¥ (1 —á–∞—Å)
- Celery –∑–∞–¥–∞—á–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è, –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç UI
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π - –±—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ `Product.objects.exists()`

### Integration Points

**–° Epic 3 (–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å 1–°):**
- XMLDataParser, ProductDataProcessor [Story 3.1.1]
- CustomerDataParser, CustomerDataProcessor [Story 3.2.1.0]
- Management –∫–æ–º–∞–Ω–¥—ã: import_catalog_from_1c, import_customers_from_1c

**–° Story 9.5:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é Celery –∑–∞–¥–∞—á—É `run_selective_import_task`
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–æ–≥–∏–∫—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏ `_validate_dependencies`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Redis lock –º–µ—Ö–∞–Ω–∏–∑–º

---

## Tasks / Subtasks

### Task 1: –°–æ–∑–¥–∞—Ç—å ImportFrom1CAdmin –∫–ª–∞—Å—Å (AC: 1, 2, 3, 4)

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `backend/apps/integrations/admin.py`

- [ ] **1.1** –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å ImportFrom1CAdmin –Ω–∞—Å–ª–µ–¥—É—é—â–∏–π admin.ModelAdmin
  - –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å `changelist_view` –º–µ—Ç–æ–¥ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ GET/POST –∑–∞–ø—Ä–æ—Å–æ–≤
  - –ù–µ –ø—Ä–∏–≤—è–∑—ã–≤–∞—Ç—å –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏ (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ standalone view)
  
- [ ] **1.2** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å GET –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã
  - –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å context —Å —Ç–∏–ø–∞–º–∏ –∏–º–ø–æ—Ä—Ç–∞ –∏ –æ–ø–∏—Å–∞–Ω–∏—è–º–∏
  - –í–µ—Ä–Ω—É—Ç—å TemplateResponse —Å template `admin/integrations/import_1c.html`
  
- [ ] **1.3** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å POST –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ - –∑–∞–ø—É—Å–∫ –∏–º–ø–æ—Ä—Ç–∞
  - –ü–æ–ª—É—á–∏—Ç—å `import_type` –∏–∑ request.POST
  - –í—ã–ø–æ–ª–Ω–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (AC: 5)
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Redis lock (AC: 6)
  - –°–æ–∑–¥–∞—Ç—å ImportSession —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ç–∏–ø–æ–º (AC: 4)
  - –ó–∞–ø—É—Å—Ç–∏—Ç—å Celery –∑–∞–¥–∞—á—É `run_selective_import_task` (AC: 3)
  - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å `celery_task_id` –≤ ImportSession
  - –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å success message —Å Task ID –∏ Session ID (AC: 7)
  - –û—Å–≤–æ–±–æ–¥–∏—Ç—å Redis lock –≤ finally –±–ª–æ–∫–µ

- [ ] **1.4** –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å ImportFrom1CAdmin –≤ admin.site
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å custom URL pattern –∏–ª–∏ ModelAdmin –±–µ–∑ –º–æ–¥–µ–ª–∏
  - –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –º–µ–Ω—é –ò–ù–¢–ï–ì–†–ê–¶–ò–ò

**Unit —Ç–µ—Å—Ç—ã:**
- test_import_from_1c_admin_get_displays_form()
- test_import_from_1c_admin_post_creates_session()
- test_import_from_1c_admin_validates_dependencies()
- test_import_from_1c_admin_redis_lock()

### Task 2: –°–æ–∑–¥–∞—Ç—å template —Ñ–æ—Ä–º—ã (AC: 2)

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `backend/templates/admin/integrations/import_1c.html`

- [ ] **2.1** –°–æ–∑–¥–∞—Ç—å HTML template –Ω–∞—Å–ª–µ–¥—É—é—â–∏–π `admin/base_site.html`
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Django admin —Å—Ç–∏–ª–∏
  - –î–æ–±–∞–≤–∏—Ç—å CSRF token
  
- [ ] **2.2** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ–æ—Ä–º—É —Å radio buttons
  - 4 radio button –¥–ª—è —Ç–∏–ø–æ–≤ –∏–º–ø–æ—Ä—Ç–∞
  - –û–ø–∏—Å–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞
  - –ö–Ω–æ–ø–∫–∞ "–ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–º–ø–æ—Ä—Ç"
  
- [ ] **2.3** –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
  - Django messages framework –¥–ª—è success/error —Å–æ–æ–±—â–µ–Ω–∏–π
  - –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å Django admin

**Integration —Ç–µ—Å—Ç—ã:**
- test_import_page_displays_form()
- test_import_page_shows_import_types()

### Task 3: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (AC: 5)

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `backend/apps/integrations/admin.py`

- [ ] **3.1** –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É `_validate_dependencies` –∏–∑ Story 9.5
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –æ—Å—Ç–∞—Ç–∫–æ–≤/—Ü–µ–Ω
  - –í–æ–∑–≤—Ä–∞—Ç (bool, error_message)
  
- [ ] **3.2** –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤ POST –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
  - –í—ã–∑—ã–≤–∞—Ç—å –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º ImportSession
  - –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å error message —á–µ—Ä–µ–∑ Django messages
  - –†–µ–¥–∏—Ä–µ–∫—Ç –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ —Ñ–æ—Ä–º—É –ø—Ä–∏ –æ—à–∏–±–∫–µ

**Unit —Ç–µ—Å—Ç—ã:**
- test_validate_dependencies_stocks_requires_products()
- test_validate_dependencies_prices_requires_products()
- test_validate_dependencies_catalog_no_requirements()

### Task 4: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Redis lock –º–µ—Ö–∞–Ω–∏–∑–º (AC: 6)

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `backend/apps/integrations/admin.py`

- [ ] **4.1** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π Redis lock –∏–∑ Story 9.5
  - `redis_conn = get_redis_connection("default")`
  - `lock = redis_conn.lock("import_catalog_lock", timeout=3600)`
  
- [ ] **4.2** –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–ª—É—á–∞–π –∫–æ–≥–¥–∞ lock –∑–∞–Ω—è—Ç
  - –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å warning message
  - –†–µ–¥–∏—Ä–µ–∫—Ç –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ —Ñ–æ—Ä–º—É
  
- [ ] **4.3** –û—Å–≤–æ–±–æ–∂–¥–∞—Ç—å lock –≤ finally –±–ª–æ–∫–µ
  - –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –¥–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

**Unit —Ç–µ—Å—Ç—ã:**
- test_redis_lock_prevents_concurrent_imports()
- test_redis_lock_released_after_error()

### Task 5: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Celery –∑–∞–¥–∞—á–µ–π (AC: 3, 7)

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `backend/apps/integrations/admin.py`

- [ ] **5.1** –ú–∞–ø–ø–∏–Ω–≥ —Ç–∏–ø–æ–≤ –∏–º–ø–æ—Ä—Ç–∞ –Ω–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥
  - 'catalog' ‚Üí ['catalog'], data_dir
  - 'stocks' ‚Üí ['stocks'], data_dir
  - 'prices' ‚Üí ['prices'], data_dir
  - 'customers' ‚Üí ['customers'], data_dir
  
- [ ] **5.2** –ó–∞–ø—É—Å–∫ Celery –∑–∞–¥–∞—á–∏
  - `task = run_selective_import_task.delay(import_types, data_dir)`
  - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å `task.id` –≤ `ImportSession.celery_task_id`
  
- [ ] **5.3** –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ success message –∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç (AC: 7, 8)
  - –§–æ—Ä–º–∞—Ç: "–ò–º–ø–æ—Ä—Ç –∑–∞–ø—É—â–µ–Ω (Task ID: {task_id}, Session ID: {session_id})"
  - –î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–µ—Å—Å–∏–π
  - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–µ—Å—Å–∏–π —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
  - –ò–ª–∏ —Å—Ä–∞–∑—É —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç—å —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º —á–µ—Ä–µ–∑ messages framework
  
- [ ] **5.4** –û–±–µ—Å–ø–µ—á–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ (AC: 8)
  - –ü–æ—Å–ª–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Å–æ–∑–¥–∞–Ω–Ω—É—é —Å–µ—Å—Å–∏—é –Ω–∞ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
  - JavaScript –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–∏–∑ Story 9.7) –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø–µ—Ä–µ—Ö–æ–¥ —Å—Ç–∞—Ç—É—Å–æ–≤: ‚è≥ PENDING ‚Üí ‚ñ∂Ô∏è STARTED ‚Üí ‚úÖ SUCCESS

**Integration —Ç–µ—Å—Ç—ã:**
- test_import_launches_celery_task()
- test_import_creates_session_with_task_id()
- test_import_displays_success_message()
- test_import_redirects_to_sessions_page()
- test_user_can_see_import_progress()

### Task 6: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è

- [ ] **6.1** –û–±–Ω–æ–≤–∏—Ç—å README —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- [ ] **6.2** –î–æ–±–∞–≤–∏—Ç—å docstrings –∫–æ –≤—Å–µ–º –º–µ—Ç–æ–¥–∞–º
- [ ] **6.3** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ coding standards (black, flake8, mypy)
- [ ] **6.4** –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ ‚â•90%

---

## Definition of Done

- [ ] –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/admin/integrations/import_1c/` –¥–æ—Å—Ç—É–ø–Ω–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –º–µ–Ω—é
- [ ] –§–æ—Ä–º–∞ —Å 4 —Ç–∏–ø–∞–º–∏ –∏–º–ø–æ—Ä—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã
- [ ] Redis lock –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã
- [ ] Celery –∑–∞–¥–∞—á–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∏ ImportSession —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ç–∏–ø–æ–º
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å Task ID –∏ Session ID
- [ ] **–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–µ—Å—Å–∏–π**
- [ ] **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –∏–º–ø–æ—Ä—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (—Å—Ç–∞—Ç—É—Å Celery –∑–∞–¥–∞—á–∏)**
- [ ] **JavaScript –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥ —Å—Ç–∞—Ç—É—Å–æ–≤: ‚è≥ ‚Üí ‚ñ∂Ô∏è ‚Üí ‚úÖ/‚ùå**
- [ ] –í—Å–µ unit –∏ integration —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ —Ç–µ—Å—Ç–∞–º–∏ ‚â•90%
- [ ] –ö–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç coding standards (black, flake8, mypy)
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –≤ Docker –æ–∫—Ä—É–∂–µ–Ω–∏–∏

---

## Dependencies

**–ë–ª–æ–∫–∏—Ä—É—é—â–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- ‚úÖ Story 3.1.1 (import-products-structure) - DONE
- ‚úÖ Story 3.1.2 (loading-scripts) - DONE
- ‚úÖ Story 3.2.1.0 (import-existing-customers) - DONE
- ‚è≥ Story 9.5 (selective-import-ui) - Ready for Implementation

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- ImportSession –º–æ–¥–µ–ª—å
- Celery –∑–∞–¥–∞—á–∞ run_selective_import_task
- Management –∫–æ–º–∞–Ω–¥—ã: import_catalog_from_1c, import_customers_from_1c
- Redis –¥–ª—è distributed lock

---

## Notes

- –≠—Ç–∞ –∏—Å—Ç–æ—Ä–∏—è –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç UX –Ω–µ–¥–æ—á–µ—Ç Story 9.5
- –°–ª–µ–¥—É—é—â–∞—è –∏—Å—Ç–æ—Ä–∏—è 9.7 —Å–¥–µ–ª–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–µ—Å—Å–∏–π read-only
- –í—Å—è –ª–æ–≥–∏–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–∑ Epic 3
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –º–∏–Ω–∏–º–∞–ª—å–Ω—ã - —Ç–æ–ª—å–∫–æ UI —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥
- **–ö—Ä–∏—Ç–∏—á–Ω–æ:** –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –≤–∏–¥–µ—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å, —á—Ç–æ–±—ã –ø–æ–Ω–∏–º–∞—Ç—å —á—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ –∑–∞–≤–∏—Å
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–µ—Å—Å–∏–π –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—É—é –≤–∏–¥–∏–º–æ—Å—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- JavaScript –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ Story 9.7 –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

---

## Dev Agent Record

_–≠—Ç–∞ —Å–µ–∫—Ü–∏—è –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ Dev Agent –ø–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏._

### Implementation Notes
<!-- Dev Agent: –û–ø–∏—à–∏—Ç–µ –∫–ª—é—á–µ–≤—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è -->

### Challenges Encountered
<!-- Dev Agent: –û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏—è -->

### Debug Log References
<!-- Dev Agent: –°—Å—ã–ª–∫–∏ –Ω–∞ –∑–∞–ø–∏—Å–∏ –≤ debug log -->

### Completion Notes
<!-- Dev Agent: –§–∏–Ω–∞–ª—å–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏ –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ -->
