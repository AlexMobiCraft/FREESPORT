# Story 12.7: Обновление Главной страницы

## Status

Draft

## Prerequisites

- **Story 12.1 (Обновление дизайн-токенов)** - CSS переменные и Tailwind конфигурация должны быть обновлены
- **Story 12.4 (Карточки товаров)** - ProductCard компонент должен быть создан для блоков "Хиты продаж" и "Новинки"

## Story

**As a** Frontend разработчик,
**I want** обновить все секции главной страницы согласно Design System v2.0,
**so that** пользователи FREESPORT получали современный, единообразный визуальный опыт с улучшенным UX на главной странице платформы.

## Acceptance Criteria

1. Компонент HeroSection обновлен под новые дизайн-токены:
   - Фон: canvas (#F5F7FB) или градиент согласно design-system.json
   - Заголовок: display-l (48px, weight 700)
   - Подзаголовок: body-l (18px, weight 500)
   - CTA кнопка: primary variant, height 56px, radius 16px
   - Адаптивность: текст по центру на mobile, слева на desktop

2. Блок "Категории" создан с 5 категориями:
   - Grid layout: 5 колонок на desktop, 2-3 на tablet, 1 на mobile
   - Карточка категории: изображение + название
   - Название: title-m (20px, weight 600)
   - Border radius: 16px (md)
   - Shadow: default, hover: hover + translateY(-2px)
   - Ссылка на соответствующую страницу каталога

3. Блок "Хиты продаж" отображает товары с ProductCard:
   - Заголовок секции: headline-l (32px, weight 700)
   - Горизонтальная лента: 4-6 карточек со scroll-snap
   - Карточки товаров: используют ProductCard из Story 12.4
   - Бейдж "HIT" на карточках
   - Кнопки навигации (prev/next) или свайп на mobile
   - Gap между карточками: 16px

4. Блок "Новинки" отображает новые товары:
   - Структура аналогична блоку "Хиты продаж"
   - Бейдж "NEW" на карточках
   - Заголовок: headline-l

5. Блок "Наш блог" с превью статей создан:
   - Grid: 3 колонки на desktop, 1 на mobile
   - Карточка статьи: изображение, дата, заголовок, excerpt
   - Изображение: aspect-ratio 16:9, radius 12px
   - Заголовок: title-m (20px, weight 600)
   - Дата: caption (12px), color text-muted
   - Excerpt: body-s (14px), max 2 строки с ellipsis
   - Ссылка "Читать далее"

6. Компонент Footer обновлен под новый макет:
   - Background: primary (#1F1F1F)
   - Text: inverse (#FFFFFF)
   - Колонки: О компании, Каталог, Помощь, Контакты
   - Ссылки: body-s, hover: opacity-80
   - Социальные иконки: 24px
   - Copyright: caption, text-muted
   - Padding: 48px vertical

7. Компонент SubscribeNewsSection обновлен:
   - Используются новые токены цветов и типографики
   - Input и Button соответствуют Design System v2.0

8. Секции страницы имеют правильные spacing:
   - Section spacing: 64px (aboveFold), 48px (default)
   - Внутренний padding: 24px
   - Max-width: 1280px с auto-центрированием

9. Страница полностью адаптивна:
   - Mobile: 640px и меньше
   - Tablet: 641px - 1024px
   - Desktop: 1025px и выше
   - Padding: mobile 12px, tablet 16px, desktop 24px

10. SEO метатеги настроены:
    - title, description, og:title, og:description, og:image
    - Использование Next.js Metadata API

11. Все компоненты проходят accessibility проверку:
    - Semantic HTML (main, section, nav, footer)
    - Alt текст для изображений
    - Keyboard navigation
    - ARIA labels где необходимо

12. Тесты созданы и проходят успешно:
    - Unit тесты для каждой секции
    - Тесты рендеринга и интерактивности
    - Покрытие >= 80%

## Tasks / Subtasks

- [ ] Task 1: Обновление HeroSection (AC: 1, 8, 9, 11)
  - [ ] 1.1 Обновить стили HeroSection.tsx под новые токены:
    - Background: canvas (#F5F7FB)
    - Container: max-w-[1280px] mx-auto px-6
  - [ ] 1.2 Обновить типографику:
    - Заголовок: text-5xl (48px), font-bold (700), text-primary
    - Подзаголовок: text-lg (18px), font-medium (500), text-secondary
  - [ ] 1.3 Обновить CTA кнопку:
    - height: h-14 (56px)
    - radius: rounded-2xl (16px)
    - Использовать Button компонент из Story 12.2
  - [ ] 1.4 Добавить адаптивность:
    - Mobile: text-center, px-3
    - Desktop: text-left
  - [ ] 1.5 Обновить тест HeroSection.test.tsx

- [ ] Task 2: Обновление CategoriesSection (AC: 2, 8, 9, 11)
  - [ ] 2.1 Обновить grid layout в CategoriesSection.tsx:
    - Desktop: grid-cols-5
    - Tablet: grid-cols-3
    - Mobile: grid-cols-2
    - Gap: gap-4 (16px)
  - [ ] 2.2 Создать/обновить CategoryCard компонент:
    ```typescript
    interface CategoryCardProps {
      name: string
      image: string
      href: string
    }
    ```
  - [ ] 2.3 Стилизовать CategoryCard:
    - Border radius: rounded-2xl (16px)
    - Shadow: shadow-default
    - Hover: shadow-hover + -translate-y-0.5
    - Image: aspect-square, object-cover
    - Title: text-xl (20px), font-semibold (600)
  - [ ] 2.4 Определить 5 категорий:
    - Футбол, Фитнес, Единоборства, Плавание, Детский транспорт
  - [ ] 2.5 Добавить Link к страницам каталога
  - [ ] 2.6 Обновить тест CategoriesSection.test.tsx

- [ ] Task 3: Обновление HitsSection (AC: 3, 8, 9, 11)
  - [ ] 3.1 Обновить заголовок секции:
    - text-3xl (32px), font-bold (700)
    - mb-8 (32px)
  - [ ] 3.2 Создать горизонтальную ленту товаров:
    - Container: overflow-x-auto, scroll-snap-x
    - Flex: flex gap-4
    - Scroll-snap: snap-start на карточках
  - [ ] 3.3 Интегрировать ProductCard из Story 12.4:
    - Передать badge="hit"
    - Width: w-[280px] fixed
  - [ ] 3.4 Добавить кнопки навигации:
    - Prev/Next arrows
    - Position: absolute по краям
    - Style: bg-white rounded-full shadow
    - Size: w-10 h-10
  - [ ] 3.5 Добавить свайп на mobile (опционально)
  - [ ] 3.6 Обновить тест HitsSection.test.tsx

- [ ] Task 4: Обновление NewArrivalsSection (AC: 4, 8, 9)
  - [ ] 4.1 Структура аналогична HitsSection
  - [ ] 4.2 Интегрировать ProductCard с badge="new"
  - [ ] 4.3 Обновить заголовок: "Новинки"
  - [ ] 4.4 Обновить тест NewArrivalsSection.test.tsx

- [ ] Task 5: Создание/обновление NewsSection (AC: 5, 8, 9, 11)
  - [ ] 5.1 Обновить grid layout в NewsSection.tsx:
    - Desktop: grid-cols-3
    - Tablet: grid-cols-2
    - Mobile: grid-cols-1
    - Gap: gap-6 (24px)
  - [ ] 5.2 Создать BlogPostCard компонент:
    ```typescript
    interface BlogPostCardProps {
      id: string
      title: string
      excerpt: string
      image: string
      date: string
      slug: string
    }
    ```
  - [ ] 5.3 Стилизовать BlogPostCard:
    - Image: aspect-video (16:9), rounded-xl
    - Date: text-xs (12px), text-muted
    - Title: text-xl (20px), font-semibold
    - Excerpt: text-sm (14px), line-clamp-2
    - Link: text-primary, hover:underline
  - [ ] 5.4 Добавить mock данные для блога
  - [ ] 5.5 Создать тест NewsSection.test.tsx

- [ ] Task 6: Создание/обновление Footer (AC: 6, 8, 9, 11)
  - [ ] 6.1 Создать директорию `frontend/src/components/layout/Footer/`
  - [ ] 6.2 Создать Footer.tsx с интерфейсом:
    ```typescript
    interface FooterProps {
      columns: FooterColumn[]
      socialLinks: SocialLink[]
      copyright: string
    }

    interface FooterColumn {
      title: string
      links: { label: string; href: string }[]
    }
    ```
  - [ ] 6.3 Стилизовать Footer:
    - Background: bg-[#1F1F1F]
    - Text: text-white
    - Padding: py-12 (48px)
    - Grid: 4 колонки на desktop, 2 на tablet, 1 на mobile
  - [ ] 6.4 Добавить колонки:
    - О компании: О нас, Контакты, Вакансии
    - Каталог: Спортивные игры, Единоборства, Фитнес, Детский транспорт
    - Помощь: Доставка, Возврат, FAQ
    - Контакты: Телефон, Email, Адрес
  - [ ] 6.5 Добавить социальные иконки:
    - VK, Telegram, YouTube
    - Size: 24px
    - Color: text-white, hover:opacity-80
  - [ ] 6.6 Добавить copyright:
    - text-xs (12px), text-neutral-500
    - "© 2025 FREESPORT. Все права защищены."
  - [ ] 6.7 Создать тест Footer.test.tsx

- [ ] Task 7: Обновление SubscribeNewsSection (AC: 7)
  - [ ] 7.1 Обновить стили под новые токены
  - [ ] 7.2 Интегрировать Input и Button из Story 12.2
  - [ ] 7.3 Проверить существующие тесты

- [ ] Task 8: Обновление главной страницы page.tsx (AC: 8, 10)
  - [ ] 8.1 Импортировать все обновленные секции
  - [ ] 8.2 Настроить section spacing:
    ```tsx
    <main>
      <HeroSection />
      <section className="py-16">  {/* 64px */}
        <CategoriesSection />
      </section>
      <section className="py-12">  {/* 48px */}
        <HitsSection />
      </section>
      <section className="py-12">
        <NewArrivalsSection />
      </section>
      <section className="py-12">
        <NewsSection />
      </section>
      <section className="py-12">
        <SubscribeNewsSection />
      </section>
    </main>
    <Footer />
    ```
  - [ ] 8.3 Добавить SEO метатеги через Next.js Metadata:
    ```typescript
    export const metadata: Metadata = {
      title: 'FREESPORT - Спортивные товары оптом и в розницу',
      description: 'Интернет-магазин спортивной одежды и экипировки. Более 10 000 товаров от ведущих брендов.',
      openGraph: {
        title: 'FREESPORT - Спортивные товары',
        description: '...',
        images: ['/og-image.jpg']
      }
    }
    ```

- [ ] Task 9: Создание тестов (AC: 12)
  - [ ] 9.1 Обновить все существующие тесты под новые стили
  - [ ] 9.2 Создать тест Footer.test.tsx
  - [ ] 9.3 Проверить рендеринг всех секций
  - [ ] 9.4 Проверить ссылки и навигацию
  - [ ] 9.5 Запустить тесты и проверить покрытие >= 80%

- [ ] Task 10: Визуальная проверка и accessibility (AC: 9, 11)
  - [ ] 10.1 Проверить адаптивность на всех breakpoints
  - [ ] 10.2 Проверить semantic HTML
  - [ ] 10.3 Добавить alt тексты для изображений
  - [ ] 10.4 Проверить keyboard navigation
  - [ ] 10.5 Добавить ARIA labels где необходимо

## Dev Notes

### Расположение компонентов [Source: docs/architecture/source-tree.md]

```
frontend/src/
├── app/
│   └── page.tsx                          # ОБНОВИТЬ - главная страница
├── components/
│   ├── home/
│   │   ├── HeroSection.tsx               # ОБНОВИТЬ
│   │   ├── CategoriesSection.tsx         # ОБНОВИТЬ
│   │   ├── HitsSection.tsx               # ОБНОВИТЬ
│   │   ├── NewArrivalsSection.tsx        # ОБНОВИТЬ
│   │   ├── NewsSection.tsx               # ОБНОВИТЬ
│   │   ├── SubscribeNewsSection.tsx      # ОБНОВИТЬ
│   │   ├── SubscribeForm.tsx             # ОБНОВИТЬ
│   │   ├── index.ts                      # ОБНОВИТЬ экспорты
│   │   └── __tests__/
│   │       ├── HeroSection.test.tsx      # ОБНОВИТЬ
│   │       ├── CategoriesSection.test.tsx # ОБНОВИТЬ
│   │       ├── HitsSection.test.tsx      # ОБНОВИТЬ
│   │       ├── NewArrivalsSection.test.tsx # ОБНОВИТЬ
│   │       └── NewsSection.test.tsx      # ОБНОВИТЬ
│   └── layout/
│       ├── Footer/
│       │   ├── Footer.tsx                # СОЗДАТЬ
│       │   ├── index.ts                  # СОЗДАТЬ
│       │   └── __tests__/
│       │       └── Footer.test.tsx       # СОЗДАТЬ
│       └── index.ts                      # Добавить экспорт Footer
```

### Ключевые цвета Design System v2.0 [Source: docs/frontend/design-system.json]

```scss
// Primary (для кнопок, акцентов)
$primary-default: #1F1F1F;
$primary-hover: #3A3A3A;

// Canvas (фон страницы)
$canvas: #F5F7FB;

// Neutral (для фонов, бордеров)
$neutral-100: #FFFFFF;
$neutral-200: #F5F5F5;
$neutral-300: #E0E0E0;

// Text
$text-primary: #1B1B1B;
$text-secondary: #4D4D4D;
$text-muted: #7A7A7A;
$text-inverse: #FFFFFF;
```

### Типографика [Source: docs/frontend/design-system.json#foundations.typography]

```typescript
// Для главной страницы
'display-l': { size: 48, lineHeight: 56, weight: 700 }   // Hero заголовок
'headline-l': { size: 32, lineHeight: 40, weight: 700 }  // Заголовки секций
'title-m': { size: 20, lineHeight: 28, weight: 600 }     // Названия категорий, статей
'body-l': { size: 18, lineHeight: 28, weight: 500 }      // Подзаголовки
'body-m': { size: 16, lineHeight: 24, weight: 500 }      // Основной текст
'body-s': { size: 14, lineHeight: 20, weight: 500 }      // Ссылки в footer
'caption': { size: 12, lineHeight: 16, weight: 500 }     // Даты, copyright

// Tailwind mapping
display-l → text-5xl font-bold
headline-l → text-3xl font-bold
title-m → text-xl font-semibold
body-l → text-lg font-medium
body-m → text-base font-medium
body-s → text-sm font-medium
caption → text-xs font-medium
```

### Spacing [Source: docs/frontend/design-system.json#foundations.spacing]

```typescript
// Section spacing
sectionSpacing: {
  aboveFold: 64,    // py-16 (первая секция после hero)
  default: 48,      // py-12 (остальные секции)
  compact: 32       // py-8
}

// Component spacing
componentSpacing: {
  cardGap: 16,      // gap-4
  listItemGap: 12,  // gap-3
}

// Grid
grid: {
  pageWidth: 1280,  // max-w-[1280px]
  gutters: 24,      // gap-6
  padding: {
    desktop: 24,    // px-6
    tablet: 16,     // px-4
    mobile: 12      // px-3
  }
}
```

### Shadows [Source: docs/frontend/design-system.json#foundations.shadows]

```typescript
shadow-default: "0 8px 24px rgba(15, 23, 42, 0.08)"
shadow-hover: "0 10px 32px rgba(15, 23, 42, 0.12)"

// Tailwind classes (добавить в tailwind.config.ts если отсутствуют)
shadow: {
  DEFAULT: '0 8px 24px rgba(15, 23, 42, 0.08)',
  hover: '0 10px 32px rgba(15, 23, 42, 0.12)',
}
```

### Motion [Source: docs/frontend/design-system.json#foundations.motion]

```typescript
duration: {
  short: 120,      // duration-[120ms]
  medium: 180      // duration-[180ms]
}
easing: "cubic-bezier(0.4, 0, 0.2, 1)"  // ease-in-out

// Hover animation для карточек
hover: {
  lift: "translateY(-2px)",     // hover:-translate-y-0.5
  shadow: "shadow-hover"
}
```

### Breakpoints [Source: docs/frontend/design-system.json#foundations.grid.breakpoints]

```typescript
breakpoints: {
  mobile: 640,    // sm
  tablet: 1024,   // lg
  desktop: 1440   // xl
}

// Tailwind responsive prefixes
// sm: >= 640px
// md: >= 768px
// lg: >= 1024px
// xl: >= 1280px
// 2xl: >= 1536px
```

### ProductCard интеграция [Source: Story 12.4]

Story 12.4 должна создать ProductCard компонент со следующим интерфейсом:

```typescript
interface ProductCardProps {
  product: Product
  layout?: 'grid' | 'list'
  badge?: 'sale' | 'new' | 'hit' | 'promo'
  onAddToCart?: (product: Product) => void
  onToggleFavorite?: (productId: string) => void
}
```

Использование в HitsSection:
```tsx
<ProductCard
  product={product}
  badge="hit"
  onAddToCart={handleAddToCart}
/>
```

### SEO Metadata [Source: docs/architecture/tech-stack.md]

Next.js 15 Metadata API:

```typescript
// app/page.tsx
import { Metadata } from 'next'

export const metadata: Metadata = {
  title: 'FREESPORT - Спортивные товары оптом и в розницу',
  description: 'Крупнейший интернет-магазин спортивной одежды и экипировки в России. Более 10 000 товаров от ведущих брендов. Выгодные цены для B2B клиентов.',
  keywords: ['спортивные товары', 'спортивная одежда', 'оптом', 'FREESPORT'],
  openGraph: {
    title: 'FREESPORT - Спортивные товары оптом и в розницу',
    description: 'Крупнейший интернет-магазин спортивной одежды и экипировки',
    url: 'https://freesport.ru',
    siteName: 'FREESPORT',
    images: [
      {
        url: '/og-image.jpg',
        width: 1200,
        height: 630,
        alt: 'FREESPORT'
      }
    ],
    locale: 'ru_RU',
    type: 'website'
  },
  twitter: {
    card: 'summary_large_image',
    title: 'FREESPORT - Спортивные товары',
    description: '...',
    images: ['/og-image.jpg']
  }
}
```

### Категории для главной страницы

5 основных категорий для блока "Категории":

```typescript
const CATEGORIES = [
  { name: 'Футбол', href: '/catalog/football', image: '/images/categories/football.jpg' },
  { name: 'Фитнес', href: '/catalog/fitness', image: '/images/categories/fitness.jpg' },
  { name: 'Единоборства', href: '/catalog/martial-arts', image: '/images/categories/martial-arts.jpg' },
  { name: 'Плавание', href: '/catalog/swimming', image: '/images/categories/swimming.jpg' },
  { name: 'Детский транспорт', href: '/catalog/kids-transport', image: '/images/categories/kids-transport.jpg' }
]
```

### Зависимости от других Stories

- **Story 12.1** - Design tokens (цвета, типографика, spacing)
- **Story 12.2** - Button, Input компоненты
- **Story 12.4** - ProductCard компонент

Если эти stories не завершены, использовать временные стили, но структура должна быть готова к интеграции.

### Technical Constraints

- **TypeScript**: Строгая типизация всех props
- **Accessibility**: WCAG 2.1 AA compliance
- **Performance**:
  - Lazy loading изображений (next/image)
  - Оптимизированные изображения
- **Browser Support**: Chrome, Firefox, Safari, Edge

### Security Considerations

**Content Sanitization:**
- **Blog excerpts**: Если динамические данные, использовать DOMPurify или Next.js встроенную защиту от XSS
- **User-generated content**: Не применимо для этой story (статический контент)
- **Next.js защита**: Framework автоматически экранирует JSX content

**Content Security Policy (CSP):**
- CSP headers настраиваются на infrastructure уровне (nginx/next.config.ts)
- Для этой story: убедиться что все внешние ресурсы (если есть) допущены в CSP
- Изображения должны загружаться только с разрешенных доменов

**Рекомендации для dev agent:**
- Использовать `dangerouslySetInnerHTML` ТОЛЬКО если абсолютно необходимо и с sanitization
- Предпочитать React компоненты для рендеринга контента
- Все внешние ссылки должны иметь `rel="noopener noreferrer"`

### Image Assets Strategy

**ВАЖНО:** Для разработки использовать placeholder изображения до получения финальных assets.

**Стратегия работы с изображениями:**

1. **Для development и тестирования:**
   ```typescript
   // Использовать Next.js Image с placeholder
   import Image from 'next/image'

   <Image
     src="/images/categories/football.jpg"
     alt="Категория Футбол"
     width={300}
     height={200}
     placeholder="blur"
     blurDataURL="data:image/svg+xml;base64,..." // Next.js blur placeholder
   />
   ```

2. **Placeholder источники:**
   - **Next.js shimmer placeholder**: Встроенный shimmer эффект
   - **Public domain изображения**: Unsplash, Pexels (для dev режима)
   - **SVG placeholders**: Генерировать простые SVG с текстом категории

3. **Требуемые изображения:**
   - **Категории** (5 шт.): `/public/images/categories/`
     - `football.jpg`, `fitness.jpg`, `martial-arts.jpg`, `swimming.jpg`, `kids-transport.jpg`
     - Размер: 300x200px (aspect ratio 3:2)
   - **Блог статьи** (3+ шт.): `/public/images/blog/`
     - `article-1.jpg`, `article-2.jpg`, `article-3.jpg`
     - Размер: 400x225px (aspect ratio 16:9)
   - **OG Image**: `/public/og-image.jpg` (1200x630px)

4. **TODO - Epic для production assets:**
   - Создать отдельный Epic для разработки/подготовки финальных изображений
   - Включить: фотосессию продуктов, обработку, оптимизацию
   - До этого момента использовать placeholders

5. **Next.js Image оптимизация:**
   - Автоматическая оптимизация через Next.js Image API
   - WebP/AVIF автоконверсия
   - Responsive images с srcset

### Mock Data for Testing

**ВАЖНО:** Использовать следующие mock данные для development и тестирования.

**1. Mock категорий:**
```typescript
// frontend/src/__mocks__/categories.ts
export const MOCK_CATEGORIES = [
  {
    id: 1,
    name: 'Футбол',
    href: '/catalog/football',
    image: '/images/categories/football.jpg',
    alt: 'Спортивная одежда и инвентарь для футбола'
  },
  {
    id: 2,
    name: 'Фитнес',
    href: '/catalog/fitness',
    image: '/images/categories/fitness.jpg',
    alt: 'Товары для фитнеса и тренировок'
  },
  {
    id: 3,
    name: 'Единоборства',
    href: '/catalog/martial-arts',
    image: '/images/categories/martial-arts.jpg',
    alt: 'Экипировка для единоборств'
  },
  {
    id: 4,
    name: 'Плавание',
    href: '/catalog/swimming',
    image: '/images/categories/swimming.jpg',
    alt: 'Товары для плавания'
  },
  {
    id: 5,
    name: 'Детский транспорт',
    href: '/catalog/kids-transport',
    image: '/images/categories/kids-transport.jpg',
    alt: 'Детские велосипеды, самокаты, ролики'
  }
]
```

**2. Mock товаров для HitsSection и NewArrivalsSection:**
```typescript
// frontend/src/__mocks__/products.ts
export const MOCK_HIT_PRODUCTS = [
  {
    id: '1',
    name: 'Футбольный мяч Nike Premier League',
    brand: 'Nike',
    price: 4999,
    oldPrice: 6999,
    image: '/images/products/football-nike.jpg',
    rating: 4.8,
    reviewsCount: 124,
    badge: 'hit',
    inStock: true
  },
  {
    id: '2',
    name: 'Кроссовки Adidas Ultraboost',
    brand: 'Adidas',
    price: 12999,
    oldPrice: 15999,
    image: '/images/products/ultraboost.jpg',
    rating: 4.9,
    reviewsCount: 89,
    badge: 'hit',
    inStock: true
  },
  // ... ещё 4 товара для демонстрации
]

export const MOCK_NEW_PRODUCTS = [
  {
    id: '11',
    name: 'Беговая дорожка HouseFit',
    brand: 'HouseFit',
    price: 45999,
    image: '/images/products/treadmill.jpg',
    rating: 4.7,
    reviewsCount: 12,
    badge: 'new',
    inStock: true
  },
  // ... ещё 5 товаров
]
```

**3. Mock статей для NewsSection:**
```typescript
// frontend/src/__mocks__/blogPosts.ts
export const MOCK_BLOG_POSTS = [
  {
    id: '1',
    title: 'Как выбрать правильные кроссовки для бега',
    excerpt: 'Подробное руководство по выбору беговой обуви: типы стопы, пронация, амортизация.',
    image: '/images/blog/running-shoes-guide.jpg',
    date: '2025-11-15',
    slug: 'kak-vybrat-krossovki-dlya-bega',
    author: 'Алексей Петров',
    category: 'Советы'
  },
  {
    id: '2',
    title: '10 упражнений для домашних тренировок',
    excerpt: 'Эффективный комплекс упражнений без оборудования для поддержания формы дома.',
    image: '/images/blog/home-workout.jpg',
    date: '2025-11-12',
    slug: '10-uprazhneniy-dlya-doma',
    author: 'Мария Иванова',
    category: 'Тренировки'
  },
  {
    id: '3',
    title: 'Обзор новых моделей велосипедов 2025',
    excerpt: 'Разбираем лучшие новинки велосипедного рынка: горные, шоссейные, городские.',
    image: '/images/blog/bikes-2025.jpg',
    date: '2025-11-08',
    slug: 'obzor-velosipedov-2025',
    author: 'Дмитрий Сидоров',
    category: 'Обзоры'
  }
]
```

**Использование в компонентах:**
```typescript
// В разработке использовать mock данные
import { MOCK_CATEGORIES } from '@/__mocks__/categories'
import { MOCK_HIT_PRODUCTS } from '@/__mocks__/products'

// В production заменить на API calls
// const categories = await fetchCategories()
```

### Performance Metrics Requirements

**Целевые показатели Core Web Vitals для главной страницы:**

**Обязательные метрики:**
- **LCP (Largest Contentful Paint)**: ≤ 2.5s
  - Критичный элемент: Hero изображение или заголовок
  - Оптимизация: priority loading для hero, оптимизация изображений

- **FID (First Input Delay)**: ≤ 100ms
  - Интерактивность: кнопки Hero, навигация
  - Оптимизация: минимизация JavaScript, code splitting

- **CLS (Cumulative Layout Shift)**: ≤ 0.1
  - Стабильность: зарезервированное пространство для изображений
  - Использовать width/height для всех Image компонентов

**Дополнительные метрики:**
- **FCP (First Contentful Paint)**: ≤ 1.8s
  - Первый видимый контент: Header или Hero секция

- **TTI (Time to Interactive)**: ≤ 3.8s
  - Полная интерактивность страницы

- **Speed Index**: ≤ 3.4s
  - Скорость визуального отображения контента

**Бюджет производительности:**
- **Total Bundle Size**: ≤ 200KB (gzipped)
- **JavaScript Bundle**: ≤ 150KB (gzipped)
- **CSS Bundle**: ≤ 30KB (gzipped)
- **Images (initial load)**: ≤ 500KB (с lazy loading для below-fold)

**Мониторинг:**
- Использовать Lighthouse CI в GitHub Actions
- Threshold для прохождения CI: Performance Score ≥ 90
- Мониторинг Real User Metrics (RUM) в production

**Тестирование производительности:**
```bash
# Локальное тестирование Lighthouse
npm run build
npm run start
npx lighthouse http://localhost:3000 --view

# Проверка bundle size
npm run build
npm run analyze  # если настроен @next/bundle-analyzer
```

### Migration Strategy for Existing Components

**ВАЖНО:** Story 12.7 включает обновление существующих компонентов. Следовать стратегии ниже.

**1. SubscribeNewsSection (Task 7) - ОБНОВЛЕНИЕ существующего:**

**Текущее состояние:**
- Компонент существует: `frontend/src/components/home/SubscribeNewsSection.tsx`
- Используется на главной странице
- Может иметь existing стили

**Стратегия миграции:**

**Шаг 1: Аудит существующего компонента**
```typescript
// Проверить текущую реализацию
// Определить breaking changes
// Выявить dependencies (если компонент используется в других местах)
```

**Шаг 2: Обновление с сохранением интерфейса**
```typescript
// ❌ НЕ МЕНЯТЬ публичный API компонента без необходимости
interface SubscribeNewsSectionProps {
  // Сохранить существующие props
  // Добавить новые опциональные props если нужно
}

// ✅ Обновить только внутреннюю реализацию
// - Заменить старые цвета на новые design tokens
// - Обновить типографику
// - Заменить Button и Input на компоненты из Story 12.2
```

**Шаг 3: Обратная совместимость**
```typescript
// Если есть breaking changes, использовать feature flag подход
const SubscribeNewsSection = ({ useV2Styles = true, ...props }) => {
  return useV2Styles ? (
    <NewImplementation {...props} />
  ) : (
    <LegacyImplementation {...props} />
  )
}
```

**Шаг 4: Тестирование миграции**
- Запустить существующие тесты для SubscribeNewsSection
- Обновить snapshots если визуальные изменения ожидаемы
- Добавить тесты для новых стилей
- Проверить на главной странице в разных breakpoints

**2. HeroSection (Task 1) - ОБНОВЛЕНИЕ существующего:**

**Текущее состояние:**
- Компонент существует: `frontend/src/components/home/HeroSection.tsx`
- Создан в Epic 11

**Стратегия:**
- ✅ Обновить только стили, сохранить структуру
- ✅ Props interface может остаться неизменным
- ⚠️ Проверить что изменения не сломали Epic 11 acceptance criteria

**3. Другие секции (CategoriesSection, HitsSection и т.д.) - НОВЫЕ компоненты:**

**Стратегия:**
- ✅ Создавать с нуля согласно Design System v2.0
- ✅ Нет backward compatibility concerns
- ✅ Использовать новые design tokens с самого начала

**Контрольный чек-лист миграции:**

- [ ] Проверить `git log` для понимания истории компонента
- [ ] Запустить существующие тесты перед изменениями
- [ ] Сохранить публичный API компонента
- [ ] Обновить только стили и внутреннюю имплементацию
- [ ] Обновить/добавить тесты
- [ ] Проверить визуально в браузере (mobile/tablet/desktop)
- [ ] Убедиться что performance не ухудшилась
- [ ] Обновить Storybook stories (если используется)

**Rollback план:**
- Все изменения в отдельной feature ветке
- При критических проблемах: revert commit + hotfix
- Version control позволяет откат к предыдущей версии

## Testing

**Test file locations:**
- `frontend/src/components/home/__tests__/HeroSection.test.tsx`
- `frontend/src/components/home/__tests__/CategoriesSection.test.tsx`
- `frontend/src/components/home/__tests__/HitsSection.test.tsx`
- `frontend/src/components/home/__tests__/NewArrivalsSection.test.tsx`
- `frontend/src/components/home/__tests__/NewsSection.test.tsx`
- `frontend/src/components/layout/Footer/__tests__/Footer.test.tsx`

**Testing frameworks** [Source: CLAUDE.md]:
- Vitest 2.1.5 для unit тестов
- @testing-library/react 16.3.0 для компонентных тестов

**Test standards:**
- Каждый компонент тестируется отдельно
- Тестировать рендеринг с разными props
- Тестировать интерактивность (клики, hover)
- Тестировать адаптивность где возможно
- Тестировать accessibility атрибуты

**Coverage requirements:**
- Минимум 80% покрытие для всех компонентов

**Test commands:**
```bash
# Запуск тестов
npm test

# Запуск тестов с покрытием
npm run test:coverage

# Запуск конкретного теста
npx vitest run src/components/home/__tests__/HeroSection.test.tsx
```

**Пример теста HeroSection:**
```typescript
// HeroSection.test.tsx
import { render, screen } from '@testing-library/react'
import { HeroSection } from '../HeroSection'

describe('HeroSection', () => {
  it('renders hero section with correct styles', () => {
    render(<HeroSection />)

    const section = screen.getByRole('region', { name: /hero/i })
    expect(section).toHaveClass('bg-[#F5F7FB]')
  })

  it('renders main heading with correct typography', () => {
    render(<HeroSection />)

    const heading = screen.getByRole('heading', { level: 1 })
    expect(heading).toHaveClass('text-5xl', 'font-bold')
  })

  it('renders CTA button with correct styles', () => {
    render(<HeroSection />)

    const button = screen.getByRole('button', { name: /каталог/i })
    expect(button).toHaveClass('h-14', 'rounded-2xl')
  })

  it('has correct accessibility attributes', () => {
    render(<HeroSection />)

    expect(screen.getByRole('region')).toHaveAttribute('aria-label')
  })
})
```

**Пример теста CategoriesSection:**
```typescript
// CategoriesSection.test.tsx
import { render, screen } from '@testing-library/react'
import { CategoriesSection } from '../CategoriesSection'

describe('CategoriesSection', () => {
  it('renders 5 category cards', () => {
    render(<CategoriesSection />)

    const cards = screen.getAllByRole('link')
    expect(cards).toHaveLength(5)
  })

  it('renders category names correctly', () => {
    render(<CategoriesSection />)

    expect(screen.getByText('СПОРТ')).toBeInTheDocument()
    expect(screen.getByText('Фитнес')).toBeInTheDocument()
    expect(screen.getByText('Единоборства')).toBeInTheDocument()
  })

  it('category cards have correct href', () => {
    render(<CategoriesSection />)

    const sportLink = screen.getByRole('link', { name: /спорт/i })
    expect(sportLink).toHaveAttribute('href', '/catalog/sport')
  })

  it('renders images with alt text', () => {
    render(<CategoriesSection />)

    const images = screen.getAllByRole('img')
    images.forEach(img => {
      expect(img).toHaveAttribute('alt')
    })
  })
})
```

**Пример теста Footer:**
```typescript
// Footer.test.tsx
import { render, screen } from '@testing-library/react'
import { Footer } from '../Footer'

describe('Footer', () => {
  it('renders footer with dark background', () => {
    render(<Footer />)

    const footer = screen.getByRole('contentinfo')
    expect(footer).toHaveClass('bg-[#1F1F1F]')
  })

  it('renders all column titles', () => {
    render(<Footer />)

    expect(screen.getByText('О компании')).toBeInTheDocument()
    expect(screen.getByText('Каталог')).toBeInTheDocument()
    expect(screen.getByText('Помощь')).toBeInTheDocument()
    expect(screen.getByText('Контакты')).toBeInTheDocument()
  })

  it('renders social links', () => {
    render(<Footer />)

    expect(screen.getByLabelText('VK')).toBeInTheDocument()
    expect(screen.getByLabelText('Telegram')).toBeInTheDocument()
  })

  it('renders copyright', () => {
    render(<Footer />)

    expect(screen.getByText(/© 2025 FREESPORT/)).toBeInTheDocument()
  })
})
```

## Change Log

| Date       | Version | Description                              | Author       |
|------------|---------|------------------------------------------|--------------|
| 2025-11-20 | 1.0     | Создание story на основе Epic 12.7       | Bob (SM)     |
| 2025-11-20 | 1.1     | Добавлены: Security Considerations, Image Assets Strategy, Mock Data, Performance Metrics, Migration Strategy | Sarah (PO)   |

## Dev Agent Record

### Agent Model Used

_To be filled by dev agent_

### Debug Log References

_To be filled by dev agent_

### Completion Notes List

_To be filled by dev agent_

### File List

_To be filled by dev agent_

## QA Results

_To be filled by QA agent_
