# Story 11.2: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–•–∏—Ç—ã, –ù–æ–≤–∏–Ω–∫–∏, –ö–∞—Ç–µ–≥–æ—Ä–∏–∏)

## Status
**Draft**

## Story

**As a** –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—å –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã FREESPORT,
**I want** –≤–∏–¥–µ—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ–º—ã–µ –±–ª–æ–∫–∏ —Å —Ö–∏—Ç–∞–º–∏ –ø—Ä–æ–¥–∞–∂, –Ω–æ–≤–∏–Ω–∫–∞–º–∏ –∏ –ø–æ–ø—É–ª—è—Ä–Ω—ã–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ,
**so that** —è –º–æ–≥—É –±—ã—Å—Ç—Ä–æ –Ω–∞—Ö–æ–¥–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –∏ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã –∫–∞—Ç–∞–ª–æ–≥–∞ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏—Å–∫–∞—Ç—å –∏—Ö –≤—Ä—É—á–Ω—É—é.

## Acceptance Criteria

1. **–ë–ª–æ–∫ "–•–∏—Ç—ã –ø—Ä–æ–¥–∞–∂":**
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ `GET /api/v1/products?ordering=-sales&page_size=8`
   - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç 8 —Ç–æ–≤–∞—Ä–æ–≤ –≤ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–µ
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Card` –∏–∑ UI Kit —Å –≤–∞—Ä–∏–∞–Ω—Ç–æ–º "product"
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç `Badge` —Å –≤–∞—Ä–∏–∞–Ω—Ç–æ–º "hit" –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞

2. **–ë–ª–æ–∫ "–ù–æ–≤–∏–Ω–∫–∏":**
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ `GET /api/v1/products?ordering=-created_at&page_size=8`
   - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç 8 –Ω–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –≤ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–µ
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Card` –∏–∑ UI Kit
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç `Badge` —Å –≤–∞—Ä–∏–∞–Ω—Ç–æ–º "new" –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞

3. **–ë–ª–æ–∫ "–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏":**
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ `GET /api/v1/categories?level=1`
   - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–æ 6 –∫–æ—Ä–Ω–µ–≤—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π –≤ grid layout
   - –ö–∞–∂–¥–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞ –∏ –≤–µ–¥–µ—Ç –Ω–∞ `/catalog/[slug]`
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–∫–æ–Ω–∫—É –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤

4. **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã UI Kit:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã `Card`, `Badge` –∏–∑ `src/components/ui/`
   - –ü—Ä–∏–º–µ–Ω–µ–Ω—ã —Ç–æ–∫–µ–Ω—ã –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º—ã (spacing, shadows, radius)
   - –°–æ–±–ª—é–¥–µ–Ω–∞ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ —Å `scroll-snap` –¥–ª—è —Ç–æ–≤–∞—Ä–Ω—ã—Ö –±–ª–æ–∫–æ–≤

5. **Loading –∏ Error states:**
   - Skeleton loaders –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
   - Error state —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é retry –ø—Ä–∏ –æ—à–∏–±–∫–µ API
   - Graceful degradation: –ø—Ä–∏ –æ—à–∏–±–∫–µ –±–ª–æ–∫ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è, –Ω–æ –Ω–µ –ª–æ–º–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É

6. **Unit-—Ç–µ—Å—Ç—ã —Å MSW –º–æ–∫–∞–º–∏:**
   - –¢–µ—Å—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –±–ª–æ–∫–∞ (HitsSection, NewArrivalsSection, CategoriesSection)
   - MSW –º–æ–∫–∏ –¥–ª—è –≤—Å–µ—Ö API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ loading/error states
   - –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ 80%+

## Tasks / Subtasks

- [ ] **Task 1: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å API —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π** (AC: 1, 2, 3)
  - [ ] –°–æ–∑–¥–∞—Ç—å `src/services/productsService.ts` —Å –º–µ—Ç–æ–¥–∞–º–∏:
    - `getHits(params)` ‚Üí GET /products?ordering=-sales&page_size=8
    - `getNew(params)` ‚Üí GET /products?ordering=-created_at&page_size=8
  - [ ] –°–æ–∑–¥–∞—Ç—å `src/services/categoriesService.ts` —Å –º–µ—Ç–æ–¥–æ–º:
    - `getCategories(params)` ‚Üí GET /categories?level=1
  - [ ] –î–æ–±–∞–≤–∏—Ç—å TypeScript —Ç–∏–ø—ã –¥–ª—è Product –∏ Category –∏–∑ api.ts
  - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å error handling –∏ retry –ª–æ–≥–∏–∫—É

- [ ] **Task 2: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç HitsSection (–•–∏—Ç—ã –ø—Ä–æ–¥–∞–∂)** (AC: 1, 4, 5)
  - [ ] –°–æ–∑–¥–∞—Ç—å `src/components/home/HitsSection.tsx`
  - [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `productsService.getHits()` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
  - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—É—é –ø—Ä–æ–∫—Ä—É—Ç–∫—É —Å scroll-snap
  - [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Card` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
  - [ ] –î–æ–±–∞–≤–∏—Ç—å `Badge` variant="hit" –∫ –∫–∞–∂–¥–æ–π –∫–∞—Ä—Ç–æ—á–∫–µ
  - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Skeleton loader –¥–ª—è loading state
  - [ ] –î–æ–±–∞–≤–∏—Ç—å Error state —Å retry –∫–Ω–æ–ø–∫–æ–π
  - [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å design tokens (spacing: 16px gap, shadows.hover)

- [ ] **Task 3: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç NewArrivalsSection (–ù–æ–≤–∏–Ω–∫–∏)** (AC: 2, 4, 5)
  - [ ] –°–æ–∑–¥–∞—Ç—å `src/components/home/NewArrivalsSection.tsx`
  - [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `productsService.getNew()` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
  - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π HitsSection –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π scroll
  - [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å `Badge` variant="new"
  - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å loading/error states
  - [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å design tokens

- [ ] **Task 4: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç CategoriesSection (–ö–∞—Ç–µ–≥–æ—Ä–∏–∏)** (AC: 3, 5)
  - [ ] –°–æ–∑–¥–∞—Ç—å `src/components/home/CategoriesSection.tsx`
  - [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `categoriesService.getCategories({level: 1})`
  - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å grid layout (3 –∫–æ–ª–æ–Ω–∫–∏ –Ω–∞ desktop, 2 –Ω–∞ tablet, 1 –Ω–∞ mobile)
  - [ ] –ö–∞–∂–¥–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è ‚Äî –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ `/catalog/[slug]`
  - [ ] –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –∏–∫–æ–Ω–∫—É –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (emoji –∏–∑ API) –∏ products_count
  - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å loading/error states
  - [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å design tokens (cardGap: 16px, hover effects)

- [ ] **Task 5: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –±–ª–æ–∫–∏ –≤ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É** (AC: –í—Å–µ)
  - [ ] –û–±–Ω–æ–≤–∏—Ç—å `src/app/page.tsx`
  - [ ] –î–æ–±–∞–≤–∏—Ç—å `<HitsSection />`, `<NewArrivalsSection />`, `<CategoriesSection />`
  - [ ] –†–∞—Å–ø–æ–ª–æ–∂–∏—Ç—å –±–ª–æ–∫–∏ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ –ø–æ—Å–ª–µ HeroSection
  - [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å section spacing (48px –º–µ–∂–¥—É –±–ª–æ–∫–∞–º–∏)
  - [ ] –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ SSG/ISR —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

- [ ] **Task 6: Unit-—Ç–µ—Å—Ç—ã –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤** (AC: 6)
  - [ ] –°–æ–∑–¥–∞—Ç—å `src/components/home/__tests__/HitsSection.test.tsx`
    - –¢–µ—Å—Ç 1: –£—Å–ø–µ—à–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ 8 —Ç–æ–≤–∞—Ä–æ–≤
    - –¢–µ—Å—Ç 2: Loading state —Å skeleton loaders
    - –¢–µ—Å—Ç 3: Error state —Å retry –∫–Ω–æ–ø–∫–æ–π
    - –¢–µ—Å—Ç 4: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ Badge variant="hit"
  - [ ] –°–æ–∑–¥–∞—Ç—å `src/components/home/__tests__/NewArrivalsSection.test.tsx`
    - –ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å Badge variant="new"
  - [ ] –°–æ–∑–¥–∞—Ç—å `src/components/home/__tests__/CategoriesSection.test.tsx`
    - –¢–µ—Å—Ç 1: –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ 6 –∫–∞—Ç–µ–≥–æ—Ä–∏–π
    - –¢–µ—Å—Ç 2: Grid layout responsiveness
    - –¢–µ—Å—Ç 3: –°—Å—ã–ª–∫–∏ –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤–µ–¥—É—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ URL
  - [ ] –î–æ—Å—Ç–∏—á—å –ø–æ–∫—Ä—ã—Ç–∏—è 80%+

- [ ] **Task 7: MSW –º–æ–∫–∏ –¥–ª—è API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤** (AC: 6)
  - [ ] –°–æ–∑–¥–∞—Ç—å `src/__mocks__/api/handlers.ts`
  - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å MSW –º–æ–∫–∏ –¥–ª—è:
    - `GET /api/v1/products?ordering=-sales&page_size=8`
    - `GET /api/v1/products?ordering=-created_at&page_size=8`
    - `GET /api/v1/categories?level=1`
  - [ ] –î–æ–±–∞–≤–∏—Ç—å mock –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
  - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å error responses –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è error states

## Dev Notes

### –ü—Ä–µ–¥—ã–¥—É—â–∏–µ Story Insights

**Story 11.1 –∑–∞–≤–µ—Ä—à–µ–Ω–∞:**
- ‚úÖ –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–æ–∑–¥–∞–Ω–∞ (`src/app/page.tsx`)
- ‚úÖ HeroSection –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ UI Kit –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã (`src/components/ui/`)
- ‚úÖ Design system tokens –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ Tailwind

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Story 11.1:**
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –ü–û–°–õ–ï `<HeroSection />` –≤ `src/app/page.tsx`
- –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ –∂–µ design tokens –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã UI Kit
- –°–æ—Ö—Ä–∞–Ω—è–µ–º –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –∏ SSG/ISR –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

### API Specifications

**Backend API Endpoints:** [Source: docs/api-spec.yaml#paths]

**1. GET /products - –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤**
```yaml
Endpoint: GET /api/v1/products
Parameters:
  - ordering: string (enum: [name, -name, price, -price, created_at, -created_at, sales, -sales])
  - page_size: integer (default: 20, max: 100)
  - page: integer (default: 1)
  - category_id: integer (optional)
  - in_stock: boolean (optional)
Response: ProductList
  count: integer
  next: string | null
  previous: string | null
  results: Product[]
```

**Product Schema:** [Source: docs/api-spec.yaml#components/schemas/Product]
```typescript
interface Product {
  id: number;
  name: string;
  slug: string;
  description: string | null;
  sku: string;
  brand: string;
  category_id: number;
  images: ProductImage[];
  price: Price;
  stock_quantity: number;
  is_in_stock: boolean;
  created_at: string; // ISO date
  updated_at: string;
  specifications?: Record<string, any>; // JSONB
  related_products?: Product[];
}

interface ProductImage {
  id: number;
  image: string; // URL
  alt_text: string;
  is_primary: boolean;
}

interface Price {
  retail: number;
  wholesale: {
    level1: number;
    level2: number;
    level3: number;
  } | null;
  currency: string; // "RUB"
  current: number; // –î–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  discount_percent: number | null;
}
```

**2. GET /categories - –î–µ—Ä–µ–≤–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π**
```yaml
Endpoint: GET /api/v1/categories
Parameters:
  - parent_id: integer (optional, null –¥–ª—è –∫–æ—Ä–Ω–µ–≤—ã—Ö)
  - level: integer (optional, max —É—Ä–æ–≤–µ–Ω—å –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏)
Response: Category[]
```

**Category Schema:** [Source: docs/api-spec.yaml#components/schemas/Category]
```typescript
interface Category {
  id: number;
  name: string;
  slug: string;
  description: string | null;
  parent_id: number | null;
  level: number; // –£—Ä–æ–≤–µ–Ω—å –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏
  icon: string | null; // Emoji –∏–ª–∏ –∫–æ–¥ –∏–∫–æ–Ω–∫–∏
  products_count: number;
  children: Category[]; // –î–æ—á–µ—Ä–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
}
```

### API Service Implementation

**Products Service:** [Source: docs/architecture/tech-stack.md#Axios]

```typescript
// src/services/productsService.ts
import { apiClient } from './api-client';
import type { Product, ProductList } from '@/types/api';

interface GetProductsParams {
  ordering?: string;
  page_size?: number;
  page?: number;
  category_id?: number;
  in_stock?: boolean;
}

export const productsService = {
  /**
   * –ü–æ–ª—É—á–∏—Ç—å —Ö–∏—Ç—ã –ø—Ä–æ–¥–∞–∂
   */
  async getHits(params?: Partial<GetProductsParams>): Promise<Product[]> {
    const { data } = await apiClient.get<ProductList>('/products', {
      params: {
        ordering: '-sales', // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º (—É–±—ã–≤.)
        page_size: 8,
        in_stock: true,
        ...params,
      },
    });
    return data.results;
  },

  /**
   * –ü–æ–ª—É—á–∏—Ç—å –Ω–æ–≤–∏–Ω–∫–∏
   */
  async getNew(params?: Partial<GetProductsParams>): Promise<Product[]> {
    const { data } = await apiClient.get<ProductList>('/products', {
      params: {
        ordering: '-created_at', // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ –ø–µ—Ä–≤—ã–µ)
        page_size: 8,
        in_stock: true,
        ...params,
      },
    });
    return data.results;
  },
};
```

**Categories Service:**

```typescript
// src/services/categoriesService.ts
import { apiClient } from './api-client';
import type { Category } from '@/types/api';

interface GetCategoriesParams {
  parent_id?: number | null;
  level?: number;
}

export const categoriesService = {
  /**
   * –ü–æ–ª—É—á–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
   */
  async getCategories(params?: GetCategoriesParams): Promise<Category[]> {
    const { data } = await apiClient.get<Category[]>('/categories', {
      params,
    });
    return data;
  },
};
```

### Component Specifications

**Card Component:** [Source: frontend/docs/design-system.json#components.Card]
```typescript
// –ò–∑ Epic 10 - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ –µ—Å—Ç—å
interface CardProps {
  children: React.ReactNode;
  hover?: boolean; // –î–æ–±–∞–≤–ª—è–µ—Ç hover:shadow-hover –∏ -translate-y
  className?: string;
}

// Design tokens:
// - Padding: 24px
// - Border radius: 12px (radius.default)
// - Shadow: shadows.default (0 8px 24px rgba(15, 23, 42, 0.08))
// - Hover shadow: shadows.hover (0 10px 32px rgba(15, 23, 42, 0.12))
```

**Badge Component:** [Source: frontend/docs/design-system.json#components.Badge]
```typescript
interface BadgeProps {
  variant: 'hit' | 'new' | 'sale' | 'discount' | 'premium' | 'promo' | 'delivered' | 'transit' | 'cancelled';
  children: React.ReactNode;
}

// Variants tokens:
// hit: { background: "#E3F6EC", textColor: "#1F7A4A" }
// new: { background: "#E1F0FF", textColor: "#0F5DA3" }
// sale: { background: "#F9E1E1", textColor: "#A63232" }

// Shape: rounded-full
```

**RecommendationsRow Component:** [Source: frontend/docs/design-system.json#components.RecommendationsRow]
```typescript
// –û–ø–∏—Å–∞–Ω–∏–µ: –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ª–µ–Ω—Ç–∞ —Ç–æ–≤–∞—Ä–æ–≤
// Behavior: scroll snap, –∫–∞—Ä—Ç–æ—á–∫–∏ 180px —à–∏—Ä–∏–Ω–∞
// Content: title, rating (–µ—Å–ª–∏ –µ—Å—Ç—å), price, optional badge
// Interaction: –ö–∞—Ä—Ç–æ—á–∫–∏ –ø–æ–ª—É—á–∞—é—Ç hover shadow
// Usage: –î–ª—è –±–ª–æ–∫–æ–≤ —Ö–∏—Ç–æ–≤ –∏ –Ω–æ–≤–∏–Ω–æ–∫

interface RecommendationsRowProps {
  title: string;
  products: Product[];
  badgeVariant?: 'hit' | 'new';
}

// Tokens:
// - Scroll behavior: scroll-snap-type: x mandatory
// - Card width: 180px
// - Card spacing (gap): 16px
// - Section padding: 32px 24px
// - Title style: title-m (20px, 28px line-height, 600 weight)
```

### Design System Tokens

**Layout –∏ Spacing:** [Source: frontend/docs/design-system.json#foundations.spacing, #layout]

```typescript
// Section spacing –º–µ–∂–¥—É –±–ª–æ–∫–∞–º–∏
sectionSpacing.default: 48px

// Component spacing –¥–ª—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
componentSpacing.cardGap: 16px

// Grid –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
grid.gutters: 24px
grid.breakpoints: {
  mobile: 640px,   // 1 –∫–æ–ª–æ–Ω–∫–∞
  tablet: 1024px,  // 2 –∫–æ–ª–æ–Ω–∫–∏
  desktop: 1440px  // 3 –∫–æ–ª–æ–Ω–∫–∏
}
```

**Shadows –∏ Motion:** [Source: frontend/docs/design-system.json#foundations.shadows, #foundations.motion]

```typescript
shadows.default: "0 8px 24px rgba(15, 23, 42, 0.08)"
shadows.hover: "0 10px 32px rgba(15, 23, 42, 0.12)"

motion.duration.short: 120ms
motion.duration.medium: 180ms
motion.easing: "cubic-bezier(0.4, 0, 0.2, 1)"

// Hover interaction: translateY(-2px)
```

### File Structure

```
src/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îî‚îÄ‚îÄ page.tsx                    # –û–±–Ω–æ–≤–∏—Ç—å: –¥–æ–±–∞–≤–∏—Ç—å –±–ª–æ–∫–∏
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ ui/                         # –ò–∑ Epic 10
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Card.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Badge.tsx
‚îÇ   ‚îî‚îÄ‚îÄ home/
‚îÇ       ‚îú‚îÄ‚îÄ HeroSection.tsx         # –ò–∑ Story 11.1
‚îÇ       ‚îú‚îÄ‚îÄ HitsSection.tsx         # ‚Üê –°–û–ó–î–ê–¢–¨
‚îÇ       ‚îú‚îÄ‚îÄ NewArrivalsSection.tsx  # ‚Üê –°–û–ó–î–ê–¢–¨
‚îÇ       ‚îî‚îÄ‚îÄ CategoriesSection.tsx   # ‚Üê –°–û–ó–î–ê–¢–¨
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ api-client.ts               # –ò–∑ Epic 10
‚îÇ   ‚îú‚îÄ‚îÄ productsService.ts          # ‚Üê –°–û–ó–î–ê–¢–¨
‚îÇ   ‚îî‚îÄ‚îÄ categoriesService.ts        # ‚Üê –°–û–ó–î–ê–¢–¨
‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îî‚îÄ‚îÄ api.ts                      # –û–±–Ω–æ–≤–∏—Ç—å: –¥–æ–±–∞–≤–∏—Ç—å Product, Category —Ç–∏–ø—ã
‚îî‚îÄ‚îÄ __mocks__/
    ‚îî‚îÄ‚îÄ api/
        ‚îî‚îÄ‚îÄ handlers.ts             # ‚Üê –°–û–ó–î–ê–¢–¨: MSW handlers
```

### Loading & Error States Implementation

**Skeleton Loader Pattern:**

```typescript
// –ò—Å–ø–æ–ª—å–∑—É–µ–º Tailwind pulse animation
<div className="grid grid-cols-4 gap-4">
  {[...Array(8)].map((_, i) => (
    <div key={i} className="animate-pulse">
      <div className="h-48 bg-neutral-200 rounded-lg"></div>
      <div className="mt-2 h-4 bg-neutral-200 rounded w-3/4"></div>
      <div className="mt-2 h-4 bg-neutral-200 rounded w-1/2"></div>
    </div>
  ))}
</div>
```

**Error State Pattern:**

```typescript
// Error state —Å retry
{error && (
  <div className="text-center py-8">
    <p className="text-text-secondary mb-4">
      –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
    </p>
    <Button variant="secondary" onClick={handleRetry}>
      –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É
    </Button>
  </div>
)}
```

### Horizontal Scroll Implementation

**Scroll Snap Pattern:** [Source: frontend/docs/design-system.json#components.RecommendationsRow]

```tsx
<div
  className="
    flex gap-4 overflow-x-auto pb-4
    scroll-smooth snap-x snap-mandatory
    scrollbar-hide
  "
>
  {products.map((product) => (
    <div key={product.id} className="snap-start shrink-0 w-[180px]">
      <Card hover>
        <Badge variant="hit">{product.name}</Badge>
        {/* Product content */}
      </Card>
    </div>
  ))}
</div>

// Tailwind config –¥–ª—è scrollbar-hide:
// @layer utilities {
//   .scrollbar-hide {
//     -ms-overflow-style: none;
//     scrollbar-width: none;
//   }
//   .scrollbar-hide::-webkit-scrollbar {
//     display: none;
//   }
// }
```

### Testing

**MSW Setup:** [Source: frontend/docs/testing-standards.md#Integration —Ç–µ—Å—Ç—ã]

```typescript
// src/__mocks__/api/handlers.ts
import { rest } from 'msw';

export const handlers = [
  // –•–∏—Ç—ã –ø—Ä–æ–¥–∞–∂
  rest.get('/api/v1/products', (req, res, ctx) => {
    const ordering = req.url.searchParams.get('ordering');

    if (ordering === '-sales') {
      return res(
        ctx.status(200),
        ctx.json({
          count: 8,
          next: null,
          previous: null,
          results: [
            {
              id: 1,
              name: '–•–∏—Ç –ø—Ä–æ–¥–∞–∂ 1',
              slug: 'hit-1',
              price: { retail: 1000, current: 1000, currency: 'RUB' },
              is_in_stock: true,
              images: [{ id: 1, image: '/img/hit-1.jpg', is_primary: true }],
              // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
            },
            // ... –µ—â–µ 7 —Ç–æ–≤–∞—Ä–æ–≤
          ],
        })
      );
    }

    if (ordering === '-created_at') {
      return res(ctx.status(200), ctx.json({ /* –ù–æ–≤–∏–Ω–∫–∏ */ }));
    }
  }),

  // –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
  rest.get('/api/v1/categories', (req, res, ctx) => {
    return res(
      ctx.status(200),
      ctx.json([
        {
          id: 1,
          name: '–°–ø–æ—Ä—Ç',
          slug: 'sport',
          icon: 'üèÉ',
          products_count: 150,
          level: 1,
          children: [],
        },
        // ... –µ—â–µ 5 –∫–∞—Ç–µ–≥–æ—Ä–∏–π
      ])
    );
  }),
];
```

**Unit Test Example:**

```typescript
// src/components/home/__tests__/HitsSection.test.tsx
import { render, screen, waitFor } from '@testing-library/react';
import { HitsSection } from '../HitsSection';
import { server } from '@/__mocks__/api/server';
import { rest } from 'msw';

describe('HitsSection', () => {
  it('loads and displays 8 hit products', async () => {
    render(<HitsSection />);

    // Loading state
    expect(screen.getAllByRole('status')).toHaveLength(8); // Skeletons

    // Success state
    await waitFor(() => {
      expect(screen.getByText('–•–∏—Ç –ø—Ä–æ–¥–∞–∂ 1')).toBeInTheDocument();
    });

    const badges = screen.getAllByText(/–•–∏—Ç/i);
    expect(badges).toHaveLength(8);
  });

  it('shows error state on API failure', async () => {
    server.use(
      rest.get('/api/v1/products', (req, res, ctx) => {
        return res(ctx.status(500));
      })
    );

    render(<HitsSection />);

    await waitFor(() => {
      expect(screen.getByText(/–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å/i)).toBeInTheDocument();
      expect(screen.getByRole('button', { name: /–ü–æ–≤—Ç–æ—Ä–∏—Ç—å/i })).toBeInTheDocument();
    });
  });
});
```

**Coverage Requirements:** [Source: docs/architecture/10-testing-strategy.md]
- –ú–∏–Ω–∏–º—É–º 80% –ø–æ–∫—Ä—ã—Ç–∏–µ –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- 100% –ø–æ–∫—Ä—ã—Ç–∏–µ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö user flows (loading, error, success states)

### Technical Constraints

1. **Performance:**
   - Lazy loading –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ `next/image`
   - Optimistic rendering: –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å skeleton —Å—Ä–∞–∑—É, –∑–∞–≥—Ä—É–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
   - –ú–µ–º–æ–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ `React.memo` –µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ

2. **Accessibility:**
   - –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ keyboard (tab navigation)
   - aria-label –¥–ª—è –±–ª–æ–∫–æ–≤ ("–•–∏—Ç—ã –ø—Ä–æ–¥–∞–∂", "–ù–æ–≤–∏–Ω–∫–∏")
   - Skeleton loaders –∏–º–µ—é—Ç `role="status"` –∏ `aria-busy="true"`

3. **SEO Considerations:**
   - SSG —Ä–µ–Ω–¥–µ—Ä–∏—Ç –±–ª–æ–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
   - ISR (revalidate: 3600) –æ–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –∫–∞–∂–¥—ã–π —á–∞—Å
   - Structured data (JSON-LD) –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## Change Log

| Date       | Version | Description                              | Author        |
|------------|---------|------------------------------------------|---------------|
| 2025-11-16 | 1.0     | Initial story creation                   | Bob (SM)      |

## Dev Agent Record

### Agent Model Used
_To be filled by Dev Agent_

### Debug Log References
_To be filled by Dev Agent_

### Completion Notes List
_To be filled by Dev Agent_

### File List
_To be filled by Dev Agent_

## QA Results
_To be filled by QA Agent_
