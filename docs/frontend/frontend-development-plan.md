# Итоговый план разработки Frontend-приложения FREESPORT

Этот документ определяет единый, исчерпывающий план для старта и последовательной реализации frontend-части платформы FREESPORT. Он объединяет продуктовую дорожную карту с ключевыми техническими решениями и практиками.

## 1. Общие принципы реализации

1.  **API-first**: Каждая функция интерфейса опирается на существующие и задокументированные REST-эндпоинты.
2.  **Чистая архитектура**: Строгое разделение на слои: `services` (API), `stores` (состояние), `components` (UI), `app` (страницы и роутинг).
3.  **Типобезопасность и стандарты кода**: Обязательное использование TypeScript, следование правилам ESLint/Prettier и покрытие критического функционала тестами.
4.  **Гибридный рендеринг**: Использование Next.js App Router с Server Components для SEO-значимых страниц (каталог, товары) и Client Components для интерактивных секций (личный кабинет, корзина).
5.  **Без входа через соцсети**: На данном этапе регистрация и авторизация реализуются только через email/пароль.

## 2. Фаза 1: Фундамент и подготовка

Цель: Создать прочную техническую основу для быстрой и качественной разработки.

### 2.1. Подготовка окружения и качества кода
- **Задача:** Настроить и автоматизировать проверку качества кода.
- **Действия:**
    - Проверить работоспособность Docker-окружения (`make up`).
    - Синхронизировать и заполнить переменные в `frontend/.env.local`.
    - Доработать конфигурацию ESLint (`eslint.config.mjs`) плагинами `react-hooks` и `jsx-a11y`.
    - Настроить Prettier и, опционально, `lint-staged` для форматирования кода перед коммитом.

### 2.2. Архитектура и UI Kit
- **Задача:** Реализовать базовую структуру приложения и набор переиспользуемых компонентов.
- **Действия:**
    - Создать глобальный `layout.tsx` с основными провайдерами (тема, состояние).
    - Реализовать базовый UI-Kit в `src/components/ui/` (Button, Input, Modal, Spinner и т.д.) согласно `front-end-spec.md`.
    - Настроить Zustand-сторы для `authStore`, `cartStore`.

### 2.3. Слой взаимодействия с API
- **Задача:** Создать надежный и масштабируемый слой для работы с API.
- **Действия:**
    - Создать централизованный `axios` клиент в `src/services/api-client.ts` с интерцепторами для автоматического добавления JWT и обработки ошибки 401 (обновление токена).
    - Сгенерировать или описать TypeScript-типы для всех API-ответов на основе `api-spec.yaml`.
    - Реализовать сервисные функции для всех ключевых эндпоинтов (auth, products, categories, cart, orders).

## 3. Фаза 2: Реализация страниц и пользовательских сценариев

Цель: Реализовать все ключевые страницы и пользовательские сценарии, описанные в требованиях.

### 3.1. Основные страницы
- **Главная страница (`/`)**: Реализовать все динамические блоки (баннер, хиты, новинки, категории, новости) и форму подписки.
- **Каталог товаров (`/catalog/[[...slug]]`)**: Создать страницу с поддержкой вложенных категорий, фильтрами, сортировкой и переключением вида. Использовать SSR/ISR для SEO.
- **Карточка товара (`/product/[slug]`)**: Реализовать галерею, выбор опций, отображение наличия, кнопки "В корзину" и "В избранное".
- **Поиск (`/search`)**: Создать страницу результатов поиска с фильтрацией и компонент поиска с автодополнением.

### 3.2. Пользовательский флоу (Аутентификация и Покупка)
- **Регистрация и Авторизация**:
  - **Задача:** Обеспечить единый флоу для B2C и B2B.
  - **Действия:** Реализовать страницы `/login`, `/password-reset`. Создать отдельные формы/страницы для регистрации B2C (`/register`) и B2B (`/b2b-register`) с логикой верификации.
- **Интеграция ролевой модели**: Адаптировать UI (цены, доступный функционал) на основе роли пользователя, получаемой из `authStore`.
- **Корзина (`/cart`)**: Реализовать страницу просмотра и редактирования корзины, включая применение промокодов.
- **Оформление заказа (`/checkout`)**: Реализовать Single Page Checkout с единой формой для всех данных.

### 3.3. Личный кабинет (`/profile/...`)
- **Задача:** Создать все разделы личного кабинета.
- **Действия:**
  - `/profile`: Редактирование личных данных.
  - `/profile/orders`: История заказов с детализацией.
  - `/profile/addresses`: Управление адресами доставки.
  - `/profile/favorites`: Список избранных товаров.

### 3.4. Информационные страницы (`/info/[slug]`)
- **Задача:** Создать шаблон для статических страниц.
- **Действия:** Реализовать динамический роут, который будет загружать контент из `/pages/` API.

## 4. Контроль качества и тестирование

- **Unit-тесты**: Обязательное покрытие тестами (Jest + Testing Library) всех UI-компонентов и критической бизнес-логики (функции в сторах, утилиты).
- **E2E-тесты**: Настроить Playwright или Cypress для тестирования ключевых сценариев: регистрация, вход, поиск товара, добавление в корзину, оформление заказа.
- **CI/CD**: Настроить GitHub Actions для автоматического запуска линтеров и тестов при создании Pull Request.
- **Аудит**: Проводить регулярный аудит производительности (Lighthouse) и доступности (WCAG 2.1 AA) для ключевых страниц.

## 5. Риски и открытые вопросы

- **API для промокодов и автодополнения поиска**: Требуется подтверждение и, возможно, расширение API перед началом реализации.
- **Источники контента**: Необходимо уточнить, откуда будут поступать данные для блоков "Новости" и "Коллекции" — через API или из CMS.
- **Статусы заказов**: Требуется финализировать и согласовать с бэкендом все статусы заказов, которые будут отображаться в личном кабинете.

Этот план является основой для декомпозиции на User Stories и планирования спринтов.