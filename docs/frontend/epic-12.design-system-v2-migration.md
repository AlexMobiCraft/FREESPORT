# Epic 12: Design System v2.0 Migration

## Epic Goal

Мигрировать все существующие frontend компоненты и страницы FREESPORT на обновленную дизайн-систему v2.0, обеспечив единообразный визуальный стиль, улучшенный UX и соответствие новым требованиям `docs/front-end-spec.md`.

## Epic Description

### Контекст изменений

19 ноября 2025 года в `docs/front-end-spec.md` была внесена масштабная ревизия дизайн-системы (версия 2.0), включающая:

**Кардинальные изменения:**
- **Новая цветовая палитра** - переход от цветной к монохромной графитовой схеме
- **Обновленная типографика** - новая шрифтовая система Inter + новая шкала размеров
- **Переработанные принципы дизайна** - 8 новых принципов (было 5)
- **Новые UI компоненты** - обновленные specs для всех компонентов
- **Переработанные макеты страниц** - новые wireframes для всех страниц

### Scope миграции

**Существующие компоненты (требуют обновления):**
- UI Kit: Button, Input, Badge, Header
- Home: HeroSection
- Stores: authStore, cartStore

**Новые компоненты (требуют создания):**
- ProductCard (grid/list layouts)
- Breadcrumbs, Pagination, Tabs
- FilterSidebar, SearchField
- Modal, Toast, Chip, Tag
- CartItem, OrderStatus

**Страницы (требуют обновления/создания):**
- Главная страница
- Каталог товаров
- Карточка товара
- Корзина и Checkout
- Личный кабинет (профиль, заказы, адреса)
- Информационные страницы

### Business Value

- Улучшение UX и конверсии B2B/B2C клиентов
- Единообразный визуальный стиль платформы
- Соответствие современным стандартам UI/UX
- Подготовка к production-запуску

## Stories

### Story 12.1: Обновление дизайн-токенов
**Цель:** Создать/обновить design tokens (цвета, типографика, spacing, радиусы, тени)
- Обновить `frontend/docs/design-system.json`
- Обновить Tailwind конфигурацию
- Создать CSS переменные для темизации
- Задокументировать миграцию с v1.x на v2.0

### Story 12.2: Миграция базовых UI компонентов
**Цель:** Обновить Button, Input, Badge под новую дизайн-систему
- Применить новые цвета primary (#1F1F1F)
- Обновить радиусы (6px для кнопок)
- Обновить типографику (Inter)
- Обновить тени и анимации
- Добавить новые варианты (если требуется)

### Story 12.3: Обновление навигационных компонентов
**Цель:** Создать/обновить Breadcrumbs, Pagination, Tabs, Header
- Реализовать Breadcrumbs с разделителями
- Создать Pagination компонент
- Реализовать Tabs с underline стилем
- Обновить Header под новый макет

### Story 12.4: Карточки товаров и списки
**Цель:** Создать ProductCard с grid/list layouts
- Grid карточка: изображение, бренд, название, цена, CTA
- List карточка: горизонтальный layout
- Бейджи (SALE, NEW, HIT)
- Кнопка "В избранное"
- Адаптивные стили

### Story 12.5: Фильтры и поиск
**Цель:** Создать SidebarFilters, SearchField, сортировку
- Боковая панель фильтров (категории, бренды, цена, размер)
- Checkbox и Toggle компоненты
- Select/Dropdown
- SearchField с автодополнением
- Сортировка товаров

### Story 12.6: Модальные окна и уведомления
**Цель:** Создать Modal, Toast, Dialog компоненты
- Modal с размерами (sm, md, lg, xl, full)
- Toast уведомления (success, error, warning, info)
- Confirmation dialogs
- Модалка размерной сетки

### Story 12.7: Обновление Главной страницы
**Цель:** Обновить главную страницу согласно новому макету v2.0
- Обновить HeroSection под новые дизайн-токены (цвета, типографика)
- Блок "Категории" с изображениями и иконками (5 категорий)
- Блок "Хиты продаж" с карточками товаров (ProductCard)
- Блок "Наш блог" с превью статей
- Обновленный Footer с навигацией и контактами
- Адаптивность mobile/tablet/desktop
- SEO метатеги

### Story 12.8: Обновление страницы Каталога
**Цель:** Реализовать страницу каталога согласно новому макету

- Sidebar с фильтрами
- Grid товаров с переключением grid/list
- Пагинация
- Сортировка
- Breadcrumbs
- SEO оптимизация

### Story 12.9: Обновление карточки Товара
**Цель:** Реализовать PDP (Product Detail Page) согласно новому макету

- Галерея изображений с превью
- Информация о товаре (артикул, бренд, рейтинг)
- Выбор размера/цвета
- CTA кнопки (корзина, избранное)
- Табы (описание, характеристики, отзывы)
- Блок "С этим товаром покупают"

### Story 12.10: Обновление Корзины и Checkout
**Цель:** Реализовать страницы корзины и оформления заказа

- Список товаров в корзине с редактированием
- Итоги заказа с промокодом
- Single Page Checkout (данные, доставка, оплата)
- Валидация форм

### Story 12.11: Обновление Личного кабинета
**Цель:** Обновить страницы ЛК согласно новым макетам

- Sidebar навигация ЛК
- Страница "Мой профиль"
- Страница "Мои заказы" со статусами
- Страница "Адреса доставки"
- Настройки рассылок

### Story 12.12: Визуальное тестирование и QA
**Цель:** Провести визуальную регрессию и QA всех обновленных компонентов

- Visual regression тесты
- Cross-browser тестирование
- Адаптивность (mobile/tablet/desktop)
- Accessibility audit (WCAG 2.1 AA)
- Performance audit (Core Web Vitals)

## Dependencies

### Внутренние зависимости
- **Epic 10:** UI Kit базовые компоненты (Button, Header) - будут обновлены
- **Epic 11:** HeroSection - будет обновлен под новые токены

### Внешние зависимости
- `docs/front-end-spec.md` v2.0 - источник истины для дизайна
- `frontend/docs/design-system.json` - design tokens
- Figma макеты (если доступны)

## Technical Considerations

### Breaking Changes
Миграция дизайн-системы является **breaking change**. Все существующие компоненты требуют обновления.

### Стратегия миграции
1. **Фаза 1 (Stories 12.1-12.2):** Обновить токены и базовые компоненты
2. **Фаза 2 (Stories 12.3-12.6):** Создать новые компоненты
3. **Фаза 3 (Stories 12.7-12.10):** Обновить страницы
4. **Фаза 4 (Story 12.11):** QA и тестирование

### Риски и митигация
| Риск | Митигация |
|------|-----------|
| Визуальная регрессия | Visual regression тесты, code review |
| Проблемы доступности | Accessibility audit каждой story |
| Производительность | Lighthouse CI, bundle size мониторинг |
| Совместимость браузеров | BrowserStack тестирование |

## Definition of Done

- [ ] Все Stories завершены с выполнением Acceptance Criteria
- [ ] Тестовое покрытие >= 80% для всех компонентов
- [ ] Visual regression тесты пройдены
- [ ] Accessibility audit пройден (WCAG 2.1 AA)
- [ ] Performance audit пройден (Core Web Vitals в зеленой зоне)
- [ ] Cross-browser тестирование пройдено
- [ ] Документация обновлена
- [ ] Code review пройден

## Estimated Effort

| Story | Сложность | Story Points |
|-------|-----------|--------------|
| 12.1 Дизайн-токены | Средняя | 5 |
| 12.2 Базовые UI | Средняя | 5 |
| 12.3 Навигация | Средняя | 5 |
| 12.4 Карточки | Высокая | 8 |
| 12.5 Фильтры и поиск | Высокая | 8 |
| 12.6 Модалки | Средняя | 5 |
| 12.7 Главная страница | Средняя | 5 |
| 12.8 Каталог | Высокая | 8 |
| 12.9 PDP | Высокая | 8 |
| 12.10 Корзина/Checkout | Высокая | 8 |
| 12.11 Личный кабинет | Высокая | 8 |
| 12.12 QA | Средняя | 5 |
| **Итого** | | **78 SP** |

## Priority

**HIGH** - Критически важно для production-запуска. Текущий дизайн не соответствует утвержденной спецификации.

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-11-19 | 1.0 | Создание Epic на основе анализа front-end-spec.md v2.0 | Sarah (PO) |

