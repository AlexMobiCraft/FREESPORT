---
name: backend-lint
description: Используй этот навык для проверки и автоматического исправления форматирования кода бекенда с помощью Black и Flake8. Активируй при запросах "проверь линтером", "исправь форматирование", "запусти black/flake8", "подготовь код к CI/CD".
---

# Backend Linting Skill

Этот навык обеспечивает соответствие кода бекенда стандартам проекта (Black, Flake8), которые проверяются в GitHub CI/CD.

## Основные инструменты

1.  **Black**: Автоматический форматировщик кода.
2.  **Flake8**: Линтер для проверки соблюдения стиля PEP 8 и поиска программных ошибок.

## Инструкции по выполнению

### 1. Запуск Black (Автоисправление)

Чтобы автоматически исправить форматирование во всем проекте или конкретных файлах, используй:

```powershell
# Весь бекенд
venv\Scripts\python.exe -m black .

# Конкретные файлы/папки
venv\Scripts\python.exe -m black apps/orders/ tests/
```

### 2. Запуск Flake8 (Проверка)

Для проверки кода без внесения изменений:

```powershell
# Использование настроек из CI/CD
venv\Scripts\python.exe -m flake8 . --max-line-length=120 --extend-ignore=E203,W503
```

> [!TIP]
> Всегда запускай команды из директории `backend/`.

## Типичный рабочий процесс перед Push

Если вы получили ошибку в CI/CD (как в GitHub Actions), следуйте этому алгоритму:

1.  Перейдите в папку `backend/`.
2.  Запустите форматирование: `venv\Scripts\python.exe -m black .`
3.  Проверьте ошибки стиля: `venv\Scripts\python.exe -m flake8 . --max-line-length=120 --extend-ignore=E203,W503`
4.  Если Flake8 находит ошибки (например, неиспользуемые импорты), исправьте их вручную.
5.  Закоммитьте изменения.

## Важные нюансы для Windows

*   Всегда используй `venv\Scripts\python.exe -m <tool>`, если прямой вызов `.exe` не срабатывает.
*   Убедись, что находишься в директории `backend/`, так как `venv` находится именно там.
