# **CLAUDE.md**

–≠—Ç–æ—Ç —Ñ–∞–π–ª –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–¥–æ–º –≤ —ç—Ç–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

## **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞**

FREESPORT \- API-First E-commerce –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è B2B/B2C –ø—Ä–æ–¥–∞–∂ —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤. Monorepo –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å Django REST API backend –∏ Next.js frontend.

### **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫**

**Backend:**

* Django 4.2 LTS \+ Django REST Framework 3.14+  
* **PostgreSQL 15+ (–¢–û–õ–¨–ö–û PostgreSQL)** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ JSONB
* Redis 7.0+ (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–µ—Å—Å–∏–∏)  
* JWT —Ç–æ–∫–µ–Ω—ã –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å refresh —Å—Ç—Ä–∞—Ç–µ–≥–∏–µ–π  
* Celery \+ Celery Beat (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫)  
* **drf-spectacular** –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ OpenAPI 3.1.0

**–í–ê–ñ–ù–û:** –ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å PostgreSQL. SQLite, MySQL –∏ –¥—Ä—É–≥–∏–µ –°–£–ë–î –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è.

**Frontend:**

* Next.js 14+ \+ TypeScript 5.0+  
* React 19.1.0  
* Zustand (state management)  
* Tailwind CSS 4.0  
* **React Hook Form** (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞–º–∏)  
* **Jest \+ React Testing Library** (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

**–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**

* Nginx (reverse proxy, SSL, load balancing)  
* **Docker \+ Docker Compose (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)**
* **PostgreSQL 15+ –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ** —Å JSONB –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π —Ç–æ–≤–∞—Ä–æ–≤  
* **GitHub Actions** (CI/CD)

**–ö–†–ò–¢–ò–ß–ù–û:** –í—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–µ–ø–ª–æ–π –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ Docker. –õ–æ–∫–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ë–î –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è.

### **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã**

**API-First \+ SSR/SSG Approach:**

* –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç SEO –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å  
* –ù–µ–∑–∞–≤–∏—Å–∏–º–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ frontend –∏ backend  
* Next.js Hybrid Rendering: SSG –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü, SSR –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö, ISR –¥–ª—è –∫–∞—Ç–∞–ª–æ–≥–æ–≤

**BFF (Backend for Frontend) Layer:**

* Next.js API Routes –∫–∞–∫ –ø—Ä–æ—Å–ª–æ–π–∫–∞ –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö  
* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ –æ—Å–Ω–æ–≤–Ω—ã–º API

**Monorepo Structure:**

* –£–ø—Ä–æ—â–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—â–∏–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ –º–µ–∂–¥—É –±—Ä–µ–Ω–¥–∞–º–∏  
* –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π Django**

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–¥—É–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É Django apps:

* apps/users/ \- –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ —Ä–æ–ª–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ (7 —Ä–æ–ª–µ–π: retail, wholesale\_level1-3, trainer, federation\_rep, admin)  
* apps/products/ \- –∫–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤, –±—Ä–µ–Ω–¥—ã, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–º —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ–º  
* apps/orders/ \- —Å–∏—Å—Ç–µ–º–∞ –∑–∞–∫–∞–∑–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π B2B/B2C –ø—Ä–æ—Ü–µ—Å—Å–æ–≤  
* apps/cart/ \- –∫–æ—Ä–∑–∏–Ω–∞ –ø–æ–∫—É–ø–æ–∫ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∏ –≥–æ—Å—Ç–µ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  
* apps/common/ \- –æ–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –∞—É–¥–∏—Ç

### **–ö–ª—é—á–µ–≤—ã–µ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö**

**User Model:**

* 7 —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ä–∞–∑–Ω—ã–º–∏ —É—Ä–æ–≤–Ω—è–º–∏ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è  
* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ B2B –ø–æ–ª–µ–π (company\_name, tax\_id, verification)  
* JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å refresh —Ç–æ–∫–µ–Ω–∞–º–∏

**Product Model:**

* –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–µ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ (retail\_price, opt1-3\_price, trainer\_price, federation\_price)  
* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ü–µ–Ω—ã –¥–ª—è B2B (RRP, MSRP)  
* JSON —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –ø–æ–ª–µ specifications  
* –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å 1–° —á–µ—Ä–µ–∑ onec\_id  
* Computed properties: is\_in\_stock, can\_be\_ordered

**Order/OrderItem Models:**

* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞–∫ B2B, —Ç–∞–∫ –∏ B2C –∑–∞–∫–∞–∑–æ–≤  
* –°–Ω–∏–º–æ–∫ –¥–∞–Ω–Ω—ã—Ö –æ —Ç–æ–≤–∞—Ä–µ –Ω–∞ –º–æ–º–µ–Ω—Ç –∑–∞–∫–∞–∑–∞  
* –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ (YuKassa)  
* –°—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤ –∏ –∞—É–¥–∏—Ç–æ—Ä—Å–∫–∏–π —Å–ª–µ–¥

## **–ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞**

### **Docker**

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–± –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ \- —á–µ—Ä–µ–∑ Docker Compose.

\# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ  
docker-compose up \-d \--build

\# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤  
docker-compose down

–ë—É–¥—É—Ç –∑–∞–ø—É—â–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã:

* db: –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL  
* redis: –∫—ç—à Redis  
* backend: API –Ω–∞ Django  
* frontend: –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Next.js  
* nginx: reverse proxy Nginx

### **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞**

**Backend (Django)**

cd backend  
\# –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è  
source venv/bin/activate  \# Linux/Mac  
venv\\Scripts\\activate     \# Windows  
\# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π  
pip install \-r requirements.txt  
\# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏  
python manage.py runserver 8001  
\# –ó–∞–ø—É—Å–∫ Celery (–≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–∞—Ö)  
celery \-A freesport worker \--loglevel=info  
celery \-A freesport beat \--loglevel=info

### **–í–∞–∂–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—Ç—ã —Å Python –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º**

1. **–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∞–∫—Ç–∏–≤–∞—Ü–∏—é –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º Python:**
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è `(venv)` –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
   - –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π:
     - Linux/Mac: `source venv/bin/activate`
     - Windows: `venv\\Scripts\\activate`

2. **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å requirements.txt –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–æ–≤—ã—Ö –ø–∞–∫–µ—Ç–æ–≤:**
   ```bash
   # –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ª—é–±—ã—Ö –Ω–æ–≤—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ pip install
   pip freeze > requirements.txt
   ```
   - –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–µ–∂–¥—É —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏
   - –ü–æ–∑–≤–æ–ª—è–µ—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ —Ç–æ—á–Ω—É—é —Å—Ä–µ–¥—É —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**Frontend (Next.js)**

cd frontend  
\# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π  
npm install  
\# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏  
npm run dev

## **–ü—Ä–æ—Ü–µ—Å—Å—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**

### **Git Workflow**

* main \- –ø—Ä–æ–¥–∞–∫—à–µ–Ω –≤–µ—Ç–∫–∞ (–∑–∞—â–∏—â–µ–Ω–∞)  
* develop \- –æ—Å–Ω–æ–≤–Ω–∞—è –≤–µ—Ç–∫–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–∑–∞—â–∏—â–µ–Ω–∞)  
* feature/\* \- –≤–µ—Ç–∫–∏ –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π  
* hotfix/\* \- –≤–µ—Ç–∫–∏ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### **–°—Ç–∏–ª—å –∫–æ–¥–∞**

**Backend**

* **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** Black  
* **–õ–∏–Ω—Ç–∏–Ω–≥:** Flake8  
* **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤:** isort  
* **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤:** mypy

**Frontend**

* **–õ–∏–Ω—Ç–∏–Ω–≥:** ESLint  
* **–°—Ç–∏–ª–∏–∑–∞—Ü–∏—è:** Tailwind CSS

### **–°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**

–ü—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–π –ø–∏—Ä–∞–º–∏–¥–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: E2E \> Integration \> Unit.

**–î–µ—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∏ –ø—Ä–∞–≤–∏–ª–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:** —Å–º. `backend/docs/testing-standards.md`

**–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

\# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
make test                    \# –í—Å–µ —Ç–µ—Å—Ç—ã —Å PostgreSQL + Redis
make test-unit               \# –¢–æ–ª—å–∫–æ unit-—Ç–µ—Å—Ç—ã  
make test-integration        \# –¢–æ–ª—å–∫–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
make test-fast               \# –ë–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–æ–≤

\# –õ–æ–∫–∞–ª—å–Ω–æ
pytest                       \# –í—Å–µ —Ç–µ—Å—Ç—ã
pytest \-m unit              \# Unit-—Ç–µ—Å—Ç—ã
pytest \-m integration       \# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
pytest \--cov=apps           \# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø–æ–∫—Ä—ã—Ç–∏—é:** –û–±—â–µ–µ \>= 70%, –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–¥—É–ª–∏ \>= 90%.

### **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ 23.08.2025)**

**–ö–ª—é—á–µ–≤—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω–æ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–µ –ë–î –º–µ–∂–¥—É test.py (SQLite) –∏ Docker (PostgreSQL)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã db –∏ redis –≤ docker-compose.test.yml
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–π —Å—Ä–µ–¥—ã
- ‚úÖ –°–æ–∑–¥–∞–Ω –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Dockerfile.test –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∫–æ–Ω—Ñ–ª–∏–∫—Ç –ø–æ—Ä—Ç–æ–≤: Django —Ç–µ–ø–µ—Ä—å –Ω–∞ –ø–æ—Ä—Ç—É 8001 –≤–º–µ—Å—Ç–æ 8000
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω Makefile —Å —É–¥–æ–±–Ω—ã–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:**
- docker-compose.test.yml - –ø–æ–ª–Ω–∞—è —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ä–µ–¥–∞ —Å PostgreSQL –∏ Redis
- backend/Dockerfile.test - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–±—Ä–∞–∑ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è  
- docker/nginx/ - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx reverse proxy
- Makefile - –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- scripts/test.* - —Å–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –û–°

### **–°–∏—Å—Ç–µ–º–∞ –∏–∑–æ–ª—è—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤ (–¥–æ–±–∞–≤–ª–µ–Ω–æ 23.08.2025)**

**–†–µ—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã constraint violations –∏–∑-–∑–∞ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è –¥–∞–Ω–Ω—ã—Ö –≤ —Ç–µ—Å—Ç–∞—Ö
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏ —á–µ—Ä–µ–∑ autouse —Ñ–∏–∫—Å—Ç—É—Ä—ã  
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∞–±—Å–æ–ª—é—Ç–Ω–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

**–ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–∑–æ–ª—è—Ü–∏–∏:**
- **–ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ –ë–î**: `@pytest.fixture(autouse=True)` —Å TRUNCATE CASCADE –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º —Ç–µ—Å—Ç–æ–º
- **–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**: `get_unique_suffix()` —Å timestamp + —Å—á–µ—Ç—á–∏–∫ + UUID
- **Factory Boy –ø—Ä–∞–≤–∏–ª–∞**: LazyFunction –≤–º–µ—Å—Ç–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏ Sequence
- **Pytest –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**: `--create-db --nomigrations` –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∏–∑–æ–ª—è—Ü–∏–∏

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:** —Å–º. –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –≤ `backend/docs/testing-standards.md` —Ä–∞–∑–¥–µ–ª–µ 8.5

**–†–µ–∑—É–ª—å—Ç–∞—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:**
- üöÄ 100% —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤ –±–µ–∑ flaky failures
- ‚ö° –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –æ—á–∏—Å—Ç–∫—É
- üîÑ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
- üìä –£–ª—É—á—à–µ–Ω–∏–µ —Å 49 failed/256 passed –¥–æ —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**

### **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è**

* **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Django:** –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤ backend/freesport/settings/ (base.py, development.py, production.py).  
* **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:** –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ .env.example –¥–ª—è Backend –∏ Frontend.  
* **–ö–æ–¥–∏—Ä–æ–≤–∫–∞ –¥–ª—è Windows:** Backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç UTF-8 –¥–ª—è –∫–æ–Ω—Å–æ–ª–∏ Windows.

### **–í–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**

* backend/pytest.ini \- –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è pytest —Å –º–∞—Ä–∫–µ—Ä–∞–º–∏  
* backend/mypy.ini \- —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è  
* frontend/package.json \- Node.js –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏  
* frontend/jest.config.js \- –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Jest  
* docker-compose.yml \- –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker

## **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã**

* **ERP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (1–°):** –î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π –æ–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏ (—Ç–æ–≤–∞—Ä—ã, –∑–∞–∫–∞–∑—ã, –æ—Å—Ç–∞—Ç–∫–∏) —á–µ—Ä–µ–∑ Celery.  
* **–ü–ª–∞—Ç–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã:** YuKassa –¥–ª—è –æ–Ω–ª–∞–π–Ω –ø–ª–∞—Ç–µ–∂–µ–π.  
* **–°–ª—É–∂–±—ã –¥–æ—Å—Ç–∞–≤–∫–∏:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API CDEK, Boxberry.