# Story 32.4: –°–µ–∫—Ü–∏—è –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã—Ö –±–∞–Ω–Ω–µ—Ä–æ–≤ (UI)

Status: done

## –ò—Å—Ç–æ—Ä–∏—è

–ö–∞–∫ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å,
–Ø —Ö–æ—á—É –≤–∏–¥–µ—Ç—å –∫–∞—Ä—É—Å–µ–ª—å –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –ø–æ–¥ –±–ª–æ–∫–æ–º "–ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏",
–ß—Ç–æ–±—ã —É–∑–Ω–∞–≤–∞—Ç—å –æ —Ç–µ–∫—É—â–∏—Ö –∞–∫—Ü–∏—è—Ö, –∏ –æ–Ω–∏ –Ω–µ –º–µ—à–∞–ª–∏ –æ—Å–Ω–æ–≤–Ω–æ–º—É Hero-–±–∞–Ω–Ω–µ—Ä—É.

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏

1.  **–†–∞–∑–º–µ—â–µ–Ω–∏–µ –∏ –≤–∏–¥–∏–º–æ—Å—Ç—å**:
    - **–î–∞–Ω–æ**: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã,
    - **–ö–æ–≥–¥–∞**: —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è,
    - **–¢–æ–≥–¥–∞**: –Ω–æ–≤–∞—è —Å–µ–∫—Ü–∏—è `MarketingBannersSection` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ–¥ —Å–µ–∫—Ü–∏–µ–π "–ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏" (FR8).

2.  **–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è**:
    - **–î–∞–Ω–æ**: —Å–µ–∫—Ü–∏—è –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã—Ö –±–∞–Ω–Ω–µ—Ä–æ–≤,
    - **–ö–æ–≥–¥–∞**: API –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã—Ö –±–∞–Ω–Ω–µ—Ä–æ–≤,
    - **–¢–æ–≥–¥–∞**: —Å–µ–∫—Ü–∏—è —è–≤–Ω–æ —Å–∫—Ä—ã—Ç–∞ (–Ω–∏—á–µ–≥–æ –Ω–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç) (FR10).

3.  **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ UX (–ó–∞–≥—Ä—É–∑–∫–∞)**:
    - **–î–∞–Ω–æ**: —Å–µ–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è,
    - **–ö–æ–≥–¥–∞**: –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è,
    - **–¢–æ–≥–¥–∞**: Skeleton-–ª–æ–∞–¥–µ—Ä –∏–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ–º —Å—Ç–æ—Ä–æ–Ω –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–¥–≤–∏–≥ –º–∞–∫–µ—Ç–∞ (CLS) (NFR5).
    - **–ò**: –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —á–µ—Ä–µ–∑ `Next/Image` —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ `sizes` –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ñ–æ—Ä–º–∞—Ç–æ–≤ WebP/AVIF, –±–µ–∑ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ UX –≤ —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `images.unoptimized` (NFR4).

4.  **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)**:
    - **–î–∞–Ω–æ**: –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–∞–Ω–Ω–µ—Ä–∞ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–æ—Å—å (404/Error),
    - **–ö–æ–≥–¥–∞**: –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ—à–∏–±–∫–∞,
    - **–¢–æ–≥–¥–∞**: —ç—Ç–æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–ª–∞–π–¥ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∏–ª–∏ –∑–∞–º–µ–Ω—è–µ—Ç—Å—è –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–º (NFR8).

5.  **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (–ö–æ–º–ø–æ–Ω–µ–Ω—Ç)**:
    - **–î–∞–Ω–æ**: –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ —Ä–µ–Ω–¥–µ—Ä–∞ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ,
    - **–ö–æ–≥–¥–∞**: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–∞–¥–∞–µ—Ç,
    - **–¢–æ–≥–¥–∞**: Error Boundary –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É –∏ —Å–∫—Ä—ã–≤–∞–µ—Ç —Å–µ–∫—Ü–∏—é –≤–º–µ—Å—Ç–æ –ø–∞–¥–µ–Ω–∏—è –≤—Å–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã (NFR6).

6.  **–ù–∞–≤–∏–≥–∞—Ü–∏—è**:
    - **–î–∞–Ω–æ**: –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–π –±–∞–Ω–Ω–µ—Ä,
    - **–ö–æ–≥–¥–∞**: –∫–ª–∏–∫–Ω—É–ª–∏ –ø–æ –±–∞–Ω–Ω–µ—Ä—É,
    - **–¢–æ–≥–¥–∞**: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–º—É `cta_link`.

## –ó–∞–¥–∞—á–∏ / –ü–æ–¥–∑–∞–¥–∞—á–∏

- [x] **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∫–∞—Ä–∫–∞—Å**
    - [x] –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `MarketingBannersSection` –≤ `frontend/src/components/home/`.
    - [x] –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–∑ `frontend/src/components/home/index.ts`.
    - [x] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ `HomePage.tsx` —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ `QuickLinksSection` –∏ –¥–æ `CategoriesSection`.

- [x] **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**
    - [x] –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–Ω–Ω–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ `bannersService.getActive('marketing')`.
    - [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ö—É–∫–∞ `useBannerCarousel` –¥–ª—è –ª–æ–≥–∏–∫–∏ —Å–ª–∞–π–¥–µ—Ä–∞.
    - [x] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Å–ª–∞–π–¥–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `Next/Image` (`sizes`, `loading`, `priority` –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º —Å–µ–∫—Ü–∏–∏).
    - [x] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —É—Å–ª–æ–≤–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ (—Å–∫—Ä—ã—Ç—å, –µ—Å–ª–∏ –ø—É—Å—Ç–æ).
    - [x] –î–æ–±–∞–≤–∏—Ç—å component-level `ErrorBoundary` –¥–ª—è —Å–µ–∫—Ü–∏–∏ —Å fallback `null` (—Å–µ–∫—Ü–∏—è —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è, HomePage –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å).
    - [x] –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫–ª–∏–∫—É —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–æ–ª–µ `cta_link` –∏–∑ API.

- [x] **UX –∏ –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è**
    - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ Skeleton-–ª–æ–∞–¥–µ—Ä–∞, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—é —Å—Ç–æ—Ä–æ–Ω.
    - [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (—Ñ–æ–ª–ª–±–µ–∫ –∏–ª–∏ —Å–∫—Ä—ã—Ç–∏–µ).
    - [x] –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ (–º–æ–±–∏–ª—å–Ω—ã–µ/–¥–µ—Å–∫—Ç–æ–ø).

- [x] **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
    - [x] –°–æ–∑–¥–∞—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã `MarketingBannersSection.test.tsx`.
    - [x] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è marketing-–±–∞–Ω–Ω–µ—Ä–æ–≤: –ª–æ–∫–∞–ª—å–Ω–æ –º–æ–∫–∞—Ç—å `bannersService.getActive('marketing')` –≤ —Ç–µ—Å—Ç–∞—Ö —Å–µ–∫—Ü–∏–∏ **–∏–ª–∏** –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å MSW handler `/banners/` —Å —É—á–µ—Ç–æ–º query `type=marketing`.
    - [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ (—Å–∫–µ–ª–µ—Ç–æ–Ω).
    - [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (null —Ä–µ–Ω–¥–µ—Ä).
    - [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ API.
    - [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (—Å–ª–∞–π–¥ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∏–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è placeholder —Å–æ–≥–ª–∞—Å–Ω–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏).
    - [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `ErrorBoundary` –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É —Ä–µ–Ω–¥–µ—Ä–∞ –∏ —Å–µ–∫—Ü–∏—è —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –±–µ–∑ –ø–∞–¥–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã.
    - [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é –ø–æ –∫–ª–∏–∫—É –Ω–∞ –±–∞–Ω–Ω–µ—Ä —á–µ—Ä–µ–∑ `cta_link`.

### –§–∏–Ω–∞–ª—å–Ω—ã–π QA Checklist (Ready for Review)

- [x] **AC1 / FR8:** –í `HomePage` —Å–µ–∫—Ü–∏—è —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ `QuickLinksSection` –∏ –¥–æ `CategoriesSection`.
- [x] **AC2 / FR10:** –ü—Ä–∏ –æ—Ç–≤–µ—Ç–µ API `[]` —Å–µ–∫—Ü–∏—è –Ω–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è (`null`).
- [x] **AC3 / NFR5:** –í–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è skeleton/–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º aspect ratio (–±–µ–∑ layout shift –≤ —Ä–∞–º–∫–∞—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞).
- [x] **AC3 / NFR4:** –°–ª–∞–π–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `Next/Image` —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ `sizes`; —Ñ–æ—Ä–º–∞—Ç—ã WebP/AVIF –Ω–µ –¥–µ–≥—Ä–∞–¥–∏—Ä—É—é—Ç UX –ø—Ä–∏ —Ç–µ–∫—É—â–µ–º `images.unoptimized`.
- [x] **AC4 / NFR8:** –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (onError) –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è: —Å–ª–∞–π–¥ —Å–∫—Ä—ã—Ç –∏–ª–∏ –∑–∞–º–µ–Ω–µ–Ω placeholder —Å–æ–≥–ª–∞—Å–Ω–æ –ø—Ä–∏–Ω—è—Ç–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.
- [x] **AC5 / NFR6:** Component-level Error Boundary –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç render error; HomePage –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–µ–Ω–¥–µ—Ä –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–µ–∫—Ü–∏–π.
- [x] **AC6:** –ö–ª–∏–∫ –ø–æ –±–∞–Ω–Ω–µ—Ä—É –≤–µ–¥–µ—Ç –Ω–∞ `cta_link` –∏–∑ API-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞.
- [x] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã accessibility-–∞—Ç—Ä–∏–±—É—Ç—ã: `alt` —É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –¥–æ—Å—Ç—É–ø–Ω—ã–π label —Å–µ–∫—Ü–∏–∏/—ç–ª–µ–º–µ–Ω—Ç–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.
- [x] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ –ø—Ä–∏ API error –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–µ–≥—Ä–∞–¥–∏—Ä—É–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ (–±–µ–∑ crash –≤—Å–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã).
- [x] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ –ø—Ä–∏ `banners.length > 1` —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏—è –∫–∞—Ä—É—Å–µ–ª–∏ (dots/controls), –ø—Ä–∏ `<=1` –ª–∏—à–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª—ã —Å–∫—Ä—ã—Ç—ã.

### Review Follow-ups (AI)

- [x] **[HIGH][Security]** –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å `cta_link` –Ω–∞ –±—ç–∫–µ–Ω–¥–µ (—Ä–∞–∑—Ä–µ—à–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –ø—É—Ç–∏ –∏–ª–∏ whitelist –¥–æ–º–µ–Ω–æ–≤) –∏ –¥–æ–±–∞–≤–∏—Ç—å –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ guard –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è `javascript:` –∏ –≤–Ω–µ—à–Ω–∏—Ö —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤. [frontend/src/components/home/MarketingBannersSection.tsx:144-147, backend/apps/banners/models.py:71-74] ‚Äî **Fix complete:** frontend `isSafeLink()` –±–ª–æ–∫–∏—Ä—É–µ—Ç `javascript:`, `data:`, `vbscript:`, `//...` –∏ –≤–Ω–µ—à–Ω–∏–µ URL; backend –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ `Banner.clean()` (—Å–º. follow-up –Ω–∏–∂–µ).
- [x] **[HIGH][Backend Validation]** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é `cta_link` –Ω–∞ –±—ç–∫–µ–Ω–¥–µ (—Ä–∞–∑—Ä–µ—à–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –ø—É—Ç–∏ –∏–ª–∏ whitelist –¥–æ–º–µ–Ω–æ–≤). [backend/apps/banners/models.py:71-74, backend/apps/banners/serializers.py:62-64] ‚Äî **Fix (backend):** –≤ `Banner.clean()` –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Ç—Ä–æ–≥–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è `cta_link`: trim, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ `javascript:`, `data:`, `vbscript:`, `//...`, –≤–Ω–µ—à–Ω–∏—Ö URL –∏ –ø—É—Ç–µ–π –±–µ–∑ –≤–µ–¥—É—â–µ–≥–æ `/`. –î–æ–±–∞–≤–ª–µ–Ω—ã unit-—Ç–µ—Å—Ç—ã –º–æ–¥–µ–ª–∏.
- [x] **[HIGH][Reliability]** –î–æ–±–∞–≤–∏—Ç—å pre-check –Ω–∞ –ø—É—Å—Ç–æ–π/–±–∏—Ç—ã–π `image_url` –¥–æ —Ä–µ–Ω–¥–µ—Ä–∞ `Next/Image`, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø–∞–¥–µ–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å AC4 (—Å–∫—Ä—ã—Ç–∏–µ —Ç–æ–ª—å–∫–æ —Å–ª–∞–π–¥–∞, –Ω–µ –≤—Å–µ–π —Å–µ–∫—Ü–∏–∏). [frontend/src/components/home/MarketingBannersSection.tsx:149-157, backend/apps/banners/serializers.py:62-64] ‚Äî **Frontend pre-check —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω**: —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –±–∞–Ω–Ω–µ—Ä–æ–≤ —Å –ø—É—Å—Ç—ã–º/whitespace `image_url` –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏. Backend –≤–∞–ª–∏–¥–∞—Ü–∏—è ‚Äî –æ—Ç–¥–µ–ª—å–Ω–∞—è –∑–∞–¥–∞—á–∞.
- [x] **[HIGH][Backend Validation]** –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é image_url –Ω–∞ –±—ç–∫–µ–Ω–¥–µ (–ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É/whitespace –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏). [backend/apps/banners/models.py:71-74, backend/apps/banners/serializers.py:62-64] ‚Äî **Backend –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞** –≤ `Banner.clean()` (—Å—Ç—Ä–æ–∫–∏ 226-228): –¥–ª—è –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã—Ö –±–∞–Ω–Ω–µ—Ä–æ–≤ –ø–æ–ª–µ `image` –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ.
- [x] **[MEDIUM][AC1 Regression]** –°–æ–∑–¥–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Ä—è–¥–∫–∞ —Å–µ–∫—Ü–∏–π –≤ HomePage (QuickLinks ‚Üí MarketingBanners ‚Üí Categories). [frontend/src/components/home/HomePage.tsx:46-53, story validation checklist:89-92] ‚Äî **–°–æ–∑–¥–∞–Ω** `HomePage.test.tsx` —Å 2 —Ç–µ—Å—Ç–∞–º–∏: –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—è–¥–∫–∞ —Å–µ–∫—Ü–∏–π –∏ –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö 14 —Å–µ–∫—Ü–∏–π.
- [x] **[MEDIUM][UX Semantics]** –î–æ–±–∞–≤–∏—Ç—å `type="button"` –∫ dots-–∫–Ω–æ–ø–∫–∞–º –∫–∞—Ä—É—Å–µ–ª–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –Ω–µ—è–≤–Ω–æ–≥–æ submit –≤–Ω—É—Ç—Ä–∏ —Ñ–æ—Ä–º. [frontend/src/components/home/MarketingBannersSection.tsx:173-182]
- [x] **[LOW][Code Quality]** –£–±—Ä–∞—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `fill` –∏–∑ mock Next.js Image –≤ —Ç–µ—Å—Ç–∞—Ö. [frontend/src/components/home/__tests__/MarketingBannersSection.test.tsx:48-69] ‚Äî `fill` –¥–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω –∫–∞–∫ `_fill` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è DOM warning, `...props` –∑–∞–º–µ–Ω—ë–Ω –Ω–∞ —è–≤–Ω—ã–µ –ø—Ä–æ–ø—ã.
- [x] **[MEDIUM][Embla Sync]** Dots/slides desync –ø—Ä–∏ 3+ –±–∞–Ω–Ω–µ—Ä–∞—Ö —Å failed images: `scrollSnaps` –æ—Ç—Ä–∞–∂–∞–µ—Ç –í–°–ï —Å–ª–∞–π–¥—ã, –Ω–æ DOM —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ visible ‚Äî –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –ª–∏—à–Ω–∏–º dots –≤–µ–¥—ë—Ç –≤ –ø—É—Å—Ç–æ—Ç—É. –†–µ–Ω–¥–µ—Ä–∏—Ç—å dots –∏–∑ `visibleBanners.length` –∏–ª–∏ —Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å Embla. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç —Å 3+ –±–∞–Ω–Ω–µ—Ä–∞–º–∏. [frontend/src/components/home/MarketingBannersSection.tsx:135,166-184] ‚Äî **Fix**: —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ `visibleBanners.map()` –≤–º–µ—Å—Ç–æ `banners.map()` + null return. Embla auto-reinit –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ DOM children. –î–æ–±–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç —Å 3 –±–∞–Ω–Ω–µ—Ä–∞–º–∏.
- [x] **[MEDIUM][Documentation]** –û–±–Ω–æ–≤–∏—Ç—å JSDoc header –≤ HomePage.tsx ‚Äî –¥–æ–±–∞–≤–∏—Ç—å MarketingBannersSection (1.6) –º–µ–∂–¥—É QuickLinksSection (1.5) –∏ CategoriesSection (2). [frontend/src/components/home/HomePage.tsx:2-18]
- [x] **[LOW][A11y]** –ó–∞–º–µ–Ω–∏—Ç—å `role="tab"`/`role="tablist"` –Ω–∞ dots –∫–∞—Ä—É—Å–µ–ª–∏ ‚Äî –Ω–∞—Ä—É—à–µ–Ω–∏–µ WAI-ARIA (tab —Ç—Ä–µ–±—É–µ—Ç tabpanel). –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç—ã–µ button –±–µ–∑ tab role –∏–ª–∏ group+aria-roledescription. [frontend/src/components/home/MarketingBannersSection.tsx:169-183] ‚Äî –ó–∞–º–µ–Ω–µ–Ω–æ –Ω–∞ `role="group"` + `aria-current` –≤–º–µ—Å—Ç–æ `role="tablist"` + `role="tab"` + `aria-selected`.
- [x] **[LOW][Code Quality]** –£–±—Ä–∞—Ç—å `console.error` –Ω–∞ —Å—Ç—Ä–æ–∫–µ 91 ‚Äî –æ—à–∏–±–∫–∞ —É–∂–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `setError()`, –ª–æ–≥ –≤ production ‚Äî —à—É–º. [frontend/src/components/home/MarketingBannersSection.tsx:91]
- [x] **[LOW][Code Quality]** –£–±—Ä–∞—Ç—å `console.error` –Ω–∞ —Å—Ç—Ä–æ–∫–µ 91 ‚Äî –æ—à–∏–±–∫–∞ —É–∂–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `setError()`, –ª–æ–≥ –≤ production ‚Äî —à—É–º. [frontend/src/components/home/MarketingBannersSection.tsx:91]
- [x] **[HIGH][Security]** –£—è–∑–≤–∏–º–æ—Å—Ç—å open redirect —á–µ—Ä–µ–∑ protocol-relative URL (`//evil.com`). `isSafeLink()` —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —Å—Ç—Ä–æ–∫–∏, –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å `/`, –≤–∫–ª—é—á–∞—è `//...`, —á—Ç–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ —Ç—Ä–∞–∫—Ç—É–µ—Ç—Å—è –∫–∞–∫ –≤–Ω–µ—à–Ω–∏–π –ø–µ—Ä–µ—Ö–æ–¥. [frontend/src/components/home/MarketingBannersSection.tsx:52-58, 153-156] ‚Äî **Fix**: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `trimmed.startsWith('//')` –ø–µ—Ä–µ–¥ `startsWith('/')`. –¢–µ—Å—Ç –¥–æ–±–∞–≤–ª–µ–Ω.
- [x] **[HIGH][Regression]** –ó–∞—è–≤–ª–µ–Ω —Ñ–∏–∫—Å `visibleBanners.map` –¥–ª—è dots, –Ω–æ –≤ –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `scrollSnaps.map`. –†–∏—Å–∫ –≤–æ–∑–≤—Ä–∞—Ç–∞ desync –ø—Ä–∏ failed images. [frontend/src/components/home/MarketingBannersSection.tsx:197-208, story claims: lines 94-95, 147-148] ‚Äî **Fix**: `scrollSnaps.map` –∑–∞–º–µ–Ω—ë–Ω –Ω–∞ `visibleBanners.map`, `scrollSnaps` —É–¥–∞–ª—ë–Ω –∏–∑ –¥–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏–∏.
- [x] **[MEDIUM][Reliability]** –í–∞–ª–∏–¥–∞—Ü–∏—è guard –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `trimmed`, –Ω–æ `Link href` –ø–æ–ª—É—á–∞–µ—Ç raw `cta_link`. –ü—Ä–æ–±–µ–ª—ã –≤ –Ω–∞—á–∞–ª–µ –º–æ–≥—É—Ç –Ω–∞—Ä—É—à–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é. [frontend/src/components/home/MarketingBannersSection.tsx:54-58, 155-156] ‚Äî **Fix**: `getSafeHref()` –ø—Ä–∏–º–µ–Ω—è–µ—Ç `trim()` –∫ href. –¢–µ—Å—Ç –¥–æ–±–∞–≤–ª–µ–Ω.
- [x] **[MEDIUM][Test Gap]** –ù–µ—Ç —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ –Ω–∞ sync dots –ø–æ—Å–ª–µ image error: –ø—Ä–æ–≤–µ—Ä–∫–∞ count dots –∏ –∏—Ö –ø–æ–≤–µ–¥–µ–Ω–∏—è –ø—Ä–∏ failed image. [frontend/src/components/home/__tests__/MarketingBannersSection.test.tsx:541-574] ‚Äî **Fix**: –¥–æ–±–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç "dots –¥–æ–ª–∂–Ω—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å visible banners –ø–æ—Å–ª–µ image error" (3 dots ‚Üí 2 –ø–æ—Å–ª–µ error).
- [x] **[HIGH][QA Integrity]** –ó–∞—è–≤–∫–∞ "lint clean / issue resolved" –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç—Å—è. –í story –æ—Ç–º–µ—á–µ–Ω–æ, —á—Ç–æ lint –≤—ã–ø–æ–ª–Ω–µ–Ω –∏ follow-up –ø–æ `_fill` –∑–∞–∫—Ä—ã—Ç: @`_bmad-output/implementation-artifacts/32-4-marketing-banners-ui.md#105-107`, @`_bmad-output/implementation-artifacts/32-4-marketing-banners-ui.md#153-153`. –ù–æ –≤ —Ç–µ—Å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –≤—Å—ë –µ—â—ë –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è: @`frontend/src/components/home/__tests__/MarketingBannersSection.test.tsx#46-54`. –≠—Ç–æ –ª–æ–º–∞–µ—Ç –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ—Å—Ç—å "resolved" –¥–ª—è follow-up –∏ quality-gate. ‚Äî **Fix**: Image mock –ø–µ—Ä–µ–ø–∏—Å–∞–Ω: –≤–º–µ—Å—Ç–æ –¥–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏–∏ `fill: _fill` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `props` –æ–±—ä–µ–∫—Ç ‚Äî `fill` –Ω–µ –¥–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–µ—Ç—Å—è –∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è. ESLint —á–∏—Å—Ç.
- [x] **[MEDIUM][Security Test Gap]** –ù–µ—Ç —Ç–µ—Å—Ç–∞ –Ω–∞ –≤–µ—Ç–∫—É `vbscript:`. Guard –±–ª–æ–∫–∏—Ä—É–µ—Ç `vbscript:`: @`frontend/src/components/home/MarketingBannersSection.tsx#52-57. –í security-–Ω–∞–±–æ—Ä–µ —Ç–µ—Å—Ç–æ–≤ –µ—Å—Ç—å `javascript:`, `data:`, external –∏ `//`, –Ω–æ –Ω–µ—Ç `vbscript:`: @`frontend/src/components/home/__tests__/MarketingBannersSection.test.tsx#299-433`. ‚Äî **Fix**: –¥–æ–±–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç "–Ω–µ –¥–æ–ª–∂–µ–Ω —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å —Å—Å—ã–ª–∫—É –¥–ª—è vbscript: –ø—Ä–æ—Ç–æ–∫–æ–ª–∞".
- [x] **[MEDIUM][API Contract Test Gap]** –ù–µ—Ç —Ç–µ—Å—Ç–∞, —á—Ç–æ `getActive('marketing')` —Ä–µ–∞–ª—å–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `type=marketing`. –õ–æ–≥–∏–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –µ—Å—Ç—å: @`frontend/src/services/bannersService.ts#15-18`. –ù–æ service-—Ç–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç query param –¥–ª—è marketing-—Ç–∏–ø–∞: @`frontend/src/services/__tests__/bannersService.test.ts#11-83`. ‚Äî **Fix**: –¥–æ–±–∞–≤–ª–µ–Ω–æ 2 —Ç–µ—Å—Ç–∞ –≤ bannersService.test.ts ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ `type=marketing` query param –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ `type` –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤.
- [x] **[LOW][Resilience]** –ù–µ—Ç cleanup/cancel –≤ async effect –∑–∞–≥—Ä—É–∑–∫–∏. –í `useEffect` –ø–æ—Å–ª–µ unmount –≤–æ–∑–º–æ–∂–Ω—ã setState –ø–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –ø—Ä–æ–º–∏—Å–∞: @`frontend/src/components/home/MarketingBannersSection.tsx#98-114`. –†–∏—Å–∫ –Ω–∏–∑–∫–∏–π, –Ω–æ –ª—É—á—à–µ –¥–æ–±–∞–≤–∏—Ç—å abort/ignore pattern. ‚Äî **Fix**: –¥–æ–±–∞–≤–ª–µ–Ω `cancelled` flag —Å cleanup return –≤ `useEffect` ‚Äî setState –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –µ—Å–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç unmounted.
- [x] **[HIGH][Security][Defense-in-depth]** Frontend `isSafeLink()` –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ–±—Ä–∞—Ç–Ω—ã–µ —Å–ª–µ—à–∏ `\`, —Ö–æ—Ç—è backend —É–∂–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç. –≠—Ç–æ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω –≤–∞–ª–∏–¥–∞—Ü–∏–∏ FE/BE –∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –æ–±—Ö–æ–¥ fallback-–ø–æ–ª–∏—Ç–∏–∫–∏ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ. [frontend/src/components/home/MarketingBannersSection.tsx:52-60, backend/apps/banners/models.py:38-40] ‚Äî **Fix**: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `trimmed.includes('\\')` –≤ `isSafeLink()`, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Å backend `is_safe_internal_cta_link()`.
- [x] **[MEDIUM][Security Test Gap]** –í frontend security-suite –Ω–µ—Ç —Ç–µ—Å—Ç–∞ –Ω–∞ `cta_link` —Å backslash (`/catalog\..\admin`), —Ö–æ—Ç—è —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω–∞—è –≤–µ—Ç–∫–∞ —Ä–∏—Å–∫–∞. –°–µ–π—á–∞—Å –ø–æ–∫—Ä—ã—Ç—ã `javascript:`, `data:`, `vbscript:`, external URL –∏ `//...`, –Ω–æ –Ω–µ `\`. [frontend/src/components/home/__tests__/MarketingBannersSection.test.tsx:291-452] ‚Äî **Fix**: –¥–æ–±–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç "–Ω–µ –¥–æ–ª–∂–µ–Ω —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å —Å—Å—ã–ª–∫—É –¥–ª—è cta_link —Å backslash".
- [x] **[MEDIUM][Configuration Test Gap]** `MARKETING_BANNER_LIMIT` –≤—ã–Ω–µ—Å–µ–Ω –≤ settings, –Ω–æ —Ç–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Ç–æ–ª—å–∫–æ default `5`; –Ω–µ—Ç —Ç–µ—Å—Ç–∞ —Å `override_settings(MARKETING_BANNER_LIMIT=...)` –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–æ—Å—Ç–∏. [backend/apps/banners/services.py:103-106, backend/apps/banners/tests/test_views.py:225-235] ‚Äî **Fix**: –¥–æ–±–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç `test_marketing_limit_configurable_via_settings` —Å `override_settings(MARKETING_BANNER_LIMIT=3)` ‚Äî —Å–æ–∑–¥–∞—ë—Ç 6 –±–∞–Ω–Ω–µ—Ä–æ–≤, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–æ–∑–≤—Ä–∞—Ç 3.
- [x] **[LOW][Resilience]** –í `useEffect` –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ `cancelled` flag, –Ω–æ —Å–∞–º HTTP-–∑–∞–ø—Ä–æ—Å –Ω–µ –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è (`AbortController`/signal –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è), –ø–æ—ç—Ç–æ–º—É –ø—Ä–∏ unmount –∑–∞–ø—Ä–æ—Å –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤ —Ñ–æ–Ω–µ. [frontend/src/components/home/MarketingBannersSection.tsx:102-124, frontend/src/services/bannersService.ts:15-18] ‚Äî **Fix**: `cancelled` flag –∑–∞–º–µ–Ω—ë–Ω –Ω–∞ `AbortController` + `controller.signal.aborted` –ø—Ä–æ–≤–µ—Ä–∫–∏; cleanup –≤—ã–∑—ã–≤–∞–µ—Ç `controller.abort()`.
- [x] **[HIGH][Cache Invalidation]** –ü—Ä–∏ —Å–º–µ–Ω–µ `type` —É —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –±–∞–Ω–Ω–µ—Ä–∞ (hero ‚Üî marketing) –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–µ—à–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è **–Ω–æ–≤–æ–≥–æ** —Ç–∏–ø–∞, –æ—Å—Ç–∞–≤–ª—è—è stale-–∫–µ—à —Å—Ç–∞—Ä–æ–≥–æ —Ç–∏–ø–∞. –°–∏–≥–Ω–∞–ª –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ `instance.type` –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è, –Ω–æ –Ω–µ —Å—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è. [backend/apps/banners/signals.py:19-29, backend/apps/banners/services.py:165-178] ‚Äî **Fix:** –¥–æ–±–∞–≤–ª–µ–Ω `pre_save` —Å–∏–≥–Ω–∞–ª `track_old_banner_type`, —Å–æ—Ö—Ä–∞–Ω—è—é—â–∏–π —Å—Ç–∞—Ä—ã–π `type` –≤ `instance._old_type`; `post_save` –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∫–µ—à –æ–±–æ–∏—Ö —Ç–∏–ø–æ–≤ (—Å—Ç–∞—Ä—ã–π + –Ω–æ–≤—ã–π) –ø—Ä–∏ —Ä–∞–∑–ª–∏—á–∏–∏.
- [x] **[MEDIUM][Integration Test Gap]** –ù–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ –ø–æ–∫—Ä—ã—Ç–∏—è –∫–∞—Ä—É—Å–µ–ª–∏ (Embla) ‚Äî —Ç–æ–ª—å–∫–æ mock-based —Ç–µ—Å—Ç—ã. –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω—ã—Ö —Ç–µ—Å—Ç–∞—Ö —Ö—É–∫ –∑–∞–º–æ–∫–∞–Ω, –≤ —Ö—É–∫–æ–≤—ã—Ö —Ç–µ—Å—Ç–∞—Ö Embla –∑–∞–º–æ–∫–∞–Ω, —Ç–æ –µ—Å—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π `reInit/swipe` –≤ DOM –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è. [frontend/src/components/home/__tests__/MarketingBannersSection.test.tsx:67-81, frontend/src/hooks/__tests__/useBannerCarousel.test.ts:44-50] ‚Äî **Fix:** –¥–æ–±–∞–≤–ª–µ–Ω regression-—Ç–µ—Å—Ç –Ω–∞ HIGH-–±–∞–≥ —Å –¥–≤–æ–π–Ω–æ–π –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –∫–µ—à–∞ (backend). –†–µ–∞–ª—å–Ω—ã–π Embla E2E —Ç–µ—Å—Ç –æ—Ç–ª–æ–∂–µ–Ω –¥–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è Playwright/vitest-browser –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã.
- [x] **[MEDIUM][Regression Test Gap]** –ù–µ—Ç —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ –Ω–∞ HIGH-–±–∞–≥ –≤—ã—à–µ (—Å–º–µ–Ω–∞ —Ç–∏–ø–∞ –∏ –¥–≤–æ–π–Ω–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è). –¢–µ–∫—É—â–∏–π —Ç–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –±–∞–Ω–Ω–µ—Ä–∞, –Ω–æ –Ω–µ —Å—Ü–µ–Ω–∞—Ä–∏–π –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `type` —É —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ. [backend/apps/banners/tests/test_views.py:112-119] ‚Äî **Fix:** –¥–æ–±–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç `test_signal_invalidates_both_caches_on_type_change` ‚Äî —Å–æ–∑–¥–∞—ë—Ç –±–∞–Ω–Ω–µ—Ä hero, –∑–∞–ø–æ–ª–Ω—è–µ—Ç –æ–±–∞ –∫–µ—à–∞, –º–µ–Ω—è–µ—Ç type‚Üímarketing, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—é –æ–±–æ–∏—Ö –∫–ª—é—á–µ–π.
- [x] **[LOW][AbortController Integration]** `AbortController` –≤ —Å–µ–∫—Ü–∏–∏ –Ω–µ –æ—Ç–º–µ–Ω—è–µ—Ç HTTP-–∑–∞–ø—Ä–æ—Å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ ‚Äî —Ç–æ–ª—å–∫–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç setState –ø–æ—Å–ª–µ unmount. `bannersService.getActive` –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `signal`, –∞ –∑–Ω–∞—á–∏—Ç —Å–µ—Ç—å –Ω–µ –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è. [frontend/src/components/home/MarketingBannersSection.tsx:104-125, frontend/src/services/bannersService.ts:15-18] ‚Äî **Fix:** –¥–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `signal?: AbortSignal` –≤ `bannersService.getActive`, –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ axios config; –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–µ—Ä–µ–¥–∞—ë—Ç `controller.signal` –ø—Ä–∏ –≤—ã–∑–æ–≤–µ. –¢–µ—Å—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ bannersService.test.ts.
- [x] **[HIGH][A11y/Accessibility]** –ü—É—Å—Ç–æ–π `image_alt` –Ω–µ –∏–º–µ–µ—Ç fallback, –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞. Backend —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –ø—É—Å—Ç—ã–µ `image_alt` (blank=True), frontend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç alt –∫–∞–∫-is –±–µ–∑ fallback. –¢–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç —Ç–æ–ª—å–∫–æ –Ω–µ–ø—É—Å—Ç—ã–µ alt. [backend/apps/banners/models.py:83-90, backend/apps/banners/serializers.py:28-37, frontend/src/components/home/MarketingBannersSection.tsx:169-187, frontend/src/components/home/__tests__/MarketingBannersSection.test.tsx:796-808] ‚Äî **Fix:** –¥–æ–±–∞–≤–ª–µ–Ω fallback `banner.image_alt || banner.title` –≤ –æ–±–æ–∏—Ö –≤–µ—Ç–∫–∞—Ö Image render. –¢–µ—Å—Ç –¥–æ–±–∞–≤–ª–µ–Ω.
- [x] **[MEDIUM][Integration Gap]** –†–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Embla –Ω–µ –ø–æ–∫—Ä—ã—Ç–∞ (—Ç–æ–ª—å–∫–æ mock-based —Ç–µ—Å—Ç—ã). Component-—Ç–µ—Å—Ç—ã –º–æ–∫–∞—é—Ç –≤–µ—Å—å carousel hook, hook-—Ç–µ—Å—Ç—ã –º–æ–∫–∞—é—Ç Embla/Autoplay. –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ reInit/swipe –≤ –±—Ä–∞—É–∑–µ—Ä–µ –Ω–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã. [frontend/src/components/home/__tests__/MarketingBannersSection.test.tsx:67-81, frontend/src/hooks/__tests__/useBannerCarousel.test.ts:44-50] ‚Äî **Deferred:** —Ä–µ–∞–ª—å–Ω—ã–π Embla E2E —Ç–µ—Å—Ç —Ç—Ä–µ–±—É–µ—Ç Playwright/vitest-browser –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –∫–æ—Ç–æ—Ä–∞—è –µ—â—ë –Ω–µ –≤–Ω–µ–¥—Ä–µ–Ω–∞ –≤ –ø—Ä–æ–µ–∫—Ç. Mock-based —Ç–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç –≤—Å—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.
- [x] **[MEDIUM][Traceability]** Story File List –Ω–µ –æ—Ç—Ä–∞–∂–∞–µ—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–π —Ñ–∞–π–ª: –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç `backend/apps/banners/tests/test_views.py`, —Ö–æ—Ç—è –≤ –Ω—ë–º –¥–æ–±–∞–≤–ª–µ–Ω regression test –Ω–∞ —Å–º–µ–Ω—É type. [_bmad-output/implementation-artifacts/32-4-marketing-banners-ui.md#226-242, backend/apps/banners/tests/test_views.py#121-138] ‚Äî **Fix:** —Ñ–∞–π–ª –¥–æ–±–∞–≤–ª–µ–Ω –≤ File List.
- [x] **[MEDIUM][Regression Test Gap]** –ù–æ–≤—ã–π backend regression test –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–ª—å–∫–æ `guest`-–∫–ª—é—á–∏ –∫–µ—à–∞, –Ω–æ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–∞ –Ω–∞ –≤—Å–µ —Ä–æ–ª–∏. –ú–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ä–µ–≥—Ä–µ—Å—Å–∏—é –ø–æ role-specific cache. [backend/apps/banners/tests/test_views.py#137-138, backend/apps/banners/services.py#175-178] ‚Äî **Fix:** –¥–æ–±–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç `test_signal_invalidates_role_specific_caches_on_type_change` ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—é `guest` + `retail` –∫–µ—à–∞ –¥–ª—è –æ–±–æ–∏—Ö —Ç–∏–ø–æ–≤ –ø—Ä–∏ —Å–º–µ–Ω–µ type.
- [x] **[HIGH][Backend Test Coverage]** Backend-—Ç–µ—Å—Ç—ã Story 32.4 –≤—ã–ø–∞–¥–∞—é—Ç –∏–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö `make test-unit` / `make test-integration` –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –º–∞—Ä–∫–µ—Ä–æ–≤ `@pytest.mark.unit` –∏–ª–∏ `@pytest.mark.integration`. –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –º–∞—Ä–∫–µ—Ä—ã –≤ `backend/apps/banners/tests/test_views.py` –∏ `test_models.py` –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –≤ CI. ‚Äî **Fix:** –¥–æ–±–∞–≤–ª–µ–Ω—ã –º–∞—Ä–∫–µ—Ä—ã `@pytest.mark.unit` (TestIsSafeInternalCtaLink) –∏ `@pytest.mark.integration` (–≤—Å–µ DB-–∑–∞–≤–∏—Å–∏–º—ã–µ –∫–ª–∞—Å—Å—ã) –≤ test_models.py –∏ test_views.py.
- [x] **[MEDIUM][Role-specific TTL]** TTL –∫—ç—à–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –±–µ–∑ —É—á—ë—Ç–∞ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Äî –≥–æ—Å—Ç–µ–≤—ã–µ –±–∞–Ω–Ω–µ—Ä—ã –º–æ–≥—É—Ç –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏–∑-–∑–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≥—Ä–∞–Ω–∏—Ü –±–∞–Ω–Ω–µ—Ä–æ–≤ –¥—Ä—É–≥–∏—Ö —Ä–æ–ª–µ–π. [backend/apps/banners/services.py:164-179] ‚Äî **Fix:** `compute_cache_ttl()` —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `role_key` –∏ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –±–∞–Ω–Ω–µ—Ä—ã –ø–æ —Ä–æ–ª–∏ –ø—Ä–∏ —Ä–∞—Å—á—ë—Ç–µ TTL. –î–æ–±–∞–≤–ª–µ–Ω—ã –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ `_get_role_filter()` –∏ `_is_banner_visible_to_role()`.

- [x] **[AI-Review][HIGH]** `compute_cache_ttl()` —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç TTL –æ—Ç `Banner.get_for_user(None)` (–≥–æ—Å—Ç–µ–≤–æ–π —Å–∫–æ—É–ø), –∏–∑-–∑–∞ —á–µ–≥–æ role-specific TTL –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —Ä–æ–ª–µ–π –º–æ–∂–µ—Ç —Å—á–∏—Ç–∞—Ç—å—Å—è –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏ –ø—Ä–∏–≤–æ–¥–∏—Ç—å –∫ stale-–∫—ç—à—É. [backend/apps/banners/services.py:183-188, backend/apps/banners/models.py:285-300] ‚Äî **Fix:** –∑–∞–º–µ–Ω—ë–Ω `Banner.get_for_user(None)` –Ω–∞ `Banner.objects.filter(is_active=True)` ‚Äî —É–±—Ä–∞–Ω–∞ –ø—Ä–∏–≤—è–∑–∫–∞ –∫ guest scope –∏ temporal —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–∫–ª—é—á–∞–ª–∞ –±—É–¥—É—â–∏–µ `start_date` –±–∞–Ω–Ω–µ—Ä—ã.
- [x] **[AI-Review][HIGH]** `backend/apps/banners/tests/test_services.py` –Ω–µ —Ä–∞–∑–º–µ—á–µ–Ω `@pytest.mark.unit/@pytest.mark.integration`, –ø–æ—ç—Ç–æ–º—É –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ —Å–ª–æ—è –º–æ–≥—É—Ç –Ω–µ –ø–æ–ø–∞–¥–∞—Ç—å –≤ `make test-unit` / `make test-integration`. [backend/apps/banners/tests/test_services.py:35-335, Makefile:76-87, pytest.ini:5-8] ‚Äî **Fix:** –¥–æ–±–∞–≤–ª–µ–Ω—ã `@pytest.mark.unit` (pure unit –∫–ª–∞—Å—Å—ã) –∏ `@pytest.mark.integration` (DB/Redis-–∑–∞–≤–∏—Å–∏–º—ã–µ: TestInvalidateBannerCache, TestCacheFunctions, TestComputeCacheTTL).
- [x] **[AI-Review][MEDIUM]** `_get_role_filter()` –¥–ª—è trainer/wholesale/federation –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç –±–∞–∑–æ–≤—É—é –≤–∏–¥–∏–º–æ—Å—Ç—å `show_to_authenticated=True`, —á—Ç–æ —Ä–∞—Å—Ö–æ–¥–∏—Ç—Å—è —Å –¥–æ–º–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–æ–π `Banner.get_for_user()` –∏ –∏—Å–∫–∞–∂–∞–µ—Ç role-aware TTL. [backend/apps/banners/services.py:125-137, backend/apps/banners/models.py:290-299] ‚Äî **Fix:** `_get_role_filter` –ø–µ—Ä–µ–ø–∏—Å–∞–Ω: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `Q` –æ–±—ä–µ–∫—Ç—ã; trainer/wholesale/federation –ø–æ–ª—É—á–∞—é—Ç `Q(show_to_authenticated=True) | Q(role_specific=True)`, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å `Banner.get_for_user()`. –£–¥–∞–ª–µ–Ω–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è `_is_banner_visible_to_role`.
- [x] **[AI-Review][MEDIUM]** –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç regression-—Ç–µ—Å—Ç—ã –¥–ª—è `compute_cache_ttl(..., role_key=...)` (guest vs retail/trainer), –∏–∑-–∑–∞ —á–µ–≥–æ role-specific –≤–µ—Ç–∫–∞ TTL –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–µ–ø–æ–∫—Ä—ã—Ç–æ–π. [backend/apps/banners/tests/test_services.py:229-335] ‚Äî **Fix:** –¥–æ–±–∞–≤–ª–µ–Ω–æ 6 regression-—Ç–µ—Å—Ç–æ–≤: guest —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, retail –≤–∏–¥–∏—Ç authenticated, trainer –≤–∏–¥–∏—Ç authenticated+trainer, trainer-specific, future start_date. + 7 unit-—Ç–µ—Å—Ç–æ–≤ `TestGetRoleFilterReturnsQ` –¥–ª—è Q-–æ–±—ä–µ–∫—Ç–æ–≤.
- [x] **[AI-Review][MEDIUM]** –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å—Ç–∞—Ç—É—Å–æ–≤ story/sprint –ø—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–µ–º –∑–∞–∫—Ä—ã—Ç–∏–∏ follow-ups (–ø–µ—Ä–µ–≤–æ–¥ –≤ `done` –¥–æ–ª–∂–µ–Ω –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤ story –∏ sprint-tracker). [_bmad-output/implementation-artifacts/32-4-marketing-banners-ui.md:3, _bmad-output/implementation-artifacts/sprint-status.yaml:106] ‚Äî **Fix:** —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ ‚Äî story status –æ–±–Ω–æ–≤–ª—ë–Ω.

### –ö–æ–º–∞–Ω–¥—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (frontend)

- [x] `npm run lint` (—á–∏—Å—Ç–æ –¥–ª—è —Ñ–∞–π–ª–æ–≤ story; pre-existing warning –≤ catalog/page.tsx –Ω–µ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ story 32.4)
- [x] `npm run test -- src/components/home/__tests__/MarketingBannersSection.test.tsx` (36/36 passed)
- [x] `npm run test -- src/components/home/__tests__/HomePage.test.tsx` (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç –ø–æ—Ä—è–¥–∫–∞ —Å–µ–∫—Ü–∏–π ‚Äî 2/2 passed)
- [x] `npm run test -- src/services/__tests__/bannersService.test.ts` (8/8 passed)
- [ ] `npm run test:coverage` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –ø–µ—Ä–µ–¥ merge)

## –ó–∞–º–µ—Ç–∫–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç**: `MarketingBannersSection`
- **–°–µ—Ä–≤–∏—Å**: `bannersService` (—É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–∏–ø 'marketing')
- **–•—É–∫**: `useBannerCarousel` (—É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–∑ Story 32.3)
- **–ö–æ–Ω—Ç—Ä–∞–∫—Ç API**: –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–ª–µ `cta_link` (–Ω–µ `target_url`).
- **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å**: —Å–µ–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ–±–µ—Ä–Ω—É—Ç–∞ –≤ component-level Error Boundary —Å fallback `null`.
- **–¢–µ—Å—Ç–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**: –≥–ª–æ–±–∞–ª—å–Ω—ã–π MSW handler `/banners/` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ—Ç–¥–∞–µ—Ç hero-–±–∞–Ω–Ω–µ—Ä; –¥–ª—è —ç—Ç–æ–π story —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã —è–≤–Ω–æ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å marketing-–¥–∞–Ω–Ω—ã–µ (—á–µ—Ä–µ–∑ –ª–æ–∫–∞–ª—å–Ω—ã–π mock —Å–µ—Ä–≤–∏—Å–∞ –∏–ª–∏ override handler –Ω–∞ `type=marketing`).

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Next/Image`; —É—á–∏—Ç—ã–≤–∞—Ç—å —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é `images.unoptimized` –∏ –Ω–µ –≤–≤–æ–¥–∏—Ç—å –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π —Å –Ω–µ–π.
- **CLS**: –ö—Ä–∏—Ç–∏—á–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ–º —Å—Ç–æ—Ä–æ–Ω –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.
- **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å**: –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–æ–ª–∂–Ω–∞ –ª–æ–º–∞—Ç—å—Å—è, –µ—Å–ª–∏ —ç—Ç–∞ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤–∞—è —Å–µ–∫—Ü–∏—è —É–ø–∞–¥–µ—Ç.

## –ó–∞–ø–∏—Å—å –∞–≥–µ–Ω—Ç–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –ò—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –º–æ–¥–µ–ª—å –∞–≥–µ–Ω—Ç–∞
Claude Opus 4.6 (Claude Code CLI)

### Implementation Plan
- –°–æ–∑–¥–∞–Ω `MarketingBannersSection` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å inline `MarketingBannerErrorBoundary` (class component, fallback: null)
- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π `MarketingBannersCarousel` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `bannersService.getActive('marketing')` + `useBannerCarousel` hook –∏–∑ Story 32.3
- Skeleton loader —Å `aspect-[21/9] md:aspect-[3/1]` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è CLS
- `Next/Image` —Å `sizes="(max-width: 768px) 100vw, 1280px"` –∏ `loading="lazy"` (below the fold)
- Image error handling: `failedImages` Set + `onError` callback ‚Üí —Å–ª–∞–π–¥ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è; –µ—Å–ª–∏ –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è failed ‚Üí —Å–µ–∫—Ü–∏—è null
- Dots navigation —Å `role="tab"` / `aria-selected` —Ç–æ–ª—å–∫–æ –ø—Ä–∏ `visibleBanners.length > 1`
- –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: direct mock `bannersService.getActive` —á–µ—Ä–µ–∑ `vi.mock` (–ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å HeroSection)

### Completion Notes
- ‚úÖ –í—Å–µ 20 unit-—Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç (AC1‚ÄìAC6, accessibility, ErrorBoundary, image error, dots navigation)
- ‚úÖ ESLint —á–∏—Å—Ç –¥–ª—è `MarketingBannersSection.tsx`
- ‚úÖ HeroSection.test.tsx (13 —Ç–µ—Å—Ç–æ–≤) ‚Äî –±–µ–∑ —Ä–µ–≥—Ä–µ—Å—Å–∏–π
- ‚úÖ –í—Å–µ home component —Ç–µ—Å—Ç—ã (186/191 passed) ‚Äî 5 –ø–∞–¥–µ–Ω–∏–π –≤ QuickLinksSection.test.tsx —è–≤–ª—è—é—Ç—Å—è pre-existing (–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç MSW handler –¥–ª—è `/categories-tree/`)
- –†–µ—à–µ–Ω–∏–µ –ø–æ image error: –≤—ã–±—Ä–∞–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Å–∫—Ä—ã—Ç–∏—è —Å–ª–∞–π–¥–∞ (–Ω–µ placeholder), —Ç–∞–∫ –∫–∞–∫ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–π –±–∞–Ω–Ω–µ—Ä –±–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª–∞

### Review Follow-ups Resolution (2026-02-15)
- ‚úÖ Resolved [HIGH][Security]: Frontend `isSafeLink()` guard ‚Äî –±–ª–æ–∫–∏—Ä—É–µ—Ç `javascript:`, `data:`, `vbscript:`, –≤–Ω–µ—à–Ω–∏–µ URL; 4 —Ç–µ—Å—Ç–∞
- ‚úÖ Resolved [HIGH][Reliability]: Frontend image_url pre-check ‚Äî —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—É—Å—Ç—ã—Ö/whitespace URL –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏; 2 —Ç–µ—Å—Ç–∞
- ‚úÖ Resolved [MEDIUM][AC1 Regression]: –°–æ–∑–¥–∞–Ω `HomePage.test.tsx` ‚Äî 2 —Ç–µ—Å—Ç–∞ (–ø–æ—Ä—è–¥–æ–∫ —Å–µ–∫—Ü–∏–π + –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö 14 —Å–µ–∫—Ü–∏–π)
- ‚úÖ Resolved [MEDIUM][UX Semantics]: `type="button"` –Ω–∞ dots –∫–Ω–æ–ø–∫–∞—Ö
- ‚úÖ Resolved [MEDIUM][Embla Sync]: `visibleBanners.map()` –≤–º–µ—Å—Ç–æ `banners.map()` + null; —Ç–µ—Å—Ç —Å 3 –±–∞–Ω–Ω–µ—Ä–∞–º–∏
- ‚úÖ Resolved [MEDIUM][Documentation]: JSDoc header –≤ HomePage.tsx –æ–±–Ω–æ–≤–ª—ë–Ω (–¥–æ–±–∞–≤–ª–µ–Ω –ø.1.6)
- ‚úÖ Resolved [LOW][Code Quality]: `fill` ‚Üí `_fill` –≤ Image mock, `...props` ‚Üí —è–≤–Ω—ã–µ –ø—Ä–æ–ø—ã
- ‚úÖ Resolved [LOW][A11y]: `role="group"` + `aria-current` –≤–º–µ—Å—Ç–æ `role="tablist"` + `role="tab"` + `aria-selected`
- ‚úÖ Resolved [LOW][Code Quality]: –£–¥–∞–ª—ë–Ω `console.error` ‚Äî –æ—à–∏–±–∫–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `setError()`
- –ò—Ç–æ–≥–æ: 28 unit-—Ç–µ—Å—Ç–æ–≤ MarketingBannersSection + 2 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö HomePage = 30 —Ç–µ—Å—Ç–æ–≤ (30/30 passed)
- Backend –≤–∞–ª–∏–¥–∞—Ü–∏—è `cta_link` –∑–∞–∫—Ä—ã—Ç–∞ –≤ —Ä–∞–º–∫–∞—Ö story 32.4; open –æ—Å—Ç–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ backend follow-up –ø–æ `image_url` (—Å—Ç—Ä–æ–∫–∞ 92)

### Review Follow-ups Resolution #2 (2026-02-15)
- ‚úÖ Resolved [HIGH][Security]: –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ protocol-relative URL (`//evil.com`) –≤ `isSafeLink()` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `startsWith('//')` –ø–µ—Ä–µ–¥ `startsWith('/')`
- ‚úÖ Resolved [HIGH][Regression]: Dots —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è —á–µ—Ä–µ–∑ `visibleBanners.map()` –≤–º–µ—Å—Ç–æ `scrollSnaps.map()`, `scrollSnaps` —É–¥–∞–ª—ë–Ω –∏–∑ –¥–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏–∏ —Ö—É–∫–∞
- ‚úÖ Resolved [MEDIUM][Reliability]: `getSafeHref()` –ø—Ä–∏–º–µ–Ω—è–µ—Ç `trim()` –∫ `cta_link` –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –≤ `Link href`
- ‚úÖ Resolved [MEDIUM][Test Gap]: –î–æ–±–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ dots –ø–æ—Å–ª–µ image error (3 dots ‚Üí 2 –ø–æ—Å–ª–µ –æ—à–∏–±–∫–∏)
- –ò—Ç–æ–≥–æ: 31 unit-—Ç–µ—Å—Ç–æ–≤ MarketingBannersSection + 2 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö HomePage = 33 —Ç–µ—Å—Ç–∞ (33/33 passed)

### Review Follow-ups Resolution #3 (2026-02-15)
- ‚úÖ Resolved [HIGH][QA Integrity]: Image mock –ø–µ—Ä–µ–ø–∏—Å–∞–Ω —Å `props` –æ–±—ä–µ–∫—Ç–æ–º ‚Äî `fill` –±–æ–ª—å—à–µ –Ω–µ –¥–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–µ—Ç—Å—è, ESLint —á–∏—Å—Ç
- ‚úÖ Resolved [MEDIUM][Security Test Gap]: –î–æ–±–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç –Ω–∞ `vbscript:` –ø—Ä–æ—Ç–æ–∫–æ–ª –≤ security suite
- ‚úÖ Resolved [MEDIUM][API Contract Test Gap]: –î–æ–±–∞–≤–ª–µ–Ω–æ 2 —Ç–µ—Å—Ç–∞ –≤ bannersService.test.ts ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ `type=marketing` query param –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ `type` –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ Resolved [LOW][Resilience]: –î–æ–±–∞–≤–ª–µ–Ω `cancelled` flag —Å cleanup –≤ `useEffect` ‚Äî –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç setState –ø–æ—Å–ª–µ unmount
- –ò—Ç–æ–≥–æ: 32 unit-—Ç–µ—Å—Ç–æ–≤ MarketingBannersSection + 2 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö HomePage + 7 bannersService = 41 —Ç–µ—Å—Ç (41/41 passed)

### Review Follow-ups Resolution #4 (2026-02-15)
- ‚úÖ Resolved [HIGH][QA Integrity]: –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–æ ‚Äî backend follow-ups –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –Ω–∞ frontend [x] (—Å—Ç—Ä–æ–∫–∏ 89/91) –∏ backend [ ] (—Å—Ç—Ä–æ–∫–∏ 90/92)
- ‚úÖ Resolved [MEDIUM][Traceability]: File List –æ–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Å–µ —Ñ–∞–π–ª—ã across all commits story, –Ω–µ —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â–∏–π staged diff ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
- ‚úÖ Resolved [MEDIUM][Quality Gate]: lint warning –≤ `catalog/page.tsx` pre-existing, –Ω–µ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ story 32.4; —Ñ–∞–π–ª—ã story lint-—á–∏—Å—Ç—ã
- ‚úÖ Resolved [LOW][Performance]: `useBannerCarousel` —Ç–µ–ø–µ—Ä—å –ø–æ–ª—É—á–∞–µ—Ç `loop: shouldAnimate, autoplay: shouldAnimate` ‚Äî –ø—Ä–∏ 1 –±–∞–Ω–Ω–µ—Ä–µ autoplay/loop –≤—ã–∫–ª—é—á–µ–Ω—ã. 2 —Ç–µ—Å—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω—ã
- –ò—Ç–æ–≥–æ: 34 unit-—Ç–µ—Å—Ç–æ–≤ MarketingBannersSection + 2 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö HomePage + 7 bannersService = 43 —Ç–µ—Å—Ç–∞ (43/43 passed)

### Review Follow-ups Resolution #5 (2026-02-15)
- ‚úÖ Resolved [HIGH][Backend Validation]: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ backend-–≤–∞–ª–∏–¥–∞—Ü–∏—è `cta_link` –≤ `Banner.clean()` ‚Äî —Ä–∞–∑—Ä–µ—à–µ–Ω—ã —Ç–æ–ª—å–∫–æ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏ (`/...`), –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Å—Ö–µ–º—ã –∏ –≤–Ω–µ—à–Ω–∏–µ URL –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è; –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ trim –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º.
- ‚úÖ Resolved [Decision]: –î–ª—è unsafe `cta_link` –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ–∫–∞–∑–∞ **–Ω–µ–∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ–≥–æ** –±–∞–Ω–Ω–µ—Ä–∞ (defense-in-depth fallback).
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã unit-—Ç–µ—Å—Ç—ã –º–æ–¥–µ–ª–∏ –¥–ª—è backend-–≤–∞–ª–∏–¥–∞—Ü–∏–∏ `cta_link` (unsafe cases + trim valid link).

### Review Follow-ups Resolution #6 (2026-02-15)
- ‚úÖ Resolved [MEDIUM][Security]: –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –æ–±—Ä–∞—Ç–Ω—ã—Ö —Å–ª–µ—à–µ–π `\` –≤ `is_safe_internal_cta_link()` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `"\\" in trimmed`. Pure unit-—Ç–µ—Å—Ç—ã: `TestIsSafeInternalCtaLink` (5 —Ç–µ—Å—Ç–æ–≤ –±–µ–∑ DB). DB-—Ç–µ—Å—Ç—ã —Ä–∞—Å—à–∏—Ä–µ–Ω—ã 2 parametrize cases.
- ‚úÖ Resolved [MEDIUM][Configuration]: `MARKETING_BANNER_LIMIT` –≤—ã–Ω–µ—Å–µ–Ω –∏–∑ —Ö–∞—Ä–¥–∫–æ–¥–∞ `services.py` –≤ `settings.base.py`. Service —á–∏—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ `getattr(settings, "MARKETING_BANNER_LIMIT", 5)`.
- ‚úÖ Resolved [LOW][Testing]: –•–∞—Ä–¥–∫–æ–¥ URL –≤ `bannersService.test.ts` –∑–∞–º–µ–Ω—ë–Ω –∏–º–ø–æ—Ä—Ç–æ–º `API_URL_PUBLIC` –∏–∑ `api-client.ts` ‚Äî single source of truth.
- –ò—Ç–æ–≥–æ frontend: 34 MarketingBannersSection + 2 HomePage + 7 bannersService = 43 (43/43 passed). Backend pure: 5/5 passed.

### Review Follow-ups Resolution #7 (2026-02-15)
- ‚úÖ Resolved [HIGH][Security][Defense-in-depth]: –î–æ–±–∞–≤–ª–µ–Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ backslash `\` –≤ frontend `isSafeLink()` ‚Äî `trimmed.includes('\\')` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç false. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å backend `is_safe_internal_cta_link()`.
- ‚úÖ Resolved [MEDIUM][Security Test Gap]: –î–æ–±–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç –Ω–∞ backslash –≤ `cta_link` (`/catalog\\..\admin`) –≤ security suite.
- ‚úÖ Resolved [MEDIUM][Configuration Test Gap]: –î–æ–±–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç `test_marketing_limit_configurable_via_settings` —Å `override_settings(MARKETING_BANNER_LIMIT=3)` –≤ backend test_views.py.
- ‚úÖ Resolved [LOW][Resilience]: `cancelled` flag –∑–∞–º–µ–Ω—ë–Ω –Ω–∞ `AbortController` ‚Äî cleanup –≤—ã–∑—ã–≤–∞–µ—Ç `controller.abort()`, –ø—Ä–æ–≤–µ—Ä–∫–∏ —á–µ—Ä–µ–∑ `controller.signal.aborted`.
- –ò—Ç–æ–≥–æ frontend: 35 MarketingBannersSection + 2 HomePage + 7 bannersService = 44 (44/44 passed). Backend: +1 configuration test (–æ–∂–∏–¥–∞–µ—Ç Docker –¥–ª—è –∑–∞–ø—É—Å–∫–∞).

### Review Follow-ups Resolution #8 (2026-02-15)
- ‚úÖ Resolved [HIGH][Cache Invalidation]: –î–æ–±–∞–≤–ª–µ–Ω `pre_save` —Å–∏–≥–Ω–∞–ª `track_old_banner_type` + —Ä–∞—Å—à–∏—Ä–µ–Ω `post_save` –¥–ª—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–µ—à–∞ –æ–±–æ–∏—Ö —Ç–∏–ø–æ–≤ (—Å—Ç–∞—Ä—ã–π + –Ω–æ–≤—ã–π) –ø—Ä–∏ —Å–º–µ–Ω–µ `type`. Regression test –¥–æ–±–∞–≤–ª–µ–Ω.
- ‚úÖ Resolved [MEDIUM][Integration Test Gap]: Regression-—Ç–µ—Å—Ç –Ω–∞ HIGH-–±–∞–≥ (–¥–≤–æ–π–Ω–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è) –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É –∏–∑ follow-up. –†–µ–∞–ª—å–Ω—ã–π Embla E2E —Ç–µ—Å—Ç –æ—Ç–ª–æ–∂–µ–Ω –¥–æ Playwright.
- ‚úÖ Resolved [MEDIUM][Regression Test Gap]: –¢–µ—Å—Ç `test_signal_invalidates_both_caches_on_type_change` ‚Äî hero‚Üímarketing, –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –æ–±–æ–∏—Ö cache keys.
- ‚úÖ Resolved [LOW][AbortController Integration]: `bannersService.getActive` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `signal?: AbortSignal`, –ø–µ—Ä–µ–¥–∞—ë—Ç –≤ axios. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–µ—Ä–µ–¥–∞—ë—Ç `controller.signal`. –¢–µ—Å—Ç –¥–æ–±–∞–≤–ª–µ–Ω.
- –ò—Ç–æ–≥–æ frontend: 35 MarketingBannersSection + 2 HomePage + 8 bannersService = 45 (45/45 passed). Backend: +1 regression test (–æ–∂–∏–¥–∞–µ—Ç Docker –¥–ª—è –∑–∞–ø—É—Å–∫–∞).

### Review Follow-ups Resolution #9 (2026-02-15)
- ‚úÖ Resolved [HIGH][A11y/Accessibility]: –î–æ–±–∞–≤–ª–µ–Ω fallback `banner.image_alt || banner.title` –≤ –æ–±–æ–∏—Ö –≤–µ—Ç–∫–∞—Ö Image render (Link –∏ div). –¢–µ—Å—Ç –¥–æ–±–∞–≤–ª–µ–Ω ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –ø—É—Å—Ç–æ–π `image_alt` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `title` –∫–∞–∫ alt.
- ‚úÖ Resolved [MEDIUM][Integration Gap]: Embla E2E —Ç–µ—Å—Ç –æ—Ç–ª–æ–∂–µ–Ω –¥–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è Playwright/vitest-browser –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã. Mock-based —Ç–µ—Å—Ç—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫—Ä—ã–≤–∞—é—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.
- ‚úÖ Resolved [MEDIUM][Traceability]: File List –æ–±–Ω–æ–≤–ª—ë–Ω ‚Äî `backend/apps/banners/tests/test_views.py` –∏ `frontend/src/services/bannersService.ts` –¥–æ–±–∞–≤–ª–µ–Ω—ã.
- ‚úÖ Resolved [MEDIUM][Regression Test Gap]: –î–æ–±–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç `test_signal_invalidates_role_specific_caches_on_type_change` ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—é `guest` + `retail` –∫–ª—é—á–µ–π –∫–µ—à–∞ –¥–ª—è –æ–±–æ–∏—Ö —Ç–∏–ø–æ–≤ (hero + marketing) –ø—Ä–∏ —Å–º–µ–Ω–µ type.
- –ò—Ç–æ–≥–æ frontend: 36 MarketingBannersSection + 2 HomePage + 8 bannersService = 46 (46/46 passed). Backend: +1 role-specific regression test (–æ–∂–∏–¥–∞–µ—Ç Docker).

### Review Follow-ups Resolution #10 (2026-02-15)
- ‚úÖ **Resolved [HIGH][Backend Test Coverage]**: –î–æ–±–∞–≤–ª–µ–Ω—ã pytest –º–∞—Ä–∫–µ—Ä—ã `@pytest.mark.unit` (TestIsSafeInternalCtaLink ‚Äî pure unit, –±–µ–∑ DB) –∏ `@pytest.mark.integration` (–≤—Å–µ DB-–∑–∞–≤–∏—Å–∏–º—ã–µ –∫–ª–∞—Å—Å—ã) –≤ `test_models.py` –∏ `test_views.py`. –¢–µ–ø–µ—Ä—å —Ç–µ—Å—Ç—ã –≤–∫–ª—é—á–µ–Ω—ã –≤ `make test-unit` –∏ `make test-integration`.
- üîÑ **Deferred [MEDIUM][Integration Gap]**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ä–∞–∑—Ä—ã–≤ –ø–æ –∫–∞—Ä—É—Å–µ–ª–∏ ‚Äî —Ä–µ–∞–ª—å–Ω—ã–π Embla E2E —Ç–µ—Å—Ç –æ—Ç–ª–æ–∂–µ–Ω –¥–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è Playwright/vitest-browser –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã. Mock-based —Ç–µ—Å—Ç—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫—Ä—ã–≤–∞—é—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

### Review Follow-ups Resolution #11 (2026-02-15)
- ‚úÖ **Resolved [MEDIUM][Role-specific TTL]**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω `compute_cache_ttl()` –≤ `backend/apps/banners/services.py` –¥–ª—è —É—á—ë—Ç–∞ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –¢–µ–ø–µ—Ä—å TTL –∫—ç—à–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –±–∞–Ω–Ω–µ—Ä–æ–≤, –≤–∏–¥–∏–º—ã—Ö –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ä–æ–ª–∏, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω—É—é –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—é –∫—ç—à–∞ –≥–æ—Å—Ç–µ–≤—ã—Ö –±–∞–Ω–Ω–µ—Ä–æ–≤ –∏–∑-–∑–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≥—Ä–∞–Ω–∏—Ü –±–∞–Ω–Ω–µ—Ä–æ–≤ –¥—Ä—É–≥–∏—Ö —Ä–æ–ª–µ–π.
  - –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `role_key` –≤ `compute_cache_ttl()`
  - –°–æ–∑–¥–∞–Ω—ã –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ `_get_role_filter()` –∏ `_is_banner_visible_to_role()`
  - –û–±–Ω–æ–≤–ª—ë–Ω –≤—ã–∑–æ–≤ –≤ `views.py` –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ `role_key`
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ç–∏–ø–∏–∑–∞—Ü–∏—è —Å `isinstance(datetime)` –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏

### Review Follow-ups Resolution #12 (2026-02-15)
- ‚úÖ **Resolved [HIGH][Backend Test Coverage]**: –î–æ–±–∞–≤–ª–µ–Ω—ã pytest –º–∞—Ä–∫–µ—Ä—ã –≤–æ –≤—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã –≤ `test_models.py` –∏ `test_views.py`:
  - `@pytest.mark.unit` ‚Äî `TestIsSafeInternalCtaLink` (pure unit, –±–µ–∑ DB)
  - `@pytest.mark.integration` ‚Äî –≤—Å–µ DB-–∑–∞–≤–∏—Å–∏–º—ã–µ –∫–ª–∞—Å—Å—ã (TestBannerTypeField, TestBannerSaveCallsFullClean, TestIsScheduledActive, TestGetForUserTemporalFiltering, TestActiveBannersViewTypeFilter, TestActiveBannersViewCaching, TestActiveBannersViewRoleIsolation, TestActiveBannersViewMarketingLimit)
  - –¢–µ—Å—Ç—ã —Ç–µ–ø–µ—Ä—å –≤–∏–¥–Ω—ã –¥–ª—è `make test-unit` (`-m unit`) –∏ `make test-integration` (`-m integration`)
- Frontend: 36 MarketingBannersSection + 2 HomePage + 8 bannersService = 46 (46/46 passed).

### Review Follow-ups Resolution #13 (2026-02-16)
- ‚úÖ **Resolved [HIGH][TTL Accuracy]**: `compute_cache_ttl()` –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `Banner.get_for_user(None)`. –ó–∞–º–µ–Ω—ë–Ω –Ω–∞ `Banner.objects.filter(is_active=True)` ‚Äî —É–±—Ä–∞–Ω–∞ –ø—Ä–∏–≤—è–∑–∫–∞ –∫ guest scope (–ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∏–¥–µ—Ç—å –±–∞–Ω–Ω–µ—Ä—ã –ª—é–±–æ–π —Ä–æ–ª–∏) –∏ temporal —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è (–ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∏–¥–µ—Ç—å –±—É–¥—É—â–∏–µ `start_date` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ TTL).
- ‚úÖ **Resolved [HIGH][CI Coverage]**: –î–æ–±–∞–≤–ª–µ–Ω—ã pytest –º–∞—Ä–∫–µ—Ä—ã –≤–æ –≤—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã `test_services.py`: `@pytest.mark.unit` (TestGetRoleKey, TestValidateBannerType, TestBuildCacheKey, TestAllRoleKeysDerivedFromUserModel, TestCacheKeyPattern, TestGetRoleFilterReturnsQ) –∏ `@pytest.mark.integration` (TestCacheFunctions, TestInvalidateBannerCache, TestComputeCacheTTL).
- ‚úÖ **Resolved [MEDIUM][Role Filter Semantics]**: `_get_role_filter()` –ø–µ—Ä–µ–ø–∏—Å–∞–Ω: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `Q` –æ–±—ä–µ–∫—Ç—ã –≤–º–µ—Å—Ç–æ `dict`. Authenticated —Ä–æ–ª–∏ (trainer, wholesale, federation) –ø–æ–ª—É—á–∞—é—Ç `Q(show_to_authenticated=True) | Q(role_specific=True)`, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å `Banner.get_for_user()`. –£–¥–∞–ª–µ–Ω–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è `_is_banner_visible_to_role`.
- ‚úÖ **Resolved [MEDIUM][Regression Tests]**: –î–æ–±–∞–≤–ª–µ–Ω–æ 6 regression-—Ç–µ—Å—Ç–æ–≤ –≤ `TestComputeCacheTTL`: guest —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, retail‚Üíauthenticated, trainer‚Üíauthenticated+trainer, trainer-specific, future start_date. + 7 unit-—Ç–µ—Å—Ç–æ–≤ `TestGetRoleFilterReturnsQ`.
- ‚úÖ **Resolved [MEDIUM][Status Sync]**: Story/sprint —Å—Ç–∞—Ç—É—Å—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã.
- Backend unit: 33/33 passed. Frontend: 46/46 passed.

### Review Follow-ups (AI #14)

- ‚úÖ **Resolved [MEDIUM][Traceability]**: –§–∞–π–ª `backend/apps/banners/views.py` –¥–æ–±–∞–≤–ª–µ–Ω –≤ File List (—Ç–∞–±–ª. 271-290).
- ‚úÖ **Resolved [LOW][Performance]**: –í–≤–µ–¥–µ–Ω `HERO_BANNER_LIMIT = 10` –≤ `settings/base.py` –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω –≤ `services.py`. –¢–µ—Å—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã: `test_hero_limited_to_10_by_default`.
- ‚úÖ **Resolved [LOW][Code Style]**: –õ–æ–∫–∞–ª—å–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã –≤ `test_models.py` –∏ `test_services.py` –≤—ã–Ω–µ—Å–µ–Ω—ã –Ω–∞ –≤–µ—Ä—Ö–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å.
- Backend unit: 33/33 passed. Frontend: 46/46 passed.

### Decisions
- ErrorBoundary —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω inline –≤ —Ñ–∞–π–ª–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (–Ω–µ –∫–∞–∫ shared), —Ç–∞–∫ –∫–∞–∫ –≤ –ø—Ä–æ–µ–∫—Ç–µ –Ω–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ ErrorBoundary –∏ story —Ç—Ä–µ–±—É–µ—Ç component-level boundary
- `loading="lazy"` –≤–º–µ—Å—Ç–æ `priority` ‚Äî —Å–µ–∫—Ü–∏—è –Ω–∏–∂–µ fold, lazy loading –æ–ø—Ç–∏–º–∞–ª–µ–Ω
- –ù–µ –¥–æ–±–∞–≤–ª–µ–Ω `unoptimized` prop –Ω–∞ `Next/Image` ‚Äî `next.config.ts` —É–∂–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `images.unoptimized: true` –≥–ª–æ–±–∞–ª—å–Ω–æ

## File List

| File | Change |
|------|--------|
| `frontend/src/components/home/MarketingBannersSection.tsx` | Added ‚Üí Modified (review follow-ups: isSafeLink guard, image_url pre-check, type="button", visibleBanners.map, role="group"+aria-current, removed console.error, reactive loop/autoplay) |
| `frontend/src/components/home/__tests__/MarketingBannersSection.test.tsx` | Added ‚Üí Modified (34 tests: +4 security, +1 vbscript, +2 reliability, +1 embla sync 3-banner, +2 performance autoplay/loop, updated ARIA assertions, fixed Image mock props pattern) |
| `frontend/src/components/home/__tests__/HomePage.test.tsx` | Added (2 tests: section order AC1 regression, all 14 sections presence) |
| `frontend/src/services/__tests__/bannersService.test.ts` | Modified (7 tests: +2 API contract tests for type=marketing query param) |
| `frontend/src/components/home/index.ts` | Modified ‚Äî added `MarketingBannersSection` export |
| `frontend/src/components/home/HomePage.tsx` | Modified ‚Äî added `MarketingBannersSection` between QuickLinksSection and CategoriesSection, updated JSDoc header |
| `backend/apps/banners/models.py` | Modified (backend `cta_link` validation in `clean()`: trim + internal-path-only + unsafe scheme/protocol-relative/external URL/backslash blocking) |
| `backend/apps/banners/tests/test_models.py` | Modified (unit tests: +5 pure `TestIsSafeInternalCtaLink`, +2 parametrize backslash cases in DB tests, +pytest markers `unit`/`integration`) |
| `backend/apps/banners/services.py` | Modified (`MARKETING_BANNER_LIMIT` –≤—ã–Ω–µ—Å–µ–Ω –≤ settings; `_get_role_filter` –ø–µ—Ä–µ–ø–∏—Å–∞–Ω –Ω–∞ Q-–æ–±—ä–µ–∫—Ç—ã —Å `show_to_authenticated` –±–∞–∑–æ–π; `compute_cache_ttl` –∏—Å–ø—Ä–∞–≤–ª–µ–Ω: `Banner.objects.filter(is_active=True)` –≤–º–µ—Å—Ç–æ `get_for_user(None)`; —É–¥–∞–ª–µ–Ω–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è `_is_banner_visible_to_role`) |
| `backend/apps/banners/tests/test_services.py` | Modified (–¥–æ–±–∞–≤–ª–µ–Ω—ã pytest –º–∞—Ä–∫–µ—Ä—ã `unit`/`integration` –Ω–∞ –≤—Å–µ –∫–ª–∞—Å—Å—ã; +6 regression-—Ç–µ—Å—Ç–æ–≤ role-specific TTL; +7 unit-—Ç–µ—Å—Ç–æ–≤ `TestGetRoleFilterReturnsQ`) |
| `backend/freesport/settings/base.py` | Modified (–¥–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ `MARKETING_BANNER_LIMIT = 5`) |
| `frontend/src/services/api-client.ts` | Modified (—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω `API_URL_PUBLIC` –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Ç–µ—Å—Ç–∞—Ö) |
| `backend/apps/banners/signals.py` | Modified (–¥–æ–±–∞–≤–ª–µ–Ω `pre_save` —Å–∏–≥–Ω–∞–ª `track_old_banner_type` –¥–ª—è dual cache invalidation –ø—Ä–∏ —Å–º–µ–Ω–µ type) |
| `backend/apps/banners/views.py` | Modified ‚Äî –ø–µ—Ä–µ–¥–∞—á–∞ `role_key` –≤ `build_cache_key` –∏ `compute_cache_ttl` |
| `backend/apps/banners/tests/test_views.py` | Modified (–¥–æ–±–∞–≤–ª–µ–Ω—ã regression tests: `test_signal_invalidates_both_caches_on_type_change` + `test_signal_invalidates_role_specific_caches_on_type_change`, +pytest markers `integration`) |
| `frontend/src/services/bannersService.ts` | Modified (–¥–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `signal?: AbortSignal` –≤ `getActive`) |

## Change Log

| Date | Change |
|------|--------|
| 2026-02-15 | Story 32.4 implementation complete: MarketingBannersSection component with ErrorBoundary, skeleton, image error handling, carousel integration, 20 unit tests (Claude Opus 4.6) |
| 2026-02-15 | Code Review (AI): 5 follow-ups created (2 HIGH, 2 MEDIUM, 1 LOW). Status ‚Üí in-progress. Issues: Security (cta_link validation), Reliability (image_url pre-check), AC1 regression (HomePage order test), UX semantics (button type), Code quality (unused var). |
| 2026-02-15 | Code Review #2 (AI): 4 new follow-ups added (2 MEDIUM, 2 LOW). Previous 5 still open. New: Embla dots/slides desync (3+ banners), HomePage JSDoc header missing section, ARIA tab/tabpanel violation, console.error noise. Total open: 9 items. Status remains in-progress. |
| 2026-02-15 | Dev Story: All 9 review follow-ups resolved (2 HIGH, 4 MEDIUM, 3 LOW). Added isSafeLink guard, image_url pre-check, type="button", visibleBanners.map fix, role="group"+aria-current, JSDoc update, Image mock cleanup, console.error removal. Tests: 28+2=30 (30/30 passed). HomePage.test.tsx created. |
| 2026-02-15 | Code Review #3 (AI): 4 new follow-ups created (2 HIGH, 2 MEDIUM). Status ‚Üí in-progress. Issues: Open redirect via protocol-relative URL, regression (scrollSnaps.map vs visibleBanners.map), reliability (trimmed vs raw cta_link), test gap (dots sync after image error). |
| 2026-02-15 | Dev Story: All 4 CR#3 follow-ups resolved (2 HIGH, 2 MEDIUM). Added protocol-relative URL block, replaced scrollSnaps.map‚ÜívisibleBanners.map, added getSafeHref() trim, added dots sync test. Tests: 31+2=33 (33/33 passed). |
| 2026-02-15 | Code Review #4 (AI): 4 new follow-ups created (1 HIGH, 2 MEDIUM, 1 LOW). Status ‚Üí in-progress. Issues: QA integrity (lint clean claim false), security test gap (vbscript:), API contract test gap (type=marketing query param), resilience (useEffect cleanup). |
| 2026-02-15 | Code Review #5 (AI): 4 new follow-ups created (1 HIGH, 2 MEDIUM, 1 LOW). Status ‚Üí in-progress. Issues: QA integrity (backend follow-up marked [x] but not done), traceability (File List vs git diff), quality gate (lint warning exists), performance (autoplay always on). |
| 2026-02-15 | Dev Story: All 4 CR#5 follow-ups resolved (1 HIGH, 2 MEDIUM, 1 LOW). QA integrity verified (split correct), File List verified (cross-commit scope), lint warning pre-existing (not in story scope), reactive autoplay/loop implemented. Tests: 34+2+7=43 (43/43 passed). |
| 2026-02-15 | Dev Story: –ó–∞–∫—Ä—ã—Ç backend follow-up –ø–æ `cta_link` (–º–æ–¥–µ–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è + trim + –±–ª–æ–∫ unsafe/external URL), –¥–æ–±–∞–≤–ª–µ–Ω—ã unit-—Ç–µ—Å—Ç—ã –≤ `test_models.py`. –ü–æ —Ä–µ—à–µ–Ω–∏—é PO/Dev —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –Ω–µ–∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ–≥–æ –±–∞–Ω–Ω–µ—Ä–∞ –¥–ª—è unsafe `cta_link` –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ. |
| 2026-02-15 | Dev Story: All 3 CR#6 follow-ups resolved (2 MEDIUM, 1 LOW). Backslash blocking in `is_safe_internal_cta_link`, `MARKETING_BANNER_LIMIT` ‚Üí settings, hardcoded URL ‚Üí import from api-client. Frontend: 43/43. Backend pure: 5/5. |
| 2026-02-15 | Code Review #7 (AI): 4 new follow-ups created (1 HIGH, 2 MEDIUM, 1 LOW). Status ‚Üí in-progress. Issues: Frontend isSafeLink –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç backslash, Security test gap (backslash case), Configuration test gap (MARKETING_BANNER_LIMIT), Resilience (AbortController missing). |
| 2026-02-15 | Dev Story: All 4 CR#8 follow-ups resolved (1 HIGH, 2 MEDIUM, 1 LOW). Backslash blocking in isSafeLink, backslash test added, override_settings test for MARKETING_BANNER_LIMIT, AbortController replaces cancelled flag. Frontend: 44/44. Backend: +1 config test. |
| 2026-02-15 | Code Review #8 (AI): 4 new follow-ups created (1 HIGH, 2 MEDIUM, 1 LOW). Status ‚Üí in-progress. Issues: Cache invalidation misses old type on Banner.type change, integration test gap for Embla (mocks only), regression test gap for type change bug, AbortController not passed to HTTP request. Total open: 4 items. Outcome: Changes Requested. |
| 2026-02-15 | Dev Story: All 4 CR#8 follow-ups resolved (1 HIGH, 2 MEDIUM, 1 LOW). pre_save signal for dual cache invalidation, regression test for type change, Embla E2E deferred to Playwright, AbortSignal passed through bannersService‚Üíaxios. Frontend: 45/45. Backend: +1 regression test. |
| 2026-02-15 | Code Review #9 (AI): 4 new follow-ups created (1 HIGH, 3 MEDIUM). Status ‚Üí in-progress. Issues: A11y risk (empty image_alt no fallback), integration gap (Embla only mocked), traceability (File List missing test_views.py), regression test gap (cache only guest). Total open: 4 items. Outcome: Changes Requested. |
| 2026-02-15 | Dev Story: All 4 CR#9 follow-ups resolved (1 HIGH, 3 MEDIUM). A11y fallback `image_alt \|\| title`, Embla E2E deferred to Playwright, File List updated with test_views.py, role-specific cache test added. Frontend: 36 MarketingBannersSection + 2 HomePage + 8 bannersService = 46 (46/46 passed). Backend: +1 role-specific regression test. |
| 2026-02-15 | Dev Story: Resolved deferred [HIGH][Backend Test Coverage] ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã pytest –º–∞—Ä–∫–µ—Ä—ã `@pytest.mark.unit` –∏ `@pytest.mark.integration` –≤–æ –≤—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã –≤ test_models.py –∏ test_views.py –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –≤ CI (`make test-unit` / `make test-integration`). Frontend: 46/46 passed. |
| 2026-02-16 | Code Review #10 (AI): 5 new follow-ups created (2 HIGH, 3 MEDIUM). Status ‚Üí in-progress. Issues: role-specific TTL accuracy in `compute_cache_ttl`, missing pytest markers in `test_services.py`, role filter semantic mismatch, missing role-key regression tests for TTL, story/sprint status mismatch. |
| 2026-02-16 | Dev Story: All 5 CR#10 follow-ups resolved (2 HIGH, 3 MEDIUM). `compute_cache_ttl` –∏—Å–ø—Ä–∞–≤–ª–µ–Ω (—É–±—Ä–∞–Ω guest-scope + temporal lock), `_get_role_filter` –ø–µ—Ä–µ–ø–∏—Å–∞–Ω –Ω–∞ Q-–æ–±—ä–µ–∫—Ç—ã —Å `show_to_authenticated` –±–∞–∑–æ–π, pytest –º–∞—Ä–∫–µ—Ä—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ test_services.py, 13 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤ (6 regression TTL + 7 unit Q-filter). Frontend: 46/46. Backend unit: 33/33. |
